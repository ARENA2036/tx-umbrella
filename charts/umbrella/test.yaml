---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: tx-federated-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: primary
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 5432
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: keycloak
      app.kubernetes.io/component: keycloak
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 7800
        - port: 8080
---
# Source: umbrella/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: tx-federated-centralidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: centralidp-postgresql
      app.kubernetes.io/component: primary
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 5432
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: centralidp
      app.kubernetes.io/component: keycloak
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 7800
        - port: 8080
---
# Source: umbrella/charts/pgadmin4/templates/networkpolicy.yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: tx-federated-pgadmin4
  namespace: default
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/version: "8.6"
    helm.sh/chart: pgadmin4-1.25.3
spec:
  policyTypes:
    - Ingress
  podSelector:
    matchLabels:
      app.kubernetes.io/name: pgadmin4
      app.kubernetes.io/instance: tx-federated
  ingress:
  - ports:
    - port: 80
---
# Source: umbrella/charts/sharedidp/charts/keycloak/charts/postgresql/templates/primary/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: tx-federated-sharedidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: sharedidp-postgresql
      app.kubernetes.io/component: primary
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 5432
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/networkpolicy.yaml
kind: NetworkPolicy
apiVersion: networking.k8s.io/v1
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  podSelector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: sharedidp
      app.kubernetes.io/component: keycloak
  policyTypes:
    - Ingress
    - Egress
  egress:
    - {}
  ingress:
    - ports:
        - port: 7800
        - port: 8080
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: tx-federated-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: primary
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: keycloak
      app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: tx-federated-centralidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: centralidp-postgresql
      app.kubernetes.io/component: primary
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: centralidp
      app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/sharedidp/charts/keycloak/charts/postgresql/templates/primary/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: tx-federated-sharedidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: sharedidp-postgresql
      app.kubernetes.io/component: primary
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/pdb.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  maxUnavailable: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: sharedidp
      app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/bdrs-server-memory/templates/serviceaccount.yaml
#################################################################################
  #  Copyright (c) 2023 ZF Friedrichshafen AG
  #  Copyright (c) 2023 Mercedes-Benz Tech Innovation GmbH
  #  Copyright (c) 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #  Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
  #
  #  See the NOTICE file(s) distributed with this work for additional
  #  information regarding copyright ownership.
  #
  #  This program and the accompanying materials are made available under the
  #  terms of the Apache License, Version 2.0 which is available at
  #  https://www.apache.org/licenses/LICENSE-2.0.
  #
  #  Unless required by applicable law or agreed to in writing, software
  #  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  #  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  #  License for the specific language governing permissions and limitations
  #  under the License.
  #
  #  SPDX-License-Identifier: Apache-2.0
  #################################################################################---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: bdrs-server
  labels:
    helm.sh/chart: bdrs-server-memory-0.5.4
    app.kubernetes.io/version: "0.5.4"
    app.kubernetes.io/managed-by: Helm
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/charts/postgresql/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tx-federated-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
automountServiceAccountToken: false
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
automountServiceAccountToken: false
---
# Source: umbrella/charts/centralidp/charts/keycloak/charts/postgresql/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tx-federated-centralidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
automountServiceAccountToken: false
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
automountServiceAccountToken: false
---
# Source: umbrella/charts/sharedidp/charts/keycloak/charts/postgresql/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tx-federated-sharedidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
automountServiceAccountToken: false
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
automountServiceAccountToken: false
---
# Source: umbrella/charts/bpdm/charts/bpdm-cleaning-service-dummy/templates/secret.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-bpdm-cleaning-service-dummy
type: Opaque
stringData:
  secrets.yml: |-
    bpdm:
      client:
        orchestrator:
          registration:
            client-secret: changeme
---
# Source: umbrella/charts/bpdm/charts/bpdm-gate/templates/secret.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-bpdm-gate
type: Opaque
stringData:
  secrets.yml: |-
    bpdm:
      client:
        orchestrator:
          registration:
            client-secret: changeme
        pool:
          registration:
            client-secret: changeme
    spring:
      datasource:
        password: dbpasswordbpdm
---
# Source: umbrella/charts/bpdm/charts/bpdm-orchestrator/templates/secret.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-bpdm-orchestrator
type: Opaque
stringData:
  secrets.yml: |-
    spring:
      dataSource:
        password: bpdm
      datasource:
        password: dbpasswordbpdm
---
# Source: umbrella/charts/bpdm/charts/bpdm-pool/templates/secret.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-bpdm-pool
type: Opaque
stringData:
  secrets.yml: |-
    bpdm:
      client:
        orchestrator:
          registration:
            client-secret: changeme
    spring:
      dataSource:
        password: bpdm
      datasource:
        password: dbpasswordbpdm
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/charts/postgresql/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
type: Opaque
data:
  postgres-password: "V1dEQ3V0eG1jNg=="
  password: "TnZGMGxRUWhBSA=="
  # We don't auto-generate LDAP password when it's not provided as we do for other passwords
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
type: Opaque
data:
  admin-password: "ZmNGN2JTSHd6cw=="
---
# Source: umbrella/charts/bpdm/charts/centralidp/templates/secret-base-service-accounts.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bpdm-centralidp-base-service-accounts
  namespace: default
type: Opaque
stringData:
  sa-cl7-cx-1: "**********"
  sa-cl7-cx-5: "**********"
  sa-cl7-cx-7: "**********"
  sa-cl25-cx-1: "**********"
  sa-cl25-cx-2: "**********"
  sa-cl25-cx-3: "**********"
---
# Source: umbrella/charts/bpdm/charts/centralidp/templates/secret-clients.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bpdm-centralidp-clients
  namespace: default
type: Opaque
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  miw: "MPHmucqXKad0vxZ5BRVWVgSYh8roDJoS"
  bpdm: "QLm0xKCyorjuhmH5xXxDGnNWyyYU1fNM"
  bpdm-gate: "HaGnI0Z2BXVXc8ZHHcOCQmBht64yyLVQ"
  bpdm-orchestrator: "Bd1i21MFCXolTftUw1PMvvgEgYOZkqet"
---
# Source: umbrella/charts/bpdm/charts/postgres/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: bpdm-postgres
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgres
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgres-12.12.10
type: Opaque
data:
  postgres-password: "ZGJwYXNzd29yZGJwZG0="
  password: "ZGJwYXNzd29yZGJwZG0="
  # We don't auto-generate LDAP password when it's not provided as we do for other passwords
---
# Source: umbrella/charts/bpndiscovery/templates/secret.yaml
# Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-bpndiscovery
type: Opaque
data:
  # If postgres enabled the environment values will be used from postgres-init.yaml
  SPRING_DATASOURCE_DRIVERCLASSNAME: b3JnLnBvc3RncmVzcWwuRHJpdmVy
  SPRING_SQL_INIT_PLATFORM: cGc=
  SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI: aHR0cHM6Ly9jZW50cmFsaWRwLnR4LmFyZW5hMjAzNi14LmRlL2F1dGgvcmVhbG1zL0NYLUNlbnRyYWw=
  SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_DISCOVERYFINDER_CLIENT_CLIENT_ID: c2EtY2wyMi0wMQ==
  SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_DISCOVERYFINDER_CLIENT_CLIENT_SECRET: Y2xpZW50LXNlY3JldA==
  SPRING_SECURITY_OAUTH2_CLIENT_REGISTRATION_DISCOVERYFINDER_CLIENT_AUTHORIZATION_GRANT_TYPE: Y2hhbmdlbWU=
  SPRING_SECURITY_OAUTH2_CLIENT_PROVIDER_DISCOVERYFINDER_CLIENT_TOKEN_URI: aHR0cHM6Ly9jZW50cmFsaWRwLnR4LmFyZW5hMjAzNi14LmRlL2F1dGgvcmVhbG1zL0NYLUNlbnRyYWwvcHJvdG9jb2wvb3BlbmlkLWNvbm5lY3QvdG9rZW4=
  DISCOVERYFINDER_CLIENT_BASE_URL: c2VtYW50aWNzLnR4LmFyZW5hMjAzNi14LmRlL2Rpc2NvdmVyeWZpbmRlcg==
  BPNDISCOVERY_ALLOWED_TYPES: b2VuLHdtaSxwYXNzdHlwZSxtYW51ZmFjdHVyZXJQYXJ0SWQ=
  BPNDISCOVERY_DESCRIPTION: U2VydmljZSB0byBkaXNjb3ZlciBCUE4gZm9yIGRpZmZlcmVudCBraW5kIG9mIHR5cGUgbnVtYmVycw==
  BPNDISCOVERY_ENDPOINT_ADDRESS: L2JwbmRpc2NvdmVyeQ==
  BPNDISCOVERY_TIME_TO_LIVE: MzE1MzYwMDA=
  BPNDISCOVERY_DOCUMENTATION: L2JwbmRpc2NvdmVyeS9zd2FnZ2VyLXVpL2luZGV4Lmh0bWw=
  BPNDISCOVERY_IDM_PUBLIC_CLIENT_ID: Q2wyMi1DWC1CUE5E
  BPNDISCOVERY_IDM_BPN_ID_CLAIM_NAME: YnBu
  BPNDISCOVERY_SCHEDULER: MCAwICovMSAqICogKg==
---
# Source: umbrella/charts/centralidp/charts/keycloak/charts/postgresql/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-centralidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
type: Opaque
data:
  postgres-password: "ZGJwYXNzd29yZGNlbnRyYWxpZHA="
  password: "ZGJwYXNzd29yZGNlbnRyYWxpZHA="
  # We don't auto-generate LDAP password when it's not provided as we do for other passwords
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
type: Opaque
data:
  admin-password: "YWRtaW5jb25zb2xlcHdjZW50cmFsaWRw"
---
# Source: umbrella/charts/centralidp/templates/secret-base-service-accounts.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-centralidp-base-service-accounts
  namespace: default
type: Opaque
stringData:
  sa-cl1-reg-2: "changeme"
  sa-cl2-01: "changeme"
  sa-cl2-02: "changeme"
  sa-cl2-03: "changeme"
  sa-cl2-04: "changeme"
  sa-cl2-05: "changeme"
  sa-cl3-cx-1: "changeme"
  sa-cl5-custodian-2: "changeme"
  sa-cl7-cx-1: "changeme"
  sa-cl7-cx-5: "changeme"
  sa-cl7-cx-7: "changeme"
  sa-cl8-cx-1: "changeme"
  sa-cl21-01: "changeme"
  sa-cl22-01: "changeme"
  sa-cl24-01: "changeme"
  sa-cl25-cx-1: "changeme"
  sa-cl25-cx-2: "changeme"
  sa-cl25-cx-3: "changeme"
---
# Source: umbrella/charts/centralidp/templates/secret-clients.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-centralidp-clients
  namespace: default
type: Opaque
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  miw: "changeme"
  bpdm: "changeme"
  bpdm-gate: "changeme"
  bpdm-orchestrator: "changeme"
---
# Source: umbrella/charts/centralidp/templates/secret-extra-service-accounts.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-centralidp-extra-service-accounts
  namespace: default
type: Opaque
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  satest01: "UbfW4CR1xH4OskkovqJ2JzcwnQIrG7oj"
  satest02: "pyFUZP2L9UCSVJUScHcN3ZEgy2PGyEpg"
  satest03: "tPwy4exxH1sXBRQouobSA2nNVaaPuwCs"
  satest04: "BxZ3cwYUPJKK7gI4wq7q6Hgoxel6MphF"
  satest05: "dR00GN1AWCYbRGbZY8TXjs2YEPMeCxLF"
  satest06: "pDSziT0TUFAkMx0qGFcvpE4XkMqPh13v"
  satest07: "GY5a44sNuNIjrTyjHvdEPLeNRHH0Kt39"
  satest08: "WUXpQx1aIclA7enqtk4o2uvLDLMreUMI"
  satest09: "N08TGNdhUskJcmVEnOh1tAGwr9oca9PU"
  satest10: "gzdSG0CBDJrtv1gje0zUASu1S9P4I7xP"
  satest11: "CC3fz3dQGZsBp2NCbowOV65efBFZTgEO"
  satest12: "2gjSlFxBO7spEM4aTz3f8CqDS0klbt7C"
  satest13: "3YQzDqEsdUZ83DVHSIRYUCK4pot61r5M"
  satest14: "7qtMpfN3otq5dGiEPssVongXK56lb9LE"
  satest15: "8QiZ8ineW0Lt8ZOlC2MYuCR0TvM6vMYX"
  satest16: "d2sqUurBH9Vd8DNRmjiMfObU67ajorCq"
  satest17: "jvt4J2P1k6fB8meYpTV8DlEarP6clmkJ"
  satest18: "psZRpaglEQrmk0O21jbsjDfQ0zsHmFoX"
  satest19: "yNzL77VHg0sDWqDOJ5s4HE4T4wL9t4TY"
  satest20: "XudY4ELEIgsL3QLBLmSsw7my5AwEwwRj"
  satest21: "1H37pC45LxTAoazf3P2pf3q2LhVokBoF"
  satest22: "yRjISZWbsyyo1UYOeBJ8IsaUq8wig73t"
---
# Source: umbrella/charts/discoveryfinder/templates/secret.yaml
# Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-discoveryfinder
type: Opaque
data:
  # If postgres enabled the environment values will be used from postgres-init.yaml
  SPRING_DATASOURCE_DRIVERCLASSNAME: b3JnLnBvc3RncmVzcWwuRHJpdmVy
  SPRING_SQL_INIT_PLATFORM: cGc=
  SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI: aHR0cHM6Ly9jZW50cmFsaWRwLnR4LmFyZW5hMjAzNi14LmRlL2F1dGgvcmVhbG1zL0NYLUNlbnRyYWw=
  DISCOVERYFINDER_PUBLIC_CLIENT_ID: Q2wyMS1DWC1ERg==
---
# Source: umbrella/charts/pgadmin4/templates/auth-secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-pgadmin4
  namespace: default
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/version: "8.6"
    helm.sh/chart: pgadmin4-1.25.3
type: Opaque
data:
  password: "dHJhY3R1c3hwZ2FkbWluNA=="
---
# Source: umbrella/charts/portal/templates/secret-backend-interfaces.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Secret
metadata:
  name: portal-backend-interfaces
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
# use lookup function to check if secret exists
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  bpdm-client-secret: "changeme"
  clearinghouse-client-secret: "CJLpXhW8TjVA5yY8PeHkOTewoe3tpDBr"
  custodian-client-secret: "changeme"
  sdfactory-client-secret: "changeme"
  offerprovider-client-secret: "changeme"
  dim-client-secret: "changeme"
  onboardingserviceprovider-encryption-key0: "f7bc3d99f1ace73e7a75b794affbbc26206ab29909821a102aaccb2e95e45f7c"
  onboardingserviceprovider-encryption-key1: "8027152fe7a869c88acc86981760acd70ff1d660c2bd129eece94edef933caf7"
  invitation-encryption-key0: "d84fea29d6eac0fa51e36682b164e7d61693cd4202ed04306d2d9c5d46655e2c"
  mailing-encryption-key0: "d2e27d71b018cb36029184852f1baa3e26891be94718f77de4c7cc6c882fe317"
  issuercomponent-client-secret: "changeme"
  dim-encryption-key0: "6cbaf47ee30c778088e6faa44e2f0eed98beda86db06c7d2e37e32ab78e14b33"
  bpndidresolver-api-key: "ORDhdgMUy4H6e8tH0JrHhNPhyOtA3vuL"
  serviceaccount-encryption-key0: "deb8261ec7b89c344f1c5ef5a11606e305f14e0d231b1357d90ad0180c5081d3"
---
# Source: umbrella/charts/portal/templates/secret-backend-keycloak.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Secret
metadata:
  name: portal-backend-keycloak
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
# use lookup function to check if secret exists
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  central-client-secret: "changeme"
  shared-client-secret: "changeme"
---
# Source: umbrella/charts/portal/templates/secret-backend-mailing.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Secret
metadata:
  name: portal-backend-mailing
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
# use lookup function to check if secret exists
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  password: "password"
  provisioning-sharedrealm-password: "password"
---
# Source: umbrella/charts/portal/templates/secret-backend-postgres-init.yaml
apiVersion: v1
kind: Secret
metadata:
  name: portal-postgres
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
# use lookup function to check if secret exists
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  postgres-password: "dbpasswordportal"
  replication-password: "dbpasswordportal"
  portal-password: "dbpasswordportal"
  provisioning-password: "dbpasswordportal"
---
# Source: umbrella/charts/selfdescription/templates/secret.yaml
#################################################################################
# Copyright (c) 2022,2023 T-Systems International GmbH
# Copyright (c) 2022,2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-selfdescription-application
type: Opaque
stringData:
  jwk-set-uri: https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/certs
  clearingHouse-uri: https://clearingHouse-uri
  clearingHouse-serverUrl: https://clearingHouse-serverUrl
  clearingHouse-realm: realm-TwyMVk
  clearingHouse-clientId: 4IzW6WrVaOCX32SO
  clearingHouse-clientSecret: NQwsDgiQ10OcgQoE
  verifycredentials-uri: https://verifycredential-uri
---
# Source: umbrella/charts/sharedidp/charts/keycloak/charts/postgresql/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-sharedidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
type: Opaque
data:
  postgres-password: "ZGJwYXNzd29yZHNoYXJlZGlkcA=="
  password: "ZGJwYXNzd29yZHNoYXJlZGlkcA=="
  # We don't auto-generate LDAP password when it's not provided as we do for other passwords
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/secrets.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
type: Opaque
data:
  admin-password: "YWRtaW5jb25zb2xlcHdzaGFyZWRpZHA="
---
# Source: umbrella/charts/sharedidp/templates/secret-seeding-cx-operator-realm.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-sharedidp-cx-operator-realm-seeding
  namespace: default
type: Opaque
stringData:
  initial-user-username: "cx-operator@tx.test"
  initial-user-password: "tractusx-umbr3lla!"
  initial-user-first-name: "Operator"
  initial-user-last-name: "CX Admin"
  initial-user-email: "cx-operator@tx.org"
  mailing-host: "smtp4dev.release25-03.svc.cluster.local"
  mailing-port: "25"
  mailing-username: "smtp-user"
  mailing-password: "password"
  mailing-from: "info@arena2036-x.de"
  mailing-reply-to: "info@arena2036-x.de"
---
# Source: umbrella/charts/sharedidp/templates/secret-seeding-master-realm.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-sharedidp-master-realm-seeding
  namespace: default
type: Opaque
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  sa-provisioning: "changeme"
  sa-cx-operator: "changeme"
---
# Source: umbrella/charts/ssi-credential-issuer/templates/secret-postgres.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-issuer-postgres
  namespace: default
type: Opaque
# use lookup function to check if secret exists
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  postgres-password: "dbpasswordissuer"
  password: "dbpasswordissuer"
  replication-password: "bf8QPFTfipRPWciWLUEZoiK3r2NTY8AL"
---
# Source: umbrella/charts/ssi-credential-issuer/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: tx-federated-ssi-credential-issuer
  namespace: default
  labels:
    helm.sh/chart: ssi-credential-issuer-1.3.0
    app.kubernetes.io/name: ssi-credential-issuer
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "1.3.0"
    app.kubernetes.io/managed-by: Helm
type: Opaque
# use lookup function to check if secret exists
stringData:
  # if secret doesn't exist, use provided value from values file or generate a random one
  portal-client-secret: "changeme"
  wallet-client-secret: "changeme"
  credential-encryption-key0: "deb8261ec7b89c344f1c5ef5a11606e305f14e0d231b1357d90ad0180c5081d3"
---
# Source: umbrella/charts/ssi-dim-wallet-stub/templates/secret.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Secret
metadata:
  name: ssi-dim-wallet-secret
  namespace: release25-03
type: Opaque
data:
  PORTAL_CLIENT_SECRET: Y2hhbmdlbWU=
  PORTAL_CLIENT_ID: c2EtY2wyLTA1
---
# Source: umbrella/charts/bdrs-server-memory/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bdrs-server
  namespace: "default"
  labels:
    helm.sh/chart: bdrs-server-memory-0.5.4
    app.kubernetes.io/name: bdrs-server
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.5.4"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: bdrs-server
    app.kubernetes.io/part-of: bdrs
data:
  logging.properties: |-
    .level=INFO
    org.eclipse.edc.level=ALL
    handlers=java.util.logging.ConsoleHandler
    java.util.logging.ConsoleHandler.formatter=java.util.logging.SimpleFormatter
    java.util.logging.ConsoleHandler.level=ALL
    java.util.logging.SimpleFormatter.format=[%1$tY-%1$tm-%1$td %1$tH:%1$tM:%1$tS] [%4$-7s] %5$s%6$s%n
---
# Source: umbrella/charts/bpdm/charts/bpdm-cleaning-service-dummy/templates/configMap.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-bpdm-cleaning-service-dummy
  labels:
    helm.sh/chart: bpdm-cleaning-service-dummy-3.3.0
    app.kubernetes.io/name: bpdm-cleaning-service-dummy
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
data:
  deployment.yml: |-
    bpdm:
      client:
        orchestrator:
          base-url: https://business-partners.tx.arena2036-x.de/orchestrator
          provider:
            issuer-uri: https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central
          registration:
            client-id: sa-cl25-cx-1
---
# Source: umbrella/charts/bpdm/charts/bpdm-gate/templates/configMap.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-bpdm-gate
  labels:
    helm.sh/chart: bpdm-gate-6.3.0
    app.kubernetes.io/name: bpdm-gate
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
data:
  deployment.yml: |-
    bpdm:
      bpn: {}
      client:
        orchestrator:
          base-url: https://business-partners.tx.arena2036-x.de/orchestrator
          registration:
            client-id: sa-cl25-cx-3
        pool:
          base-url: https://business-partners.tx.arena2036-x.de/pool
          registration:
            client-id: sa-cl7-cx-1
      datasource:
        host: bpdm-postgres
      security:
        auth-server-url: https://centralidp.tx.arena2036-x.de/auth
        client-id: Cl16-CX-BPDMGate
        realm: CX-Central
    server:
      forward-headers-strategy: FRAMEWORK
---
# Source: umbrella/charts/bpdm/charts/bpdm-orchestrator/templates/configMap.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-bpdm-orchestrator
  labels:
    helm.sh/chart: bpdm-orchestrator-3.3.0
    app.kubernetes.io/name: bpdm-orchestrator
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
data:
  deployment.yml: |-
    bpdm:
      datasource:
        host: bpdm-postgres
      security:
        auth-server-url: https://centralidp.tx.arena2036-x.de/auth
        client-id: Cl25-CX-BPDM-Orchestrator
        realm: CX-Central
    server:
      forward-headers-strategy: FRAMEWORK
---
# Source: umbrella/charts/bpdm/charts/bpdm-pool/templates/configMap.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-bpdm-pool
  labels:
    helm.sh/chart: bpdm-pool-7.3.0
    app.kubernetes.io/name: bpdm-pool
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
data:
  deployment.yml: |-
    bpdm:
      client:
        orchestrator:
          base-url: https://business-partners.tx.arena2036-x.de/orchestrator
          registration:
            client-id: sa-cl25-cx-2
      datasource:
        host: bpdm-postgres
      security:
        auth-server-url: https://centralidp.tx.arena2036-x.de/auth
        client-id: Cl7-CX-BPDM
        realm: CX-Central
    server:
      forward-headers-strategy: FRAMEWORK
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/configmap-env-vars.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: bpdm-centralidp-env-vars
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
data:
  KEYCLOAK_ADMIN: "admin"
  KEYCLOAK_HTTP_PORT: "8080"
  KEYCLOAK_PROXY_HEADERS: ""
  KEYCLOAK_ENABLE_STATISTICS: "false"
  KEYCLOAK_DATABASE_HOST: "tx-federated-postgresql"
  KEYCLOAK_DATABASE_PORT: "5432"
  KEYCLOAK_DATABASE_NAME: "iamcentralidp"
  KEYCLOAK_DATABASE_USER: "kccentral"
  KEYCLOAK_PRODUCTION: "false"
  KEYCLOAK_ENABLE_HTTPS: "false"
  KEYCLOAK_CACHE_TYPE: "ispn"
  KEYCLOAK_CACHE_STACK: "kubernetes"
  JAVA_OPTS_APPEND: "-Djgroups.dns.query=bpdm-centralidp-headless.default.svc.cluster.local"
  KEYCLOAK_LOG_OUTPUT: "default"
  KEYCLOAK_LOG_LEVEL: "INFO"
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/configmap-env-vars.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-centralidp-env-vars
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
data:
  KEYCLOAK_ADMIN: "admin"
  KEYCLOAK_HTTP_PORT: "8080"
  KEYCLOAK_PROXY_HEADERS: ""
  KEYCLOAK_HOSTNAME: |-
    https://centralidp.tx.arena2036-x.de/auth/
  KEYCLOAK_HOSTNAME_STRICT: "false"
  KEYCLOAK_ENABLE_STATISTICS: "false"
  KEYCLOAK_DATABASE_HOST: "tx-federated-centralidp-postgresql"
  KEYCLOAK_DATABASE_PORT: "5432"
  KEYCLOAK_DATABASE_NAME: "iamcentralidp"
  KEYCLOAK_DATABASE_USER: "kccentral"
  KEYCLOAK_PRODUCTION: "false"
  KEYCLOAK_ENABLE_HTTPS: "false"
  KEYCLOAK_CACHE_TYPE: "ispn"
  KEYCLOAK_CACHE_STACK: "kubernetes"
  JAVA_OPTS_APPEND: "-Djgroups.dns.query=tx-federated-centralidp-headless.default.svc.cluster.local"
  KEYCLOAK_LOG_OUTPUT: "default"
  KEYCLOAK_LOG_LEVEL: "INFO"
---
# Source: umbrella/charts/discoveryfinder/templates/ConfigMap.yaml
# Copyright (c) 2023 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################
apiVersion: v1
kind: ConfigMap
metadata:
  name: properties-discoveryfinder
  labels:
    app: properties-discoveryfinder
data:
  application.yml: |-
    discoveryfinder:
      initialEndpoints:
      - description: Service to discover connector endpoints based on bpns
        documentation: https://portal-backend.tx.arena2036-x.de/api/administration/swagger/index.html
        endpointAddress: https://portal-backend.tx.arena2036-x.de/api/administration/Connectors/discovery
        type: bpn
---
# Source: umbrella/charts/portal/templates/configmap-backend-postgres-init.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-portal-cm-postgres
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
data:
  01-init-db-user.sh: |
    postgresql_create_portal_user() {
      local -r escaped_password="${PORTAL_PASSWORD//\'/\'\'}"
      info "Creating user portal"
      export PGPASSWORD="$POSTGRES_PASSWORD"
      echo "CREATE USER portal WITH PASSWORD '${escaped_password}';" | psql -U postgres
    }
    postgresql_create_portal_user
    postgresql_create_provisioning_user() {
      local -r escaped_password="${PROVISIONING_PASSWORD//\'/\'\'}"
      info "Creating user provisioning"
      export PGPASSWORD="$POSTGRES_PASSWORD"
      echo "CREATE USER provisioning WITH PASSWORD '${escaped_password}';" | psql -U postgres
    }
    postgresql_create_provisioning_user
  02-init-db.sql: |
    CREATE SCHEMA portal;
    ALTER SCHEMA portal OWNER TO portal;
    CREATE SCHEMA provisioning;
    ALTER SCHEMA provisioning OWNER TO provisioning;
    CREATE TABLE public.__efmigrations_history_portal (
        migration_id character varying(150) NOT NULL,
        product_version character varying(32) NOT NULL
    );
    ALTER TABLE public.__efmigrations_history_portal OWNER TO portal;
    CREATE TABLE public.__efmigrations_history_provisioning (
        migration_id character varying(150) NOT NULL,
        product_version character varying(32) NOT NULL
    );
    ALTER TABLE public.__efmigrations_history_provisioning OWNER TO provisioning;
---
# Source: umbrella/charts/portal/templates/configmap-backend-seeding-initialdata.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name:  "tx-federated-portal-initial-data"
  namespace: default
data:
  addresses.json: |-
    [
      {
        "id": "b4db3945-19a7-4a50-97d6-e66e8dfd04fb",
        "date_created": "2022-03-24 18:01:33.306000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.306000 +00:00",
        "city": "Munich",
        "region": "BY",
        "streetadditional": "",
        "streetname": "Street",
        "streetnumber": "1",
        "zipcode": "0001",
        "country_alpha2code": "DE"
      }
    ]
  companies.json: |-
    [
      {
        "id": "2dc4249f-b5ca-4d42-bef1-7a7a950a4f87",
        "date_created": "2022-03-24 18:01:33.306000 +00:00",
        "business_partner_number": "BPNL00000003CRHK",
        "name": "Catena-X",
        "shortname": "Catena-X",
        "company_status_id": 2,
        "address_id": "b4db3945-19a7-4a50-97d6-e66e8dfd04fb",
        "self_description_document_id": "00000000-0000-0000-0000-000000000009"
      }
    ]
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/configmap-env-vars.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-sharedidp-env-vars
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
data:
  KEYCLOAK_ADMIN: "admin"
  KEYCLOAK_HTTP_PORT: "8080"
  KEYCLOAK_PROXY_HEADERS: ""
  KEYCLOAK_HOSTNAME: |-
    https://sharedidp.tx.arena2036-x.de/auth/
  KEYCLOAK_HOSTNAME_STRICT: "false"
  KEYCLOAK_ENABLE_STATISTICS: "false"
  KEYCLOAK_DATABASE_HOST: "tx-federated-sharedidp-postgresql"
  KEYCLOAK_DATABASE_PORT: "5432"
  KEYCLOAK_DATABASE_NAME: "iamsharedidp"
  KEYCLOAK_DATABASE_USER: "kcshared"
  KEYCLOAK_PRODUCTION: "false"
  KEYCLOAK_ENABLE_HTTPS: "false"
  KEYCLOAK_CACHE_TYPE: "ispn"
  KEYCLOAK_CACHE_STACK: "kubernetes"
  JAVA_OPTS_APPEND: "-Djgroups.dns.query=tx-federated-sharedidp-headless.default.svc.cluster.local"
  KEYCLOAK_LOG_OUTPUT: "default"
  KEYCLOAK_LOG_LEVEL: "INFO"
---
# Source: umbrella/charts/ssi-credential-issuer/templates/configmap-postgres-init.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: tx-federated-issuer-cm-postgres
  namespace: default
data:
  02-init-db.sql: |
    CREATE SCHEMA issuer;
    ALTER SCHEMA issuer OWNER TO issuer;
    CREATE TABLE public.__efmigrations_history_issuer (
        migration_id character varying(150) NOT NULL,
        product_version character varying(32) NOT NULL
    );
    ALTER TABLE public.__efmigrations_history_issuer OWNER TO issuer;
---
# Source: umbrella/charts/ssi-dim-wallet-stub/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: ssi-dim-wallet-config
  namespace: release25-03
data:
  ENABLE_SWAGGER_UI: "true"
  ENABLE_API_DOC: "true"
  APP_LOG_LEVEL: "debug"
  STUB_ENV: "default"
  SEED_WALLETS_BPN: "BPNL00000003AZQP,BPNL00000003AYRE,BPNL00000003AVTH,BPNL00000003B2OM,BPNL00000003B5MJ,BPNL00000003CSGV,BPNL00000003B3NX,BPNL00000003AXS3,BPNL00000003B0Q0,BPNL00000007OR16,BPNLA3600000ICH1,BPNLA3600000ICH2,BPNLA3600000ICH3,BPNLA3600000ICH4"
  BASE_WALLET_BPN: "BPNL00000003CRHK"
  DID_HOST: "ssi-dim-wallet-stub.tx.arena2036-x.de"
  STUB_URL: "https://ssi-dim-wallet-stub.tx.arena2036-x.de"
  STATUS_LIST_VC_ID: "8a6c7486-1e1f-4555-bdd2-1a178182651e"
  TOKEN_EXPIRY_TIME: "5"
  PORTAL_WAIT_TIME: "60"
  PORTAL_HOST: "https://portal-backend.tx.arena2036-x.de"
  PORTAL_REALM: "CX-Central"
  PORTAL_AUTH_SERVER_URL: "https://centralidp.tx.arena2036-x.de/auth"
---
# Source: umbrella/templates/configmap-portal-testdata-seeding.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name:  "portal-testdata"
  namespace: default
data:
  addresses.test.json: |-
    [
      {
        "id": "b4db3945-19a7-4a50-97d6-e66e8dfd04fe",
        "date_created": "2022-03-24 18:01:33.306000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.306000 +00:00",
        "city": "Munich",
        "region": "BY",
        "streetadditional": null,
        "streetname": "Street",
        "streetnumber": "1",
        "zipcode": "00001",
        "country_alpha2code": "DE"
      },
      {
        "id": "aa49c0ec-4e65-4115-a01c-7adfc36d220e",
        "date_created": "2022-03-24 18:01:33.391000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.391000 +00:00",
        "city": "Berlin",
        "region": "BE",
        "streetadditional": null,
        "streetname": "Street",
        "streetnumber": "4",
        "zipcode": "00001",
        "country_alpha2code": "DE"
      },
      {
        "id": "86da3e1c-a634-41a6-ad44-9880746123e4",
        "date_created": "2022-03-24 18:01:33.435000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.435000 +00:00",
        "city": "Cologne",
        "region": "NW",
        "streetadditional": null,
        "streetname": "Street",
        "streetnumber": "6",
        "zipcode": "00001",
        "country_alpha2code": "DE"
      },
      {
        "id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "date_created": "2022-03-24 18:01:33.443000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.443000 +00:00",
        "city": "Munich",
        "region": "BY",
        "streetadditional": null,
        "streetname": "Street",
        "streetnumber": "17",
        "zipcode": "00001",
        "country_alpha2code": "DE"
      },
      {
        "id": "081c8bfd-c6d1-4119-a5f8-a69726dfc11e",
        "date_created": "2022-03-24 18:01:33.428000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.428000 +00:00",
        "city": "Rome",
        "region": "62",
        "streetadditional": null,
        "streetname": "Street",
        "streetnumber": "9",
        "zipcode": "00001",
        "country_alpha2code": "IT"
      },
      {
        "id": "081c8bfd-c6d1-4119-a5f8-a69726dfc11f",
        "date_created": "2022-03-24 18:01:33.428000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.428000 +00:00",
        "city": "Paris",
        "region": "IDF",
        "streetadditional": null,
        "streetname": "Street",
        "streetnumber": "9",
        "zipcode": "00001",
        "country_alpha2code": "FR"
      },
      {
        "id": "f267f020-2caf-4d64-9aa1-20a6c123fe15",
        "date_created": "2022-03-24 18:01:33.428000 +00:00",
        "date_last_changed": "2022-03-24 18:01:33.428000 +00:00",
        "city": "Vienna",
        "region": "9",
        "streetadditional": null,
        "streetname": "Street",
        "streetnumber": "9",
        "zipcode": "00001",
        "country_alpha2code": "AT"
      }
    ]
  companies.test.json: |-
    [
      {
        "id": "2dc4249f-b5ca-4d42-bef1-7a7a950a4f88",
        "date_created": "2022-03-24 18:01:33.306000 +00:00",
        "business_partner_number": "BPNL00000003AZQP",
        "name": "BPN_OEM_C",
        "shortname": "BPN_OEM_C",
        "company_status_id": 2,
        "address_id": "b4db3945-19a7-4a50-97d6-e66e8dfd04fe",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "220330ac-170d-4e22-8d72-9467ed042149",
        "date_created": "2022-03-24 18:01:33.393000 +00:00",
        "business_partner_number": "BPNL00000003AYRE",
        "name": "BPN_OEM_A",
        "shortname": "BPN_OEM_A",
        "company_status_id": 1,
        "address_id": "aa49c0ec-4e65-4115-a01c-7adfc36d220e",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "bdac6865-2a8d-4bfd-9373-9dfce8190895",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003AVTH",
        "name": "BPN_OEM_B",
        "shortname": "BPN_OEM_B",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "8d39f219-ec52-458f-b208-46ac0d5fcff9",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003AWSS",
        "name": "BPN_IRS_TEST",
        "shortname": "BPN_IRS_TEST",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "6491f342-c715-49d7-b3cf-7b7f765c2ac4",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003B0Q0",
        "name": "BPN_N_TIER_A",
        "shortname": "BPN_N_TIER_A",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "4e2abacb-8434-43df-a358-46082c69d3f8",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNS0000000008ZZ",
        "name": "BPN_TRACEX_A_SITE_A",
        "shortname": "BPN_TRACEX_A_SITE_A",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "2533487e-907a-4de9-ac59-d5b885e65346",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003CNKC",
        "name": "BPN_TRACEX_B",
        "shortname": "BPN_TRACEX_B",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "42cbfff7-f259-4862-9eaf-cbe6233e6e59",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003B6LU",
        "name": "BPN_DISMANTLER",
        "shortname": "BPN_DISMANTLER",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "1805898a-2625-48a0-8cf3-7c876d8cb069",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003CML1",
        "name": "BPN_TRACEX_A",
        "shortname": "BPN_TRACEX_A",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "0c946b81-147b-4ccd-b174-124ac14ab979",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNS00000008BDFH",
        "name": "BPN_TRACEX_B_SITE_A",
        "shortname": "BPN_TRACEX_B_SITE_A",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "c11ee5ee-dc2e-4551-b76f-9f6ac6edd9c9",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003B2OM",
        "name": "BPN_TIER_A",
        "shortname": "BPN_TIER_A",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "5914194c-1031-4070-b484-cf217a012609",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003CSGV",
        "name": "BPN_TIER_C",
        "shortname": "BPN_TIER_C",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "ed60c36c-0855-4341-bd0b-0872566aeabe",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003B5MJ",
        "name": "BPN_TIER_B",
        "shortname": "BPN_TIER_B",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "d5fde96a-65f1-45b3-9605-360909ed25c3",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003AXS3",
        "name": "BPN_SUB_TIER_B",
        "shortname": "BPN_SUB_TIER_B",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "d4234ab0-910f-47e2-b3e7-08fa1ddf505c",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000003B3NX",
        "name": "BPN_SUB_TIER_A",
        "shortname": "BPN_SUB_TIER_A",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      },
      {
        "id": "aa85d559-81d5-4632-98b6-4f4df4ad20d9",
        "date_created": "2022-03-24 18:01:33.430000 +00:00",
        "business_partner_number": "BPNL00000000BJTL",
        "name": "BPN_SUB_TIER_C",
        "shortname": "BPN_SUB_TIER_C",
        "company_status_id": 1,
        "address_id": "0f562ea7-4cc1-47a9-bfee-b41b0ac67ebb",
        "self_description_document_id": "f90962ee-a358-4381-8947-c56268ff32c7"
      }
    ]
  connectors.test.json: |-
    [
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206833",
        "name": "BPN OEM C Connector",
        "connector_url": "http://dataconsumer-1-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "2dc4249f-b5ca-4d42-bef1-7a7a950a4f88",
        "host_id": "2dc4249f-b5ca-4d42-bef1-7a7a950a4f88",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206834",
        "name": "BPN OEM A Connector",
        "connector_url": "http://dataprovider-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "220330ac-170d-4e22-8d72-9467ed042149",
        "host_id": "220330ac-170d-4e22-8d72-9467ed042149",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206835",
        "name": "BPN OEM B Connector",
        "connector_url": "http://dataconsumer-2-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "bdac6865-2a8d-4bfd-9373-9dfce8190895",
        "host_id": "bdac6865-2a8d-4bfd-9373-9dfce8190895",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206836",
        "name": "BPN IRS TEST Connector",
        "connector_url": "http://company4-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "8d39f219-ec52-458f-b208-46ac0d5fcff9",
        "host_id": "8d39f219-ec52-458f-b208-46ac0d5fcff9",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206837",
        "name": "BPN N TIER A Connector",
        "connector_url": "http://company5-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "6491f342-c715-49d7-b3cf-7b7f765c2ac4",
        "host_id": "6491f342-c715-49d7-b3cf-7b7f765c2ac4",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206838",
        "name": "BPN TRACEX A SITE A Connector",
        "connector_url": "http://company6-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "4e2abacb-8434-43df-a358-46082c69d3f8",
        "host_id": "4e2abacb-8434-43df-a358-46082c69d3f8",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206839",
        "name": "BPN TRACEX B Connector",
        "connector_url": "http://company7-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "2533487e-907a-4de9-ac59-d5b885e65346",
        "host_id": "2533487e-907a-4de9-ac59-d5b885e65346",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206840",
        "name": "BPN DISMANTLER Connector",
        "connector_url": "http://company8-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "42cbfff7-f259-4862-9eaf-cbe6233e6e59",
        "host_id": "42cbfff7-f259-4862-9eaf-cbe6233e6e59",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206841",
        "name": "BPN TRACEX A Connector",
        "connector_url": "http://company9-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "1805898a-2625-48a0-8cf3-7c876d8cb069",
        "host_id": "1805898a-2625-48a0-8cf3-7c876d8cb069",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206842",
        "name": "BPN TRACEX B SITE A Connector",
        "connector_url": "http://company10-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "0c946b81-147b-4ccd-b174-124ac14ab979",
        "host_id": "0c946b81-147b-4ccd-b174-124ac14ab979",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206843",
        "name": "BPN TIER A Connector",
        "connector_url": "http://company11-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "c11ee5ee-dc2e-4551-b76f-9f6ac6edd9c9",
        "host_id": "c11ee5ee-dc2e-4551-b76f-9f6ac6edd9c9",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206844",
        "name": "BPN TIER C Connector",
        "connector_url": "http://company12-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "5914194c-1031-4070-b484-cf217a012609",
        "host_id": "5914194c-1031-4070-b484-cf217a012609",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206845",
        "name": "BPN TIER B Connector",
        "connector_url": "http://company13-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "ed60c36c-0855-4341-bd0b-0872566aeabe",
        "host_id": "ed60c36c-0855-4341-bd0b-0872566aeabe",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206846",
        "name": "BPN SUB TIER B Connector",
        "connector_url": "http://company14-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "d5fde96a-65f1-45b3-9605-360909ed25c3",
        "host_id": "d5fde96a-65f1-45b3-9605-360909ed25c3",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206847",
        "name": "BPN SUB TIER A Connector",
        "connector_url": "http://company15-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "d4234ab0-910f-47e2-b3e7-08fa1ddf505c",
        "host_id": "d4234ab0-910f-47e2-b3e7-08fa1ddf505c",
        "location_id": "DE",
        "self_description_document_id": null
      },
      {
        "id": "7e86a0b8-6903-496b-96d1-0ef508206848",
        "name": "BPN SUB TIER C Connector",
        "connector_url": "http://company16-controlplane.tx.arena2036-x.de/api/v1/dsp",
        "type_id": 1,
        "status_id": 2,
        "provider_id": "aa85d559-81d5-4632-98b6-4f4df4ad20d9",
        "host_id": "aa85d559-81d5-4632-98b6-4f4df4ad20d9",
        "location_id": "DE",
        "self_description_document_id": null
      }
    ]
  documents.test.json: |-
    [
      {
        "id": "f90962ee-a358-4381-8947-c56268ff32c7",
        "date_created": "2023-09-28T09:02:11.131663+00:00",
        "document_hash": "riK1M7T4OZsSwX8Mx2RdxEXls9OFz+lcKgq0X+lhYg71F+y6bpUNcMeaYf1dC3xqFdA9W25KEjJlgOQ3Vo6sxg==",
        "document_content": "ewogICJzZWxmRGVzY3JpcHRpb25DcmVkZW50aWFsIjogewogICAgIlNlcnZpY2VPZmZlcmluZyI6IHsKICAgICAgIkBjb250ZXh0IjogWwogICAgICAgICJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSIsCiAgICAgICAgImh0dHBzOi8vZjFjODI3ODUtNTU5OC00MWM3LWEwODMtMDFhOGUxYTgwZTE5Lm1vY2sucHN0bW4uaW8vY3R4c2QiCiAgICAgIF0sCiAgICAgICJ0eXBlIjogWwogICAgICAgICJWZXJpZmlhYmxlQ3JlZGVudGlhbCIKICAgICAgXSwKICAgICAgImlkIjogImh0dHBzOi8vY2FybGEuZGloLWNsb3VkLmNvbS90ZXN0L2NvbXBsaWFuY2Vfc2VydmljZS9wYXJ0aWNpcGFudC9CUE5MMDAwMDAwMDNBWlFQX3BhcnRpY2lwYW50Lmpzb24iLAogICAgICAiY3JlZGVudGlhbFN1YmplY3QiOiB7CiAgICAgICAgImJwbiI6ICJCUE5MSU5JVElBTERBVEFMT0FEIiwKICAgICAgICAicmVnaXN0cmF0aW9uTnVtYmVyIjogWwogICAgICAgICAgewogICAgICAgICAgICAidHlwZSI6ICJ2YXRJRCIsCiAgICAgICAgICAgICJ2YWx1ZSI6ICJERTI5MTYzNjAyOSIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgICJoZWFkcXVhcnRlckFkZHJlc3MiOiB7CiAgICAgICAgICAiY291bnRyeUNvZGUiOiAiREUiCiAgICAgICAgfSwKICAgICAgICAidHlwZSI6ICJMZWdhbFBhcnRpY2lwYW50IiwKICAgICAgICAibGVnYWxBZGRyZXNzIjogewogICAgICAgICAgImNvdW50cnlDb2RlIjogIkRFIgogICAgICAgIH0sCiAgICAgICAgImlkIjogIkJQTkxJTklUSUFMREFUQUxPQUQiCiAgICAgIH0sCiAgICAgICJpc3N1ZXIiOiAiQlBOTDAwMDAwMDAzQ1JISyIsCiAgICAgICJpc3N1YW5jZURhdGUiOiAiMjA5OS0wMC0wMFQwMDowMDowMDAiLAogICAgICAicHJvb2YiOiB7CiAgICAgICAgInR5cGUiOiAiSnNvbldlYlNpZ25hdHVyZTIwMjAiLAogICAgICAgICJjcmVhdGVkIjogIjIwOTktMDAtMDBUMDA6MDA6MDAwIiwKICAgICAgICAicHJvb2ZQdXJwb3NlIjogImFzc2VydGlvbk1ldGhvZCIsCiAgICAgICAgImp3cyI6ICJleUpoYkdjaU9pSlFVekkxTmlJc0ltSTJOQ0k2Wm1Gc2MyVXNJbU55YVhRaU9sc2lZalkwSWwxOS4uSUVKbGo3U2FEQWhqRGp2X2p0N1NfSUt3RVY4X1Q0cVM1ZFhCQ09TNF9xemZVczNNcFZ4WTZxNGxGSTUtOU9mald0blNhQkZDUzBkY0xCWFgtck9mM3dDVUgya245NGU4RldXemZndmxHMHdhM3RzbHRpaXN6UVBDNmJHZjY4MEhTR04yX0VBZ3NpWWdJMTRqVjFxTUhqd1ZFb1NpejJRRk1CNFFhNkF5WHRFSXotbF9reHBhVW9CLXBLYjEyOGJwYUFmN255VV9Eei1kWWFpOXViUTRReDRocHJwQS1Rb3dBR1dHM0JReURGdV8ydlJrYnpINGFPaUs5U3hRQWJqLVBOTXEzREQ0eWFFYjdJOTkwZEp2UFpVTXNOQWt5Tk1pS0pfUEprSzVIN3hlVGpnMERtYjY3R21WMk1NTmxxOHNlNkx2VHlmSFltMG00Sm53ZDRxaF9qY2hhbllhVkFsczNKUUo2TGNoQzdmTzBPUWRpQ1ZpNjVOcklzck5MWkFMb0ZTajh4TDE1VGIxamM0MHFrQl9ZS19uVG1HemNyVFo0SmVMUTZNdHZJd2tERmhuSFgwZjRhU0dxNW9tam9wLS1sMVduQ1lDSTR1eDNIcDV2V2VmZTNyMTVySmNabjN5a3RfWXRnNXlqbklhWWt6X2thVlhNTFgwTzdPVWJHUkR4ZUllNTc2WTlVLWJzemtSRnEzQmlSbnZ1TDBIUm4zM3VMaDJHVlNGa3RDd3dURVQtS0FhczItOTJ6bk9vR093WE44a1RuMGpQOWtkVVZob3BVUl9ZazhYTzNTLTZ1YzNJSWFxSVBZYlc5ZElqOXNDUmtyS29KLTlDVjRfdFg4dGpDRTlJZUhja2paTWJSUEFGb181WHExbHFvaGRQQmJTMG9rRXhOYmh3SE0iLAogICAgICAgICJ2ZXJpZmljYXRpb25NZXRob2QiOiAiZGlkOndlYjpjYXJsYS5kaWgtY2xvdWQuY29tOmRldjpzaWduZXJfc2VydmljZSIKICAgICAgfQogICAgfQogIH0sCiAgImNvbXBsaWFuY2VDcmVkZW50aWFsIjogewogICAgIkBjb250ZXh0IjogWwogICAgICAiaHR0cHM6Ly93d3cudzMub3JnLzIwMTgvY3JlZGVudGlhbHMvdjEiLAogICAgICAiaHR0cHM6Ly9neC1yZWdpc3RyeS50ZXN0LmRpaC1jbG91ZC5jb20vYXBpL3RydXN0ZWQtc2hhcGUtcmVnaXN0cnkvdjEvc2hhcGVzL2pzb25sZC90cnVzdGZyYW1ld29yayMiCiAgICBdLAogICAgInR5cGUiOiBbCiAgICAgICJWZXJpZmlhYmxlQ3JlZGVudGlhbCIKICAgIF0sCiAgICAiaWQiOiAiaHR0cHM6Ly9jYXJsYS5kaWgtY2xvdWQuY29tL3Rlc3QvY29tcGxpYW5jZV9zZXJ2aWNlL2NyZWRlbnRpYWwvQlBOTDAwMDAwMDAzQVpRUF9wYXJ0aWNpcGFudC5qc29uIiwKICAgICJjcmVkZW50aWFsU3ViamVjdCI6IFsKICAgICAgewogICAgICAgICJ0eXBlIjogImd4OmNvbXBsaWFuY2UiLAogICAgICAgICJpZCI6ICJCUE5MSU5JVElBTERBVEFMT0FEIiwKICAgICAgICAiaW50ZWdyaXR5IjogInNoYTI1Ni01OTg4YTRlY2VhYmYyMmMyNzE4Y2YyYWI0YjIwZTIwNmIwNWZkMTczZGU4OWQ5ZDUwZGEwOWE2MTIxM2RhYjhmIgogICAgICB9CiAgICBdLAogICAgImlzc3VlciI6ICJkaWQ6d2ViOmd4LWNvbXBsaWFuY2UudGVzdC5kaWgtY2xvdWQuY29tIiwKICAgICJpc3N1YW5jZURhdGUiOiAiMjA5OS0wMC0wMFQwMDowMDowMDAiLAogICAgImV4cGlyYXRpb25EYXRlIjogIjIwOTktMDAtMDBUMDA6MDA6MDAwIiwKICAgICJwcm9vZiI6IHsKICAgICAgInR5cGUiOiAiSnNvbldlYlNpZ25hdHVyZTIwMjAiLAogICAgICAiY3JlYXRlZCI6ICIyMDk5LTAwLTAwVDAwOjAwOjAwMCIsCiAgICAgICJwcm9vZlB1cnBvc2UiOiAiYXNzZXJ0aW9uTWV0aG9kIiwKICAgICAgImp3cyI6ICJleUpoYkdjaU9pSlFVekkxTmlJc0ltSTJOQ0k2Wm1Gc2MyVXNJbU55YVhRaU9sc2lZalkwSWwxOS4uR1dTY19PVDFTLUdUcjlRM25wRDZnZkVwUnViMGVQSDc2bFBFTlN0cXYxNnZHTjY1by1pRmdlLVZIdHpXTDlaM1NNQTZmbXAwMFpNUXhod1c2dm1JUHdkWk4yZGI1LWhsbjRveVhKRWJMQzJxeE9udTNhcXhsSGRwYzRUeXpPZkdRVklreEpHRkNOdTdDLU1JLVZ1MW0xSUhZSTNkbU16dm1jMUEyNjA0ZW5FanRhdW1jbnlEXzBGcm1nakxua1JLZm9MSHVJS1lsWDd4a3dEU052SGQ2XzcybEc3MjMtU0tmQ3FGZG9KUVBiT2s5UzFuOE5Eczc2dzVzSFV1VGJUQzZGT1JQNFk4U3dqZEF6RDUtb3V1RUhOeVVjMHA1aG9jd1NMTTFyaXFkeGZjeEJwSTVDbjVsa2hMVVlqUzlUR3NVcGJpc1NmNUx4TGk3S2JIVTNwRGZnSDBCZkU3MlMxb3dDSVRSRnR5WnNQbkR0NE9ZNjRxMzI4RGNPd0VEaXJzZ3NNMHBoUkp4dU9KQl9hdHdoaEhPR3JUOXpvZ1NOOFFxWVR6TVJBNGlyY1AzWjY2NTVlQXNmcXhRM21HRWptZTV2eFpHMWFtaFFQNjV0a1NqTVZNbFNnbTFvaWJDUmxXd09ySDZwWVpCa0hJMU1XZVc5Zm5sbTdwVWlpNUNoT3phaWJQZEZobU9uTUE5UFNKMEJRVk5qUVpRblVQRjNacmltVnNQNWhUN0g5VlVNTVhDN2VnQVR2OGVGZ2lNM19YQksySUNZamJRMjN2dXRCWUJmRFRfSXM0NWRoamlnZHQxX2I4dkV6TjNnWXJuTzV1SnhGZlV2SG52dEkxbjVFeldJUHBkZnNtWndXZlp2NzN0U1lRYzAwa3VhNXIzNU9UZG9YZFoxSjNPMmsiLAogICAgICAidmVyaWZpY2F0aW9uTWV0aG9kIjogImRpZDp3ZWI6Z3gtY29tcGxpYW5jZS50ZXN0LmRpaC1jbG91ZC5jb20iCiAgICB9CiAgfQp9",
        "document_name": "SelfDescription_LegalPerson_Test.json",
        "document_type_id": 8,
        "document_status_id": 2,
        "company_user_id": "ac1cf001-7fbc-1f2f-817f-bce058020006",
        "media_type_id": 7
      }
    ]
---
# Source: umbrella/charts/pgadmin4/templates/pvc.yaml
kind: PersistentVolumeClaim
apiVersion: v1
metadata:
  name: tx-federated-pgadmin4
  namespace: default
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/version: "8.6"
    helm.sh/chart: pgadmin4-1.25.3
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 10Gi
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/role.yaml
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
rules:
  - apiGroups:
    - ""
    resources:
    - pods
    verbs:
    - get
    - list
  - apiGroups:
      - ""
    resources:
      - pods
    verbs:
      - get
      - list
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/role.yaml
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
rules:
  - apiGroups:
    - ""
    resources:
    - pods
    verbs:
    - get
    - list
  - apiGroups:
      - ""
    resources:
      - pods
    verbs:
      - get
      - list
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/role.yaml
kind: Role
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
rules:
  - apiGroups:
    - ""
    resources:
    - pods
    verbs:
    - get
    - list
  - apiGroups:
      - ""
    resources:
      - pods
    verbs:
      - get
      - list
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/rolebinding.yaml
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: bpdm-centralidp
subjects:
  - kind: ServiceAccount
    name: bpdm-centralidp
    namespace: "default"
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/rolebinding.yaml
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: tx-federated-centralidp
subjects:
  - kind: ServiceAccount
    name: tx-federated-centralidp
    namespace: "default"
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/rolebinding.yaml
kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: tx-federated-sharedidp
subjects:
  - kind: ServiceAccount
    name: tx-federated-sharedidp
    namespace: "default"
---
# Source: umbrella/charts/bdrs-server-memory/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: bdrs-server
  namespace: "default"
  labels:
    helm.sh/chart: bdrs-server-memory-0.5.4
    app.kubernetes.io/name: bdrs-server
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.5.4"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: bdrs-server
    app.kubernetes.io/part-of: bdrs
spec:
  type: ClusterIP
  ports:
    - port: 8080
      targetPort: default
      protocol: TCP
      name: default
    - port: 8081
      targetPort: management
      protocol: TCP
      name: management
    - port: 8082
      targetPort: directory
      protocol: TCP
      name: directory
  selector:
    app.kubernetes.io/name: bdrs-server
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/bpdm/charts/bpdm-cleaning-service-dummy/templates/service.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-bpdm-cleaning-service-dummy
  labels:
    helm.sh/chart: bpdm-cleaning-service-dummy-3.3.0
    app.kubernetes.io/name: bpdm-cleaning-service-dummy
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 8084
  selector:
    app.kubernetes.io/name: bpdm-cleaning-service-dummy
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/bpdm/charts/bpdm-gate/templates/service.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-bpdm-gate
  labels:
    helm.sh/chart: bpdm-gate-6.3.0
    app.kubernetes.io/name: bpdm-gate
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 8081
  selector:
    app.kubernetes.io/name: bpdm-gate
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/bpdm/charts/bpdm-orchestrator/templates/service.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-bpdm-orchestrator
  labels:
    helm.sh/chart: bpdm-orchestrator-3.3.0
    app.kubernetes.io/name: bpdm-orchestrator
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 8085
  selector:
    app.kubernetes.io/name: bpdm-orchestrator
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/bpdm/charts/bpdm-pool/templates/service.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-bpdm-pool
  labels:
    helm.sh/chart: bpdm-pool-7.3.0
    app.kubernetes.io/name: bpdm-pool
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 8080
  selector:
    app.kubernetes.io/name: bpdm-pool
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-postgresql-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
  annotations:
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/headless-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: bpdm-centralidp-headless
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  type: ClusterIP
  sessionAffinity: ClientIP
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: http
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/bpdm/charts/postgres/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: bpdm-postgres-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgres
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgres-12.12.10
    app.kubernetes.io/component: primary
  annotations:
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/bpdm/charts/postgres/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: bpdm-postgres
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgres
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgres-12.12.10
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/bpndiscovery/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-bpndiscovery-postgresql-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: bpndiscovery-postgresql
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
  annotations:
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: bpndiscovery-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/bpndiscovery/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-bpndiscovery-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: bpndiscovery-postgresql
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: bpndiscovery-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/bpndiscovery/templates/service.yaml
# Copyright (c) 2023 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-bpndiscovery
  labels:
    helm.sh/chart: bpndiscovery-0.5.1
    app.kubernetes.io/name: bpndiscovery
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.6.1"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port:  8080
      targetPort: 4243
  selector:
    app.kubernetes.io/name: bpndiscovery
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-centralidp-postgresql-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
  annotations:
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-centralidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/headless-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-centralidp-headless
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  type: ClusterIP
  sessionAffinity: ClientIP
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: http
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/discoveryfinder/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-discoveryfinder-postgresql-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: discoveryfinder-postgresql
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
  annotations:
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: discoveryfinder-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/discoveryfinder/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-discoveryfinder-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: discoveryfinder-postgresql
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: discoveryfinder-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/discoveryfinder/templates/service.yaml
# Copyright (c) 2023 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-discoveryfinder
  labels:
    helm.sh/chart: discoveryfinder-0.5.1
    app.kubernetes.io/name: discoveryfinder
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.6.1"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port:  8080
      targetPort: 4243
  selector:
    app.kubernetes.io/name: discoveryfinder
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/pgadmin4/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-pgadmin4
  namespace: default
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/version: "8.6"
    helm.sh/chart: pgadmin4-1.25.3
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 80
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-backend-postgresql-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: portal-backend-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
  annotations:
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: portal-backend-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/portal/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-backend-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: portal-backend-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: portal-backend-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/portal/templates/service-backend-administration.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-administration-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-administration-service
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/templates/service-backend-appmarketplace.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-marketplace-app-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-marketplace-app-service
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/templates/service-backend-notification.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-notification-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-notification-service
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/templates/service-backend-registration.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-registration-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-registration-service
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/templates/service-backend-services.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-services-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-services-service
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/templates/service-frontend-assets.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-assets
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-assets
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/templates/service-frontend-portal.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-portal
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-portal
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/portal/templates/service-frontend-registration.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-portal-registration
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app: tx-federated-portal-registration
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/selfdescription/templates/service.yaml
#################################################################################
# Copyright (c) 2022,2023 T-Systems International GmbH
# Copyright (c) 2022,2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-selfdescription
  labels:
    helm.sh/chart: selfdescription-2.1.23
    app.kubernetes.io/name: selfdescription
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.1.15"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 8080
  selector:
    app.kubernetes.io/name: selfdescription
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/sharedidp/charts/keycloak/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-sharedidp-postgresql-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
  annotations:
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/sharedidp/charts/keycloak/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-sharedidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/headless-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-sharedidp-headless
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  type: ClusterIP
  clusterIP: None
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: http
  publishNotReadyAddresses: true
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  type: ClusterIP
  sessionAffinity: ClientIP
  ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: http
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/component: keycloak
---
# Source: umbrella/charts/ssi-credential-issuer/charts/postgresql/templates/primary/svc-headless.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-issuer-postgresql-hl
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: issuer-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
  annotations:
    # Use this annotation in addition to the actual publishNotReadyAddresses
    # field below because the annotation will stop being respected soon but the
    # field is broken in some versions of Kubernetes:
    # https://github.com/kubernetes/kubernetes/issues/58662
    service.alpha.kubernetes.io/tolerate-unready-endpoints: "true"
spec:
  type: ClusterIP
  clusterIP: None
  # We want all pods in the StatefulSet to have their addresses published for
  # the sake of the other Postgresql pods even before they're ready, since they
  # have to be able to talk to each other in order to become ready.
  publishNotReadyAddresses: true
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: issuer-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/ssi-credential-issuer/charts/postgresql/templates/primary/svc.yaml
apiVersion: v1
kind: Service
metadata:
  name: tx-federated-issuer-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: issuer-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  type: ClusterIP
  sessionAffinity: None
  ports:
    - name: tcp-postgresql
      port: 5432
      targetPort: tcp-postgresql
      nodePort: null
  selector:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/name: issuer-postgresql
    app.kubernetes.io/component: primary
---
# Source: umbrella/charts/ssi-credential-issuer/templates/service-credential-issuer.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: tx-federated-ssi-credential-issuer
  namespace: default
  labels:
    helm.sh/chart: ssi-credential-issuer-1.3.0
    app.kubernetes.io/name: ssi-credential-issuer
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "1.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
  - port: 8080
    targetPort: 8080
  selector:
    app.kubernetes.io/name: ssi-credential-issuer
    app.kubernetes.io/instance: tx-federated
---
# Source: umbrella/charts/ssi-dim-wallet-stub/templates/service.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Service
metadata:
  name: ssi-dim-wallet-service
  namespace: release25-03
spec:
  type: ClusterIP
  ports:
    - port: 8080
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app: ssi-dim-wallet-stub
---
# Source: umbrella/templates/smtp-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: smtp4dev
spec:
  selector:
    app: smtp4dev
  ports:
    - name: smtp
      protocol: TCP
      port: 25
      targetPort: 25
    - name: http
      protocol: TCP
      port: 80
      targetPort: 80
---
# Source: umbrella/charts/bdrs-server-memory/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: bdrs-server
  labels:
    helm.sh/chart: bdrs-server-memory-0.5.4
    app.kubernetes.io/name: bdrs-server
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.5.4"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: bdrs-server
    app.kubernetes.io/part-of: bdrs
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: bdrs-server
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app.kubernetes.io/name: bdrs-server
        app.kubernetes.io/instance: tx-federated
    spec:
      serviceAccountName: bdrs-server
      securityContext:
        fsGroup: 10001
        runAsGroup: 10001
        runAsUser: 10001
        seccompProfile:
          type: RuntimeDefault
      containers:
        - name: bdrs-server-memory
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              add: []
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 10001
          # either use the specified image, or use the default one
          image: "tractusx/bdrs-server-memory:0.5.4"

          imagePullPolicy: IfNotPresent
          ports:
            - name: default
              containerPort: 8080
              protocol: TCP
            - name: directory
              containerPort: 8082
              protocol: TCP
            - name: management
              containerPort: 8081
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /api/check/liveness
              port: 8080
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 5
            failureThreshold: 6
            successThreshold: 1
          readinessProbe:
            httpGet:
              path: /api/check/readiness
              port: 8080
            initialDelaySeconds: 5
            periodSeconds: 5
            timeoutSeconds: 5
            failureThreshold: 6
            successThreshold: 1
          resources:
            limits:
              cpu: 1.5
              memory: 512Mi
            requests:
              cpu: 500m
              memory: 128Mi
          env:


            #######
            # API #
            #######
            - name: "EDC_API_AUTH_KEY"
              value: "TEST"
            - name: "WEB_HTTP_PORT"
              value: "8080"
            - name: "WEB_HTTP_PATH"
              value: "/api"
            - name: "WEB_HTTP_MANAGEMENT_PORT"
              value: "8081"
            - name: "WEB_HTTP_MANAGEMENT_PATH"
              value: "/api/management"
            - name: "WEB_HTTP_DIRECTORY_PORT"
              value: "8082"
            - name: "WEB_HTTP_DIRECTORY_PATH"
              value: "/api/directory"

            - name: "EDC_IAM_ISSUER_ID"
              value: "required but not really needed"

            #############################
            ## TRUSTED ISSUER CONFIG
            #############################
            - name: "EDC_IAM_TRUSTED-ISSUER_0-ISSUER_ID"
              value: "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CRHK"

            ######################################
            ## Additional environment variables ##
            ######################################
            - name: "EDC_IAM_DID_WEB_USE_HTTPS"
              value: "false"
          volumeMounts:
            - name: "tmp"
              mountPath: "/tmp"
      volumes:
        - name: "configuration"
          configMap:
            name: bdrs-server
            items:
              - key: "logging.properties"
                path: "logging.properties"
        - name: "tmp"
          emptyDir: { }
---
# Source: umbrella/charts/bpdm/charts/bpdm-cleaning-service-dummy/templates/deployment.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-bpdm-cleaning-service-dummy
  labels:
    helm.sh/chart: bpdm-cleaning-service-dummy-3.3.0
    app.kubernetes.io/name: bpdm-cleaning-service-dummy
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: bpdm-cleaning-service-dummy
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      annotations:
        checksum/config: 3724478bbf67c176a24a1cf66e4d8307c16d2386ed62f1c22de6795e7507d7b6
      labels:
        app.kubernetes.io/name: bpdm-cleaning-service-dummy
        app.kubernetes.io/instance: tx-federated
    spec:
      # @url: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#use-the-default-service-account-to-access-the-api-server
      automountServiceAccountToken: false
      containers:
        - name: bpdm-cleaning-service-dummy
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          image: "docker.io/tractusx/bpdm-cleaning-service-dummy:6.3.0"
          imagePullPolicy: IfNotPresent
          env:
            - name: SPRING_PROFILES_ACTIVE
              value: 
            - name: SPRING_CONFIG_IMPORT
              value: "/etc/conf/deployment.yml,/etc/conf/secrets.yml"
          ports:
            - name: http
              containerPort: 8084
              protocol: TCP
          # @url: https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes
          livenessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/liveness
              port: 8084
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/readiness
              port: 8084
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 40
            httpGet:
              path: /actuator/health/readiness
              port: 8084
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 1000m
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 1Gi
          volumeMounts:
            - mountPath: /etc/conf
              name: config
              readOnly: true
            - mountPath: /tmp
              name: cache
      initContainers:
        - name: startup-delay
          image: busybox:1.28
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          resources:
            limits:
              cpu: 10m
              memory: 100Mi
            requests:
               cpu: 10m
               memory: 100Mi
          command: ['sh', '-c', "sleep 90"]
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
      volumes:
        - name: config
          projected:
            sources:
              - configMap:
                  name: tx-federated-bpdm-cleaning-service-dummy
              - secret:
                  name: tx-federated-bpdm-cleaning-service-dummy
        - name: cache
          emptyDir:
            sizeLimit: 200Mi
---
# Source: umbrella/charts/bpdm/charts/bpdm-gate/templates/deployment.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-bpdm-gate
  labels:
    helm.sh/chart: bpdm-gate-6.3.0
    app.kubernetes.io/name: bpdm-gate
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: bpdm-gate
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      annotations:
        checksum/config: 712683c04880eb3275b69645ec7de9c5be6e8dbd32eb94f6f5e0f851342b22ab
      labels:
        app.kubernetes.io/name: bpdm-gate
        app.kubernetes.io/instance: tx-federated
    spec:
      # @url: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#use-the-default-service-account-to-access-the-api-server
      automountServiceAccountToken: false
      containers:
        - name: bpdm-gate
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          image: "docker.io/tractusx/bpdm-gate:6.3.0"
          imagePullPolicy: IfNotPresent
          env:
            - name: SPRING_PROFILES_ACTIVE
              value: 
            - name: SPRING_CONFIG_IMPORT
              value: "/etc/conf/deployment.yml,/etc/conf/secrets.yml"
          ports:
            - name: http
              containerPort: 8081
              protocol: TCP
          # @url: https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes
          livenessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/liveness
              port: 8081
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/readiness
              port: 8081
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 40
            httpGet:
              path: /actuator/health/readiness
              port: 8081
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 1000m
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 1Gi
          volumeMounts:
            - mountPath: /etc/conf
              name: config
              readOnly: true
            - mountPath: /tmp
              name: cache
      initContainers:
        - name: startup-delay
          image: busybox:1.28
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          resources:
            limits:
              cpu: 10m
              memory: 100Mi
            requests:
               cpu: 10m
               memory: 100Mi
          command: ['sh', '-c', "sleep 90"]
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
      volumes:
        - name: config
          projected:
            sources:
              - configMap:
                  name: tx-federated-bpdm-gate
              - secret:
                  name: tx-federated-bpdm-gate
        - name: cache
          emptyDir:
            sizeLimit: 200Mi
---
# Source: umbrella/charts/bpdm/charts/bpdm-orchestrator/templates/deployment.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-bpdm-orchestrator
  labels:
    helm.sh/chart: bpdm-orchestrator-3.3.0
    app.kubernetes.io/name: bpdm-orchestrator
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: bpdm-orchestrator
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      annotations:
        checksum/config: 14d5a33c84df2407af2ed91a9555fe999d358b3bd274f0706b5945425ea2e181
      labels:
        app.kubernetes.io/name: bpdm-orchestrator
        app.kubernetes.io/instance: tx-federated
    spec:
      # @url: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#use-the-default-service-account-to-access-the-api-server
      automountServiceAccountToken: false
      containers:
        - name: bpdm-orchestrator
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          image: "docker.io/tractusx/bpdm-orchestrator:6.3.0"
          imagePullPolicy: IfNotPresent
          env:
            - name: SPRING_PROFILES_ACTIVE
              value: 
            - name: SPRING_CONFIG_IMPORT
              value: "/etc/conf/deployment.yml,/etc/conf/secrets.yml"
          ports:
            - name: http
              containerPort: 8085
              protocol: TCP
          # @url: https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes
          livenessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/liveness
              port: 8085
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/readiness
              port: 8085
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 40
            httpGet:
              path: /actuator/health/readiness
              port: 8085
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 1000m
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 1Gi
          volumeMounts:
            - mountPath: /etc/conf
              name: config
              readOnly: true
            - mountPath: /tmp
              name: cache
      initContainers:
        - name: startup-delay
          image: busybox:1.28
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          resources:
            limits:
              cpu: 10m
              memory: 100Mi
            requests:
               cpu: 10m
               memory: 100Mi
          command: ['sh', '-c', "sleep 90"]
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
      volumes:
        - name: config
          projected:
            sources:
              - configMap:
                  name: tx-federated-bpdm-orchestrator
              - secret:
                  name: tx-federated-bpdm-orchestrator
        - name: cache
          emptyDir:
            sizeLimit: 200Mi
---
# Source: umbrella/charts/bpdm/charts/bpdm-pool/templates/deployment.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-bpdm-pool
  labels:
    helm.sh/chart: bpdm-pool-7.3.0
    app.kubernetes.io/name: bpdm-pool
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: bpdm-pool
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      annotations:
        checksum/config: 0a129d10fd80cdd255124dfece0c5506f1c45c1c69e3fbb78c06c7bcb57cffa3
      labels:
        app.kubernetes.io/name: bpdm-pool
        app.kubernetes.io/instance: tx-federated
    spec:
      # @url: https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/#use-the-default-service-account-to-access-the-api-server
      automountServiceAccountToken: false
      containers:
        - name: bpdm-pool
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          image: "docker.io/tractusx/bpdm-pool:6.3.0"
          imagePullPolicy: IfNotPresent
          env:
            - name: SPRING_PROFILES_ACTIVE
              value: 
            - name: SPRING_CONFIG_IMPORT
              value: "/etc/conf/deployment.yml,/etc/conf/secrets.yml"
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
          # @url: https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes
          livenessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/liveness
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          readinessProbe:
            failureThreshold: 5
            httpGet:
              path: /actuator/health/readiness
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          startupProbe:
            failureThreshold: 40
            httpGet:
              path: /actuator/health/readiness
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 30
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 1000m
              memory: 1Gi
            requests:
              cpu: 100m
              memory: 1Gi
          volumeMounts:
            - mountPath: /etc/conf
              name: config
              readOnly: true
            - mountPath: /tmp
              name: cache
      initContainers:
        - name: startup-delay
          image: busybox:1.28
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 10001
            runAsNonRoot: true
            runAsUser: 10001
            seccompProfile:
              type: RuntimeDefault
          resources:
            limits:
              cpu: 10m
              memory: 100Mi
            requests:
               cpu: 10m
               memory: 100Mi
          command: ['sh', '-c', "sleep 90"]
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
      volumes:
        - name: config
          projected:
            sources:
              - configMap:
                  name: tx-federated-bpdm-pool
              - secret:
                  name: tx-federated-bpdm-pool
        - name: cache
          emptyDir:
            sizeLimit: 200Mi
---
# Source: umbrella/charts/bpndiscovery/templates/deployment.yaml
# Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2024 Contributors to the Eclipse Foundation
  #
  # See the NOTICE file(s) distributed with this work for additional
  # information regarding copyright ownership.
  #
  # This program and the accompanying materials are made available under the
  # terms of the Apache License, Version 2.0 which is available at
  # https://www.apache.org/licenses/LICENSE-2.0.
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  # License for the specific language governing permissions and limitations
  # under the License.
  #
  # SPDX-License-Identifier: Apache-2.0
  ###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-bpndiscovery
  labels:
    helm.sh/chart: bpndiscovery-0.5.1
    app.kubernetes.io/name: bpndiscovery
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.6.1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: bpndiscovery
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app.kubernetes.io/name: bpndiscovery
        app.kubernetes.io/instance: tx-federated
    spec:
      securityContext:
        runAsUser: 100
      containers:
        - name: bpndiscovery
          image: docker.io/tractusx/sldt-bpn-discovery:0.6.1
          imagePullPolicy: IfNotPresent
          ports:
            - containerPort: 4243
#         Containers should not run with allowPrivilegeEscalation in order to prevent them from gaining more privileges than their parent process
#         Refer Set the security context for a Pod section here - https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
          securityContext:
            runAsUser: 100
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          livenessProbe:
            httpGet:
              path: /actuator/health/liveness
              port: 4243
            initialDelaySeconds: 200
            periodSeconds: 3
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: 4243
            initialDelaySeconds: 200
            periodSeconds: 3
            failureThreshold: 3
          envFrom:
            - secretRef:
                name: tx-federated-bpndiscovery
            - secretRef:
                name: secret-bpndiscovery-postgres-init
          resources:
            limits:
              cpu: 750m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
          volumeMounts:
            - mountPath: /tmp
              name: empty-tmp
      volumes:
        - name: empty-tmp
          emptyDir: {}
      imagePullSecrets:
        null
---
# Source: umbrella/charts/discoveryfinder/templates/deployment.yaml
# Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-discoveryfinder
  labels:
    helm.sh/chart: discoveryfinder-0.5.1
    app.kubernetes.io/name: discoveryfinder
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.6.1"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: discoveryfinder
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app.kubernetes.io/name: discoveryfinder
        app.kubernetes.io/instance: tx-federated
    spec:
      securityContext:
        runAsUser: 100
      volumes:
        - name: properties-discoveryfinder-config
          configMap:
            name: properties-discoveryfinder
      containers:
        - name: discoveryfinder
          image: docker.io/tractusx/sldt-discovery-finder:0.6.1
          imagePullPolicy: IfNotPresent
          volumeMounts:
            - name: properties-discoveryfinder-config
              mountPath: /service/config
          ports:
            - containerPort: 4243
#         Containers should not run with allowPrivilegeEscalation in order to prevent them from gaining more privileges than their parent process
#         Refer Set the security context for a Pod section here - https://kubernetes.io/docs/tasks/configure-pod-container/security-context/
          securityContext:
            runAsUser: 100
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
          livenessProbe:
            httpGet:
              path: /actuator/health/liveness
              port: 4243
            initialDelaySeconds: 200
            periodSeconds: 3
            failureThreshold: 3
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: 4243
            initialDelaySeconds: 200
            periodSeconds: 3
            failureThreshold: 3
          envFrom:
            - secretRef:
                name: tx-federated-discoveryfinder
            - secretRef:
                name: secret-discoveryfinder-postgres-init
          resources:
            limits:
              cpu: 750m
              memory: 1024Mi
            requests:
              cpu: 250m
              memory: 1024Mi
          volumeMounts:
            - mountPath: /tmp
              name: empty-tmp
      volumes:
        - name: empty-tmp
          emptyDir: {}
      imagePullSecrets:
        null
---
# Source: umbrella/charts/pgadmin4/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-pgadmin4
  namespace: default
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/version: "8.6"
    helm.sh/chart: pgadmin4-1.25.3
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: pgadmin4
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app.kubernetes.io/name: pgadmin4
        app.kubernetes.io/instance: tx-federated
      annotations:
        checksum/secret: c6557d7d54007108e5a4fedd5056c5c4845b2511e83d4c3edf34a095f9d71e97
    spec:
      automountServiceAccountToken: false
      containers:
        - name: pgadmin4
          image: "docker.io/dpage/pgadmin4:8.6"
          imagePullPolicy: IfNotPresent
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
            httpGet:
              port: http
              path: /misc/ping
              scheme: HTTP
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 60
            successThreshold: 1
            timeoutSeconds: 15
          readinessProbe:
            httpGet:
              port: http
              path: /misc/ping
              scheme: HTTP
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 60
            successThreshold: 1
            timeoutSeconds: 15
          env:
            - name: PGADMIN_CONFIG_ENHANCED_COOKIE_PROTECTION
              value: "False"
            - name: PGADMIN_DEFAULT_EMAIL
              value: pgadmin4@txtest.org
            - name: PGADMIN_DEFAULT_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-pgadmin4
                  key: password
          volumeMounts:
            - name: pgadmin-data
              mountPath: /var/lib/pgadmin
              subPath: 
          resources:
            {}
      volumes:
        - name: pgadmin-data
          persistentVolumeClaim:
            claimName: tx-federated-pgadmin4
      securityContext:
        fsGroup: 5050
        runAsGroup: 5050
        runAsUser: 5050
---
# Source: umbrella/charts/portal/templates/deployment-backend-administration.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-administration-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-administration-service
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-administration-service
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-administration-service
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-administration-service:v2.4.0"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: DOTNET_ENVIRONMENT
          value: "Development"
        - name: TMPDIR
          value: "/mnt/tmp"
        - name: "PORTAL_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "portal-password"
        - name: "PROVISIONING_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "provisioning-password"
        - name: "CONNECTIONSTRINGS__PORTALDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
        - name: "CONNECTIONSTRINGS__PROVISIONINGDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=provisioning;Password=$(PROVISIONING_PASSWORD);Ssl Mode=Disable;"
        - name: "MVC_ROUTING_BASEPATH"
          value: "api/administration"
        - name: "DATABASEACCESS__PORTAL__DATABASESCHEMA"
          value: "portal"
        - name: "APPLICATIONCHECKLIST__BPDM__BASEADDRESS"
          value: "https://business-partners.tx.arena2036-x.de/gate/v6"
        - name: "APPLICATIONCHECKLIST__BPDM__CLIENTID"
          value: "sa-cl7-cx-5"
        - name: "APPLICATIONCHECKLIST__BPDM__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "bpdm-client-secret"
        - name: "APPLICATIONCHECKLIST__BPDM__GRANTTYPE"
          value: "client_credentials"
        - name: "APPLICATIONCHECKLIST__BPDM__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "APPLICATIONCHECKLIST__BPDM__PASSWORD"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__BPDM__SCOPE"
          value: "openid"
        - name: "APPLICATIONCHECKLIST__BPDM__USERNAME"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__BPDM__USEDIMWALLET"
          value: "true"
        - name: "APPLICATIONCHECKLIST__BPDM__STARTSHARINGSTATEASREADY"
          value: "true"
        - name: "APPLICATIONCHECKLIST__BPDM__BUSINESSPARTNERPOOLBASEADDRESS"
          value: "https://business-partners.tx.arena2036-x.de/pool/v6"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__BASEADDRESS"
          value: "https://validation.tx.arena2036-x.de"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__CLIENTID"
          value: "clearinghouse-client-id"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "clearinghouse-client-secret"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__GRANTTYPE"
          value: "client_credentials"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__TOKENADDRESS"
          value: "https://someiam.tx.arena2036-x.de/realms/example/protocol/openid-connect/token"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__PASSWORD"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__SCOPE"
          value: "openid"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__USERNAME"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__CALLBACKURL"
          value: "https://portal-backend.tx.arena2036-x.de/api/administration/registration/clearinghouse" 
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__USEDIMWALLET"
          value: "true"
        - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__RETRIGGERENCLEARINGHOUSEINTERVALINDAYS"
          value: "30"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__MEMBERSHIPERRORMESSAGE"
          value: "Credential of type MembershipCredential is already exists"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__BASEADDRESS"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__CLIENTID"
          value: "sa-cl5-custodian-2"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "custodian-client-secret"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__GRANTTYPE"
          value: "client_credentials"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__PASSWORD"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__SCOPE"
          value: "openid"
        - name: "APPLICATIONCHECKLIST__CUSTODIAN__USERNAME"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__CLIENTID"
          value: "sa-cl8-cx-1"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "sdfactory-client-secret"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__GRANTTYPE"
          value: "client_credentials"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__PASSWORD"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__SCOPE"
          value: "openid"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__SDFACTORYURL"
          value: "https://sdfactory.tx.arena2036-x.de/api/tagus/selfdescription"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__CLEARINGHOUSECONNECTDISABLED"
          value: "true"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__CONNECTORALLOWSDDOCUMENTSKIPERRORCODE"
          value: "E2010"
        - name: "APPLICATIONCHECKLIST__SDFACTORY__USERNAME"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__DIM__USERNAME"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__DIM__PASSWORD"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__DIM__CLIENTID"
          value: "sa-cl2-05"
        - name: "APPLICATIONCHECKLIST__DIM__GRANTTYPE"
          value: "client_credentials"
        - name: "APPLICATIONCHECKLIST__DIM__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "dim-client-secret"
        - name: "APPLICATIONCHECKLIST__DIM__SCOPE"
          value: "openid"
        - name: "APPLICATIONCHECKLIST__DIM__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "APPLICATIONCHECKLIST__DIM__BASEADDRESS"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/api/dim"
        - name: "APPLICATIONCHECKLIST__DIM__UNIVERSALRESOLVERADDRESS"
          value: "https://dev.uniresolver.io/"
        - name: "APPLICATIONCHECKLIST__DIM__DIDDOCUMENTBASELOCATION"
          value: "https://portal-backend.tx.arena2036-x.de/api/administration/staticdata/did"
        - name: "APPLICATIONCHECKLIST__DIM__MAXVALIDATIONTIMEINDAYS"
          value: "7"
        - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "dim-encryption-key0"
        - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__USERNAME"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__PASSWORD"
          value: "empty"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__CLIENTID"
          value: "sa-cl2-04"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__GRANTTYPE"
          value: "client_credentials"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "issuercomponent-client-secret"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__SCOPE"
          value: "openid"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__BASEADDRESS"              
          value: "https://ssi-credential-issuer.tx.arena2036-x.de"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__CALLBACKURL"
          value: "https://portal-backend.tx.arena2036-x.de"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "dim-encryption-key0"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "COMPANYDATA__USECASEPARTICIPATIONMEDIATYPES__0"
          value: "PDF"
        - name: "COMPANYDATA__SSICERTIFICATEMEDIATYPES__0"
          value: "PDF"
        - name: "COMPANYDATA__COMPANYCERTIFICATEMEDIATYPES__0"
          value: "PDF"
        - name: "COMPANYDATA__DECENTRALIDENTITYMANAGEMENTAUTHURL"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/api/sts"
        - name: "COMPANYDATA__ISSUERDID"
          value: "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CRHK"
        - name: "COMPANYDATA__BPNDIDRESOLVERURL"
          value: "https://bpn-did-resolution-service.example.org/api/directory"
        - name: "CONNECTORS__VALIDCERTIFICATIONCONTENTTYPES__0"
          value: "application/x-pem-file"
        - name: "CONNECTORS__VALIDCERTIFICATIONCONTENTTYPES__1"
          value: "application/x-x509-ca-cert"
        - name: "CONNECTORS__VALIDCERTIFICATIONCONTENTTYPES__2"
          value: "application/pkix-cert"
        - name: "CONNECTORS__VALIDCERTIFICATIONCONTENTTYPES__3"
          value: "application/octet-stream"
        - name: "CONNECTORS__SELFDESCRIPTIONDOCUMENTURL"
          value: "https://portal-backend.tx.arena2036-x.de/api/administration/documents/selfDescription"
        - name: "CONNECTORS__CLEARINGHOUSECONNECTDISABLED"
          value: "true"
        - name: "DOCUMENT__ENABLESEEDENDPOINT"
          value: "True"
        - name: "DOCUMENT__FRAMEDOCUMENTTYPEIDS__0"
          value: "CX_FRAME_CONTRACT"
        - name: "HEALTHCHECKS__0__PATH"
          value: "/health/startup"
        - name: HEALTHCHECKS__0__TAGS__1
          value: portaldb
        - name: HEALTHCHECKS__0__TAGS__2
          value: provisioningdb
        - name: "HEALTHCHECKS__1__PATH"
          value: "/ready"
        - name: "HEALTHCHECKS__2__PATH"
          value: "/healthz"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__CHARSET"
          value: "UTF-8"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__CONTENTTYPE"
          value: "text/csv"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__FILENAME"
          value: "identityproviderlinks.csv"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__HEADEREMAIL"
          value: "Email"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__HEADERFIRSTNAME"
          value: "FirstName"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__HEADERLASTNAME"
          value: "LastName"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__HEADERPROVIDERALIAS"
          value: "ProviderAlias"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__HEADERPROVIDERUSERID"
          value: "ProviderUserId"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__HEADERPROVIDERUSERNAME"
          value: "ProviderUserName"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__HEADERUSERID"
          value: "UserId"
        - name: "IDENTITYPROVIDERADMIN__CSVSETTINGS__SEPARATOR"
          value: ","
        - name: "IDENTITYPROVIDERADMIN__DELETEIDPROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "IDENTITYPROVIDERADMIN__DELETEIDPROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "IDENTITYPROVIDERADMIN__DELETEIDPROLES__0__USERROLENAMES__1"
          value: "IT Admin"
        - name: "IDENTITYPROVIDERADMIN__DEACTIVATEIDPROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "IDENTITYPROVIDERADMIN__DEACTIVATEIDPROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "IDENTITYPROVIDERADMIN__DEACTIVATEIDPROLES__0__USERROLENAMES__1"
          value: "IT Admin"
        - name: "JWTBEAREROPTIONS__METADATAADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/.well-known/openid-configuration"
        - name: "JWTBEAREROPTIONS__REQUIREHTTPSMETADATA"
          value: "false"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDAUDIENCE"
          value: "Cl2-CX-Portal"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDISSUER"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__CLOCKSKEW"
          value: "00:05:00"
        - name: "JWTBEAREROPTIONS__REFRESHINTERVAL"
          value: "00:00:30"
        - name: "KEYCLOAK__CENTRAL__AUTHREALM"
          value: "CX-Central"
        - name: "KEYCLOAK__CENTRAL__CLIENTID"
          value: "sa-cl1-reg-2"
        - name: "KEYCLOAK__CENTRAL__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "central-client-secret"
        - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
          value: "https://centralidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
          value: "true"
        - name: "KEYCLOAK__SHARED__AUTHREALM"
          value: "master"
        - name: "KEYCLOAK__SHARED__CLIENTID"
          value: "sa-cl1-reg-1"
        - name: "KEYCLOAK__SHARED__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "shared-client-secret"
        - name: "KEYCLOAK__SHARED__CONNECTIONSTRING"
          value: "https://sharedidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__SHARED__USEAUTHTRAIL"
          value: "true"
        - name: "SERILOG__MINIMUMLEVEL__Default"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Administration.Service.BusinessLogic"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.SdFactory.Library"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Custodian.Library"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Bpdm.Library"
          value: "Debug"
        - name: "NETWORK2NETWORK__INITIALROLES__0__CLIENTID"
          value: "Cl1-CX-Registration"
        - name: "NETWORK2NETWORK__INITIALROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGINDEX"
          value: "1"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "onboardingserviceprovider-encryption-key0"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__INDEX"
          value: "1"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__CIPHERMODE"
          value: "CBC"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__PADDINGMODE"
          value: "PKCS7"
        - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "onboardingserviceprovider-encryption-key1"
        - name: "PROVISIONING__CENTRALIDENTITYPROVIDER__CONFIG__CLIENTID"
          value: "central-idp"
        - name: "PROVISIONING__CENTRALREALM"
          value: "CX-Central"
        - name: "PROVISIONING__CENTRALREALMID"
          value: "CX-Central"
        - name: "PROVISIONING__INVITEDUSERINITIALROLES__0__CLIENTID"
          value: "Cl1-CX-Registration"
        # -- if the array is extended please extend NETWORK2NETWORK__INITIALROLES as well
        - name: "PROVISIONING__INVITEDUSERINITIALROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__AUTH"
          value: "true"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__FROM"
          value: "info@arena2036-x.de"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__HOST"
          value: "smtp4dev.release25-03.svc.cluster.local"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-mailing"
              key: "provisioning-sharedrealm-password"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__PORT"
          value: "25"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__REPLYTO"
          value: "info@arena2036-x.de"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__STARTTLS"
          value: "true"
        - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__USER"
          value: "smtp-user"
        - name: "PROVISIONING__SHAREDREALMCLIENT__CLIENTID"
          value: "central-idp"
        - name: "PROVISIONING__DIMUSERROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__DIMUSERROLES__0__USERROLENAMES__0"
          value: "Identity Wallet Management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
          value: "BPDM Pool Consumer"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
          value: "BPDM Sharing Output Consumer"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
          value: "BPDM Sharing Input Manager"
        - name: "REGISTRATION__DOCUMENTTYPEIDS__0"
          value: "COMMERCIAL_REGISTER_EXTRACT"
        - name: "REGISTRATION__HELPADDRESS"
          value: "https://portal.tx.arena2036-x.de/documentation"
        - name: "REGISTRATION__USEDIMWALLET"
          value: "true"
        - name: "REGISTRATION__CLEARINGHOUSECONNECTDISABLED"
          value: "true"
        - name: "SERVICEACCOUNT__CLIENTID"
          value: "technical_roles_management"
        - name: "SERVICEACCOUNT__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "SERVICEACCOUNT__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "SERVICEACCOUNT__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "serviceaccount-encryption-key0"
        - name: "SERVICEACCOUNT__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "SERVICEACCOUNT__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "SERVICEACCOUNT__AUTHSERVICEURL"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "SERVICEACCOUNT__DIMUSERROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "SERVICEACCOUNT__DIMUSERROLES__0__USERROLENAMES__0"
          value: "Identity Wallet Management"
        - name: "SERVICEACCOUNT__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
          value: "technical_roles_management"
        - name: "SERVICEACCOUNT__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
          value: "BPDM Pool Consumer"
        - name: "SERVICEACCOUNT__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
          value: "BPDM Sharing Output Consumer"
        - name: "SERVICEACCOUNT__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
          value: "BPDM Sharing Input Manager"
        - name: "SWAGGERENABLED"
          value: "true"
        - name: "USERMANAGEMENT__COMPANYUSERSTATUSIDS__0"
          value: "ACTIVE"
        - name: "USERMANAGEMENT__COMPANYUSERSTATUSIDS__1"
          value: "INACTIVE"
        - name: "USERMANAGEMENT__USERADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "USERMANAGEMENT__USERADMINROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "USERMANAGEMENT__USERADMINROLES__0__USERROLENAMES__1"
          value: "IT Admin"
        - name: "USERMANAGEMENT__PORTAL__BASEPORTALADDRESS"
          value: "https://portal.tx.arena2036-x.de/home"
        - name: "USERMANAGEMENT__PORTAL__PASSWORDRESENDADDRESS"
          value: "https://portal.tx.arena2036-x.de/home/passwordResend"
        - name: "USERMANAGEMENT__PORTAL__KEYCLOAKCLIENTID"
          value: "Cl2-CX-Portal"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "mailing-encryption-key0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "BPNACCESS__BASEADDRESS"
          value: "https://business-partners.tx.arena2036-x.de/pool/v6"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: /health/startup
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 225m
            memory: 600M
          requests:
            cpu: 75m
            memory: 600M
        volumeMounts:
        - mountPath: /mnt/tmp
          name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/portal/templates/deployment-backend-appmarketplace.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-marketplace-app-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-marketplace-app-service
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-marketplace-app-service
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-marketplace-app-service
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-marketplace-app-service:v2.4.0"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: DOTNET_ENVIRONMENT
          value: "Development"
        - name: TMPDIR
          value: "/mnt/tmp"
        - name: "PORTAL_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "portal-password"
        - name: "PROVISIONING_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "provisioning-password"
        - name: "CONNECTIONSTRINGS__PORTALDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
        - name: "CONNECTIONSTRINGS__PROVISIONINGDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=provisioning;Password=$(PROVISIONING_PASSWORD);Ssl Mode=Disable;"
        - name: "APPMARKETPLACE__ACTIVEAPPCOMPANYADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__ACTIVEAPPCOMPANYADMINROLES__0__USERROLENAMES__0"
          value: "IT Admin"
        - name: "APPMARKETPLACE__ACTIVEAPPCOMPANYADMINROLES__0__USERROLENAMES__1"
          value: "Company Admin"
        - name: "APPMARKETPLACE__ACTIVEAPPNOTIFICATIONTYPEIDS__0"
          value: "APP_ROLE_ADDED"
        - name: "APPMARKETPLACE__APPIMAGEDOCUMENTTYPEIDS__0"
          value: "APP_LEADIMAGE"
        - name: "APPMARKETPLACE__APPIMAGEDOCUMENTTYPEIDS__1"
          value: "APP_IMAGE"
        - name: "APPMARKETPLACE__APPIMAGEDOCUMENTTYPEIDS__2"
          value: "APP_CONTRACT"
        - name: "APPMARKETPLACE__APPIMAGEDOCUMENTTYPEIDS__3"
          value: "ADDITIONAL_DETAILS"
        - name: "APPMARKETPLACE__APPIMAGEDOCUMENTTYPEIDS__4"
          value: "APP_TECHNICAL_INFORMATION"
        - name: "APPMARKETPLACE__APPIMAGEDOCUMENTTYPEIDS__5"
          value: "CONFORMITY_APPROVAL_BUSINESS_APPS"
        - name: "APPMARKETPLACE__APPOVERVIEWADDRESS"
          value: "https://portal.tx.arena2036-x.de/appoverview"
        - name: "APPMARKETPLACE__APPROVEAPPNOTIFICATIONTYPEIDS__0"
          value: "APP_RELEASE_APPROVAL"
        - name: "APPMARKETPLACE__APPROVEAPPUSERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__APPROVEAPPUSERROLES__0__USERROLENAMES__0"
          value: "Sales Manager"
        - name: "APPMARKETPLACE__APPROVEAPPUSERROLES__0__USERROLENAMES__1"
          value: "App Manager"
        - name: "APPMARKETPLACE__BASEPORTALADDRESS"
          value: "https://portal.tx.arena2036-x.de/appsubscription"
        - name: "APPMARKETPLACE__OFFERSUBSCRIPTIONADDRESS"
          value: "https://portal.tx.arena2036-x.de/appsubscription"
        - name: "APPMARKETPLACE__OFFERDETAILADDRESS"
          value: "https://portal.tx.arena2036-x.de/appdetail"
        - name: "APPMARKETPLACE__USERMANAGEMENTADDRESS"
          value: "https://portal.tx.arena2036-x.de/usermanagement"
        - name: "APPMARKETPLACE__CATENAADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__CATENAADMINROLES__0__USERROLENAMES__0"
          value: "CX Admin"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__0__DOCUMENTTYPEID"
          value: "APP_TECHNICAL_INFORMATION"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__0__MEDIATYPES__0"
          value: "PDF"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__1__DOCUMENTTYPEID"
          value: "APP_LEADIMAGE"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__1__MEDIATYPES__0"
          value: "JPEG"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__1__MEDIATYPES__1"
          value: "PNG"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__1__MEDIATYPES__2"
          value: "SVG"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__2__DOCUMENTTYPEID"
          value: "APP_IMAGE"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__2__MEDIATYPES__0"
          value: "JPEG"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__2__MEDIATYPES__1"
          value: "PNG"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__2__MEDIATYPES__2"
          value: "SVG"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__3__DOCUMENTTYPEID"
          value: "APP_CONTRACT"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__3__MEDIATYPES__0"
          value: "PDF"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__4__DOCUMENTTYPEID"
          value: "ADDITIONAL_DETAILS"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__4__MEDIATYPES__0"
          value: "PDF"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__5__DOCUMENTTYPEID"
          value: "CONFORMITY_APPROVAL_BUSINESS_APPS"
        - name: "APPMARKETPLACE__UPLOADAPPDOCUMENTTYPEIDS__5__MEDIATYPES__0"
          value: "PDF"
        - name: "APPMARKETPLACE__DELETEDOCUMENTTYPEIDS__0"
          value: "APP_CONTRACT"
        - name: "APPMARKETPLACE__DELETEDOCUMENTTYPEIDS__1"
          value: "ADDITIONAL_DETAILS"
        - name: "APPMARKETPLACE__DELETEDOCUMENTTYPEIDS__2"
          value: "APP_TECHNICAL_INFORMATION"
        - name: "APPMARKETPLACE__DELETEDOCUMENTTYPEIDS__3"
          value: "APP_LEADIMAGE"
        - name: "APPMARKETPLACE__DELETEDOCUMENTTYPEIDS__4"
          value: "APP_IMAGE"
        - name: "APPMARKETPLACE__DELETEDOCUMENTTYPEIDS__5"
          value: "CONFORMITY_APPROVAL_BUSINESS_APPS"
        - name: "APPMARKETPLACE__SUBMITAPPDOCUMENTTYPEIDS__0"
          value: "APP_LEADIMAGE"
        - name: "APPMARKETPLACE__SUBMITAPPDOCUMENTTYPEIDS__1"
          value: "APP_IMAGE"
        - name: "APPMARKETPLACE__SUBMITAPPDOCUMENTTYPEIDS__2"
          value: "CONFORMITY_APPROVAL_BUSINESS_APPS"
        - name: "APPMARKETPLACE__ACTIVEAPPDOCUMENTTYPEIDS__0"
          value: "APP_IMAGE"
        - name: "APPMARKETPLACE__ACTIVEAPPDOCUMENTTYPEIDS__1"
          value: "APP_TECHNICAL_INFORMATION"
        - name: "APPMARKETPLACE__ACTIVEAPPDOCUMENTTYPEIDS__2"
          value: "APP_CONTRACT"
        - name: "APPMARKETPLACE__ACTIVEAPPDOCUMENTTYPEIDS__3"
          value: "ADDITIONAL_DETAILS"
        - name: "APPMARKETPLACE__DELETEACTIVEAPPDOCUMENTTYPEIDS__0"
          value: "APP_IMAGE"
        - name: "APPMARKETPLACE__DELETEACTIVEAPPDOCUMENTTYPEIDS__1"
          value: "APP_TECHNICAL_INFORMATION"
        - name: "APPMARKETPLACE__DELETEACTIVEAPPDOCUMENTTYPEIDS__2"
          value: "APP_CONTRACT"
        - name: "APPMARKETPLACE__DELETEACTIVEAPPDOCUMENTTYPEIDS__3"
          value: "ADDITIONAL_DETAILS"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__0__DOCUMENTTYPEID"
          value: "APP_IMAGE"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__0__MEDIATYPES__0"
          value: "JPEG"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__0__MEDIATYPES__1"
          value: "PNG"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__1__DOCUMENTTYPEID"
          value: "APP_TECHNICAL_INFORMATION"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__1__MEDIATYPES__0"
          value: "PDF"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__2__DOCUMENTTYPEID"
          value: "APP_CONTRACT"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__2__MEDIATYPES__0"
          value: "PDF"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__3__DOCUMENTTYPEID"
          value: "ADDITIONAL_DETAILS"
        - name: "APPMARKETPLACE__UPLOADACTIVEAPPDOCUMENTTYPEIDS__3__MEDIATYPES__0"
          value: "PDF"
        - name: "APPMARKETPLACE__ITADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__ITADMINROLES__0__USERROLENAMES__0"
          value: "IT Admin"
        - name: "APPMARKETPLACE__ACTIVATIONUSERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__ACTIVATIONUSERROLES__0__USERROLENAMES__0"
          value: "Sales Manager"
        - name: "APPMARKETPLACE__ACTIVATIONUSERROLES__0__USERROLENAMES__1"
          value: "App Manager"
        - name: "APPMARKETPLACE__NOTIFICATIONTYPEIDS__0"
          value: "APP_RELEASE_REQUEST"
        - name: "APPMARKETPLACE__OFFERSTATUSIDS__0"
          value: "IN_REVIEW"
        - name: "APPMARKETPLACE__OFFERSTATUSIDS__1"
          value: "ACTIVE"
        - name: "APPMARKETPLACE__SALESMANAGERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__SALESMANAGERROLES__0__USERROLENAMES__0"
          value: "Sales Manager"
        - name: "APPMARKETPLACE__SERVICEACCOUNTROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "APPMARKETPLACE__SERVICEACCOUNTROLES__0__USERROLENAMES__0"
          value: "App Tech User"
        - name: "APPMARKETPLACE__SERVICEMANAGERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__SERVICEMANAGERROLES__0__USERROLENAMES__0"
          value: "App Manager"
        - name: "APPMARKETPLACE__SUBSCRIPTIONMANAGERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__SUBSCRIPTIONMANAGERROLES__0__USERROLENAMES__0"
          value: "App Manager"
        - name: "APPMARKETPLACE__SUBSCRIPTIONMANAGERROLES__0__USERROLENAMES__1"
          value: "Sales Manager"
        - name: "APPMARKETPLACE__SUBMITAPPNOTIFICATIONTYPEIDS__0"
          value: "APP_RELEASE_REQUEST"
        - name: "APPMARKETPLACE__TECHNICALUSERPROFILECLIENT"
          value: "technical_roles_management"
        - name: "APPMARKETPLACE__COMPANYADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "APPMARKETPLACE__COMPANYADMINROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "APPMARKETPLACE__DECENTRALIDENTITYMANAGEMENTAUTHURL"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/api/sts"
        - name: "APPMARKETPLACE__ISSUERDID"
          value: "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CRHK"
        - name: "APPMARKETPLACE__DIMUSERROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "APPMARKETPLACE__DIMUSERROLES__0__USERROLENAMES__0"
          value: "Identity Wallet Management"
        - name: "APPMARKETPLACE__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
          value: "technical_roles_management"
        - name: "APPMARKETPLACE__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
          value: "BPDM Pool Consumer"
        - name: "APPMARKETPLACE__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
          value: "BPDM Sharing Output Consumer"
        - name: "APPMARKETPLACE__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
          value: "BPDM Sharing Input Manager"
        - name: "APPMARKETPLACE__BPNDIDRESOLVERURL"
          value: "https://bpn-did-resolution-service.example.org/api/directory"
        - name: "HEALTHCHECKS__0__PATH"
          value: "/health/startup"
        - name: HEALTHCHECKS__0__TAGS__1
          value: portaldb
        - name: "HEALTHCHECKS__1__PATH"
          value: "/ready"
        - name: "HEALTHCHECKS__2__PATH"
          value: "/healthz"
        - name: "JWTBEAREROPTIONS__METADATAADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/.well-known/openid-configuration"
        - name: "JWTBEAREROPTIONS__REQUIREHTTPSMETADATA"
          value: "false"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDAUDIENCE"
          value: "Cl2-CX-Portal"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDISSUER"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__CLOCKSKEW"
          value: "00:05:00"
        - name: "JWTBEAREROPTIONS__REFRESHINTERVAL"
          value: "00:00:30"
        - name: "KEYCLOAK__CENTRAL__AUTHREALM"
          value: "CX-Central"
        - name: "KEYCLOAK__CENTRAL__CLIENTID"
          value: "sa-cl1-reg-2"
        - name: "KEYCLOAK__CENTRAL__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "central-client-secret"
        - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
          value: "https://centralidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
          value: "true"
        - name: "KEYCLOAK__SHARED__AUTHREALM"
          value: "master"
        - name: "KEYCLOAK__SHARED__CLIENTID"
          value: "sa-cl1-reg-1"
        - name: "KEYCLOAK__SHARED__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "shared-client-secret"
        - name: "KEYCLOAK__SHARED__CONNECTIONSTRING"
          value: "https://sharedidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__SHARED__USEAUTHTRAIL"
          value: "true"
        - name: "MVC_ROUTING_BASEPATH"
          value: "api/apps"
        - name: "SERILOG__MINIMUMLEVEL__Default"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Offers.Library.Service"
          value: "Debug"
        - name: "PROVISIONING__CENTRALREALM"
          value: "CX-Central"
        - name: "PROVISIONING__CENTRALREALMID"
          value: "CX-Central"
        - name: "PROVISIONING__DIMUSERROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__DIMUSERROLES__0__USERROLENAMES__0"
          value: "Identity Wallet Management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
          value: "BPDM Pool Consumer"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
          value: "BPDM Sharing Output Consumer"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
          value: "BPDM Sharing Input Manager"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "mailing-encryption-key0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "SWAGGERENABLED"
          value: "true"
        - name: "DIM__USERNAME"
          value: "empty"
        - name: "DIM__PASSWORD"
          value: "empty"
        - name: "DIM__CLIENTID"
          value: "sa-cl2-05"
        - name: "DIM__GRANTTYPE"
          value: "client_credentials"
        - name: "DIM__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "dim-client-secret"
        - name: "DIM__SCOPE"
          value: "openid"
        - name: "DIM__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "DIM__BASEADDRESS"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/api/dim"
        - name: "DIM__UNIVERSALRESOLVERADDRESS"
          value: "https://dev.uniresolver.io/"
        - name: "DIM__DIDDOCUMENTBASELOCATION"
          value: "https://portal-backend.tx.arena2036-x.de/api/administration/staticdata/did"
        - name: "DIM__MAXVALIDATIONTIMEINDAYS"
          value: "7"
        - name: "DIM__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "DIM__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "DIM__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "dim-encryption-key0"
        - name: "DIM__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "DIM__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: /health/startup
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 225m
            memory: 500M
          requests:
            cpu: 75m
            memory: 500M
        volumeMounts:
        - mountPath: /mnt/tmp
          name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/portal/templates/deployment-backend-notification.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-notification-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-notification-service
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-notification-service
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-notification-service
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-notification-service:v2.4.0"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: DOTNET_ENVIRONMENT
          value: "Development"
        - name: "PORTAL_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "portal-password"
        - name: "CONNECTIONSTRINGS__PORTALDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
        - name: "DATABASEACCESS__PORTAL__DATABASESCHEMA"
          value: "portal"
        - name: "HEALTHCHECKS__0__PATH"
          value: "/health/startup"
        - name: HEALTHCHECKS__0__TAGS__1
          value: portaldb
        - name: "HEALTHCHECKS__1__PATH"
          value: "/ready"
        - name: "HEALTHCHECKS__2__PATH"
          value: "/healthz"
        - name: "JWTBEAREROPTIONS__METADATAADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/.well-known/openid-configuration"
        - name: "JWTBEAREROPTIONS__REQUIREHTTPSMETADATA"
          value: "false"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDAUDIENCE"
          value: "Cl2-CX-Portal"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDISSUER"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__CLOCKSKEW"
          value: "00:05:00"
        - name: "JWTBEAREROPTIONS__REFRESHINTERVAL"
          value: "00:00:30"
        - name: "KEYCLOAK__CENTRAL__AUTHREALM"
          value: "CX-Central"
        - name: "KEYCLOAK__CENTRAL__CLIENTID"
          value: "sa-cl1-reg-2"
        - name: "KEYCLOAK__CENTRAL__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "central-client-secret"
        - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
          value: "https://centralidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
          value: "true"
        - name: "KEYCLOAK__SHARED__AUTHREALM"
          value: "master"
        - name: "KEYCLOAK__SHARED__CLIENTID"
          value: "sa-cl1-reg-1"
        - name: "KEYCLOAK__SHARED__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "shared-client-secret"
        - name: "KEYCLOAK__SHARED__CONNECTIONSTRING"
          value: "https://sharedidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__SHARED__USEAUTHTRAIL"
          value: "true"
        - name: "MVC_ROUTING_BASEPATH"
          value: "api/notification"
        - name: "SERILOG__MINIMUMLEVEL__Default"
          value: "Debug"
        - name: "SWAGGERENABLED"
          value: "true"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: /health/startup
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 225m
            memory: 200M
          requests:
            cpu: 75m
            memory: 200M
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/portal/templates/deployment-backend-registration.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-registration-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-registration-service
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-registration-service
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-registration-service
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-registration-service:v2.4.0"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: DOTNET_ENVIRONMENT
          value: "Development"
        - name: TMPDIR
          value: "/mnt/tmp"
        - name: "PORTAL_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "portal-password"
        - name: "PROVISIONING_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "provisioning-password"
        - name: "CONNECTIONSTRINGS__PORTALDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
        - name: "CONNECTIONSTRINGS__PROVISIONINGDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=provisioning;Password=$(PROVISIONING_PASSWORD);Ssl Mode=Disable;"
        - name: "DATABASEACCESS__PORTAL__DATABASESCHEMA"
          value: "portal"
        - name: "BPNACCESS__BASEADDRESS"
          value: "https://business-partners.tx.arena2036-x.de/pool/v6"
        - name: "HEALTHCHECKS__0__PATH"
          value: "/health/startup"
        - name: HEALTHCHECKS__0__TAGS__1
          value: portaldb
        - name: "HEALTHCHECKS__1__PATH"
          value: "/ready"
        - name: "HEALTHCHECKS__2__PATH"
          value: "/healthz"
        - name: "JWTBEAREROPTIONS__METADATAADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/.well-known/openid-configuration"
        - name: "JWTBEAREROPTIONS__REQUIREHTTPSMETADATA"
          value: "false"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDAUDIENCE"
          value: "Cl1-CX-Registration"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDISSUER"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__CLOCKSKEW"
          value: "00:05:00"
        - name: "JWTBEAREROPTIONS__REFRESHINTERVAL"
          value: "00:00:30"
        - name: "KEYCLOAK__CENTRAL__AUTHREALM"
          value: "CX-Central"
        - name: "KEYCLOAK__CENTRAL__CLIENTID"
          value: "sa-cl1-reg-2"
        - name: "KEYCLOAK__CENTRAL__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "central-client-secret"
        - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
          value: "https://centralidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
          value: "true"
        - name: "KEYCLOAK__SHARED__AUTHREALM"
          value: "master"
        - name: "KEYCLOAK__SHARED__CLIENTID"
          value: "sa-cl1-reg-1"
        - name: "KEYCLOAK__SHARED__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "shared-client-secret"
        - name: "KEYCLOAK__SHARED__CONNECTIONSTRING"
          value: "https://sharedidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__SHARED__USEAUTHTRAIL"
          value: "true"
        - name: "SERILOG__MINIMUMLEVEL__Default"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Bpdm.Library"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Registration.Service.BusinessLogic"
          value: "Debug"
        - name: "MVC_ROUTING_BASEPATH"
          value: "api/registration"
        - name: "PROVISIONING__CENTRALREALM"
          value: "CX-Central"
        - name: "PROVISIONING__DIMUSERROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__DIMUSERROLES__0__USERROLENAMES__0"
          value: "Identity Wallet Management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
          value: "BPDM Pool Consumer"  
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
          value: "BPDM Sharing Output Consumer"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
          value: "BPDM Sharing Input Manager"
        - name: "PROVISIONING__INVITEDUSERINITIALROLES__0__CLIENTID"
          value: "Cl1-CX-Registration"
        - name: "APPMARKETPLACE__SERVICEMANAGERROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "PROVISIONING__SERVICEACCOUNTCLIENTPREFIX"
          value: "sa"
        - name: "REGISTRATION__APPLICATIONSTATUSIDS__0"
          value: "SUBMITTED"
        - name: "REGISTRATION__APPLICATIONSTATUSIDS__1"
          value: "DECLINED"
        - name: "REGISTRATION__APPLICATIONSTATUSIDS__2"
          value: "CONFIRMED"
        - name: "REGISTRATION__APPLICATIONDECLINESTATUSIDS__0"
          value: "CREATED"
        - name: "REGISTRATION__APPLICATIONDECLINESTATUSIDS__1"
          value: "ADD_COMPANY_DATA"
        - name: "REGISTRATION__APPLICATIONDECLINESTATUSIDS__2"
          value: "INVITE_USER"
        - name: "REGISTRATION__APPLICATIONDECLINESTATUSIDS__3"
          value: "SELECT_COMPANY_ROLE"
        - name: "REGISTRATION__APPLICATIONDECLINESTATUSIDS__4"
          value: "UPLOAD_DOCUMENTS"
        - name: "REGISTRATION__APPLICATIONDECLINESTATUSIDS__5"
          value: "VERIFY"
        - name: "REGISTRATION__BASEPORTALADDRESS"
          value: "https://portal.tx.arena2036-x.de/registration/"
        - name: "REGISTRATION__PASSWORDRESENDADDRESS"
          value: "https://portal.tx.arena2036-x.de/home/passwordResend"
        - name: "REGISTRATION__DOCUMENTTYPEIDS__0"
          value: "CX_FRAME_CONTRACT"
        - name: "REGISTRATION__DOCUMENTTYPEIDS__1"
          value: "COMMERCIAL_REGISTER_EXTRACT"
        - name: "REGISTRATION__KEYCLOAKCLIENTID"
          value: "Cl1-CX-Registration"
        - name: "SWAGGERENABLED"
          value: "true"
        - name: "REGISTRATION__REGISTRATIONDOCUMENTTYPEIDS__0"
          value: "CX_FRAME_CONTRACT"
        - name: "REGISTRATION__SUBMITDOCUMENTTYPEIDS__0"
          value: "COMMERCIAL_REGISTER_EXTRACT"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "mailing-encryption-key0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "APPLICATIONCREATION__USEDIMWALLET"
          value: "true"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: /health/startup
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 225m
            memory: 400M
          requests:
            cpu: 75m
            memory: 400M
        volumeMounts:
        - mountPath: /mnt/tmp
          name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/portal/templates/deployment-backend-services.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-services-service
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-services-service
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-services-service
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-services-service
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-services-service:v2.4.0"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: DOTNET_ENVIRONMENT
          value: "Development"
        - name: TMPDIR
          value: "/mnt/tmp"
        - name: "PORTAL_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "portal-password"
        - name: "PROVISIONING_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "portal-postgres"
              key: "provisioning-password"
        - name: "CONNECTIONSTRINGS__PORTALDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
        - name: "CONNECTIONSTRINGS__PROVISIONINGDB"
          value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=provisioning;Password=$(PROVISIONING_PASSWORD);Ssl Mode=Disable;"
        - name: "HEALTHCHECKS__0__PATH"
          value: "/health/startup"
        - name: HEALTHCHECKS__0__TAGS__1
          value: portaldb
        - name: "HEALTHCHECKS__1__PATH"
          value: "/ready"
        - name: "HEALTHCHECKS__2__PATH"
          value: "/healthz"
        - name: "JWTBEAREROPTIONS__METADATAADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/.well-known/openid-configuration"
        - name: "JWTBEAREROPTIONS__REQUIREHTTPSMETADATA"
          value: "false"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDAUDIENCE"
          value: "Cl2-CX-Portal"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDISSUER"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__CLOCKSKEW"
          value: "00:05:00"
        - name: "JWTBEAREROPTIONS__REFRESHINTERVAL"
          value: "00:00:30"
        - name: "KEYCLOAK__CENTRAL__AUTHREALM"
          value: "CX-Central"
        - name: "KEYCLOAK__CENTRAL__CLIENTID"
          value: "sa-cl1-reg-2"
        - name: "KEYCLOAK__CENTRAL__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "central-client-secret"
        - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
          value: "https://centralidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
          value: "true"
        - name: "KEYCLOAK__SHARED__AUTHREALM"
          value: "master"
        - name: "KEYCLOAK__SHARED__CLIENTID"
          value: "sa-cl1-reg-1"
        - name: "KEYCLOAK__SHARED__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-keycloak"
              key: "shared-client-secret"
        - name: "KEYCLOAK__SHARED__CONNECTIONSTRING"
          value: "https://sharedidp.tx.arena2036-x.de"
        - name: "KEYCLOAK__SHARED__USEAUTHTRAIL"
          value: "true"
        - name: "SERILOG__MINIMUMLEVEL__Default"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Offers.Library.Service"
          value: "Debug"
        - name: "MVC_ROUTING_BASEPATH"
          value: "api/services"
        - name: "PROVISIONING__CENTRALREALM"
          value: "CX-Central"
        - name: "PROVISIONING__CENTRALREALMID"
          value: "CX-Central"
        - name: "PROVISIONING__DIMUSERROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__DIMUSERROLES__0__USERROLENAMES__0"
          value: "Identity Wallet Management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
          value: "technical_roles_management"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
          value: "BPDM Pool Consumer"  
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
          value: "BPDM Sharing Output Consumer"
        - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
          value: "BPDM Sharing Input Manager"   
        - name: "SERVICES__APPROVESERVICENOTIFICATIONTYPEIDS__0"
          value: "SERVICE_RELEASE_APPROVAL"
        - name: "SERVICES__APPROVESERVICEUSERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__APPROVESERVICEUSERROLES__0__USERROLENAMES__0"
          value: "Sales Manager"
        - name: "SERVICES__APPROVESERVICEUSERROLES__0__USERROLENAMES__1"
          value: "Service Manager"
        - name: "SERVICES__BASEPORTALADDRESS"
          value: "https://portal.tx.arena2036-x.de/servicesubscription"
        - name: "SERVICES__OFFERSUBSCRIPTIONADDRESS"
          value: "https://portal.tx.arena2036-x.de/servicesubscription"
        - name: "SERVICES__OFFERDETAILADDRESS"
          value: "https://portal.tx.arena2036-x.de/servicedetail"
        - name: "SERVICES__USERMANAGEMENTADDRESS"
          value: "https://portal.tx.arena2036-x.de/usermanagement"
        - name: "SERVICES__CATENAADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__CATENAADMINROLES__0__USERROLENAMES__0"
          value: "CX Admin"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__0__DOCUMENTTYPEID"
          value: "ADDITIONAL_DETAILS"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__0__MEDIATYPES__0"
          value: "PDF"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__1__DOCUMENTTYPEID"
          value: "SERVICE_LEADIMAGE"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__1__MEDIATYPES__0"
          value: "JPEG"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__1__MEDIATYPES__1"
          value: "PNG"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__1__MEDIATYPES__2"
          value: "SVG"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__2__DOCUMENTTYPEID"
          value: "CONFORMITY_APPROVAL_SERVICES"
        - name: "SERVICES__UPLOADSERVICEDOCUMENTTYPEIDS__2__MEDIATYPES__0"
          value: "PDF"
        - name: "SERVICES__ITADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__ITADMINROLES__0__USERROLENAMES__0"
          value: "IT Admin"
        - name: "SERVICES__ACTIVATIONUSERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__ACTIVATIONUSERROLES__0__USERROLENAMES__0"
          value: "Sales Manager"
        - name: "SERVICES__ACTIVATIONUSERROLES__0__USERROLENAMES__1"
          value: "Service Manager"
        - name: "SERVICES__SALESMANAGERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__SALESMANAGERROLES__0__USERROLENAMES__0"
          value: "Sales Manager"
        - name: "SERVICES__SERVICEACCOUNTROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "SERVICES__SERVICEACCOUNTROLES__0__USERROLENAMES__0"
          value: "App Tech User"
        - name: "SERVICES__SERVICEMANAGERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__SERVICEMANAGERROLES__0__USERROLENAMES__0"
          value: "Service Manager"
        - name: "SERVICES__SUBSCRIPTIONMANAGERROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__SUBSCRIPTIONMANAGERROLES__0__USERROLENAMES__0"
          value: "Service Manager"
        - name: "SERVICES__SUBSCRIPTIONMANAGERROLES__0__USERROLENAMES__1"
          value: "Sales Manager"
        - name: "SERVICES__SERVICEOVERVIEWADDRESS"
          value: "https://portal.tx.arena2036-x.de/serviceoverview"
        - name: "SERVICES__SUBMITSERVICENOTIFICATIONTYPEIDS__0"
          value: "SERVICE_RELEASE_REQUEST"
        - name: "SWAGGERENABLED"
          value: "true"
        - name: "SERVICES__SERVICEIMAGEDOCUMENTTYPEIDS__0"
          value: "ADDITIONAL_DETAILS"
        - name: "SERVICES__SERVICEIMAGEDOCUMENTTYPEIDS__1"
          value: "CONFORMITY_APPROVAL_SERVICES"
        - name: "SERVICES__SERVICEIMAGEDOCUMENTTYPEIDS__2"
          value: "SERVICE_LEADIMAGE"
        - name: "SERVICES__OFFERSTATUSIDS__0"
          value: "IN_REVIEW"
        - name: "SERVICES__OFFERSTATUSIDS__1"
          value: "ACTIVE"
        - name: "SERVICES__DELETEDOCUMENTTYPEIDS__0"
          value: "SERVICE_LEADIMAGE"
        - name: "SERVICES__DELETEDOCUMENTTYPEIDS__1"
          value: "ADDITIONAL_DETAILS"
        - name: "SERVICES__DELETEDOCUMENTTYPEIDS__2"
          value: "CONFORMITY_APPROVAL_SERVICES"
        - name: "SERVICES__TECHNICALUSERPROFILECLIENT"
          value: "technical_roles_management"
        - name: "SERVICES__COMPANYADMINROLES__0__CLIENTID"
          value: "Cl2-CX-Portal"
        - name: "SERVICES__COMPANYADMINROLES__0__USERROLENAMES__0"
          value: "Company Admin"
        - name: "SERVICES__DECENTRALIDENTITYMANAGEMENTAUTHURL"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/api/sts"
        - name: "SERVICES__ISSUERDID"
          value: "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CRHK"
        - name: "SERVICES__BPNDIDRESOLVERURL"
          value: "https://bpn-did-resolution-service.example.org/api/directory"
        - name: "SERVICES__DIMUSERROLES__0__CLIENTID"
          value: "technical_roles_management"
        - name: "SERVICES__DIMUSERROLES__0__USERROLENAMES__0"
          value: "Identity Wallet Management"
        - name: "SERVICES__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
          value: "technical_roles_management"
        - name: "SERVICES__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
          value: "BPDM Pool Consumer"
        - name: "SERVICES__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
          value: "BPDM Sharing Output Consumer"
        - name: "SERVICES__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
          value: "BPDM Sharing Input Manager"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "mailing-encryption-key0"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "DIM__USERNAME"
          value: "empty"
        - name: "DIM__PASSWORD"
          value: "empty"
        - name: "DIM__CLIENTID"
          value: "sa-cl2-05"
        - name: "DIM__GRANTTYPE"
          value: "client_credentials"
        - name: "DIM__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "dim-client-secret"
        - name: "DIM__SCOPE"
          value: "openid"
        - name: "DIM__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "DIM__BASEADDRESS"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/api/dim"
        - name: "DIM__UNIVERSALRESOLVERADDRESS"
          value: "https://dev.uniresolver.io/"
        - name: "DIM__DIDDOCUMENTBASELOCATION"
          value: "https://portal-backend.tx.arena2036-x.de/api/administration/staticdata/did"
        - name: "DIM__MAXVALIDATIONTIMEINDAYS"
          value: "7"
        - name: "DIM__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "DIM__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "DIM__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "portal-backend-interfaces"
              key: "dim-encryption-key0"
        - name: "DIM__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "DIM__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: /health/startup
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 225m
            memory: 500M
          requests:
            cpu: 75m
            memory: 500M
        volumeMounts:
        - mountPath: /mnt/tmp
          name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/portal/templates/deployment-frontend-assets.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-assets
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-assets
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-assets
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-assets
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: docker.io/tractusx/portal-assets:v2.4.0
        imagePullPolicy: "IfNotPresent"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        # @url: https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes
        readinessProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 45m
            memory: 100M
          requests:
            cpu: 25m
            memory: 100M
        volumeMounts:
        - mountPath: /tmp
          name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/portal/templates/deployment-frontend-portal.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-portal
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-portal
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-portal
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-portal
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: docker.io/tractusx/portal-frontend:v2.4.0
        imagePullPolicy: "IfNotPresent"
        env:
          - name: REQUIRE_HTTPS_URL_PATTERN
            value: "true"
          - name: CLEARINGHOUSE_CONNECT_DISABLED
            value: "true"
          - name: PORTAL_ASSETS_URL
            value: "https://portal.tx.arena2036-x.de/assets"
          - name: PORTAL_BACKEND_URL
            value: "https://portal-backend.tx.arena2036-x.de"
          - name: CENTRALIDP_URL
            value: "https://centralidp.tx.arena2036-x.de/auth"
          - name: SSI_CREDENTIAL_URL
            value: "https://ssi-credential-issuer.tx.arena2036-x.de"
          - name: BPDM_POOL_API_URL
            value: "https://business-partners.tx.arena2036-x.de/pool/v6"
          - name: BPDM_GATE_API_URL
            value: "https://business-partners.tx.arena2036-x.de/gate/v6"
          - name: SEMANTICS_URL
            value: "https://semantics.tx.arena2036-x.de"
          - name: MANAGED_IDENTITY_WALLETS_NEW_URL
            value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de"
          - name: BPNDIDRESOLVER_DIRECTORY_URL
            value: "https://bpn-did-resolution-service.example.org/api/directory"
          - name: REALM
            value: "CX-Central"
          - name: CLIENT_ID
            value: "Cl2-CX-Portal"
          - name: CLIENT_ID_REGISTRATION
            value: "Cl1-CX-Registration"
          - name: CLIENT_ID_SEMANTIC
            value: "Cl3-CX-Semantic"
          - name: CLIENT_ID_MIW
            value: "Cl5-CX-Custodian"
          - name: CLIENT_ID_BPDM
            value: "Cl7-CX-BPDM"
          - name: CLIENT_ID_SSI_CREDENTIAL
            value: "Cl24-CX-SSI-CredentialIssuer"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        # @url: https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes
        readinessProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 75m
            memory: 125M
          requests:
            cpu: 25m
            memory: 125M
        volumeMounts:
        - mountPath: /tmp
          name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/portal/templates/deployment-frontend-registration.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-portal-registration
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app: tx-federated-portal-registration
      app.kubernetes.io/name: portal
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app: tx-federated-portal-registration
        app.kubernetes.io/name: portal
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-portal-registration
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: docker.io/tractusx/portal-frontend-registration:v2.2.0
        imagePullPolicy: "IfNotPresent"
        env:
          - name: PORTAL_ASSETS_URL
            value: "https://portal.tx.arena2036-x.de/assets"
          - name: PORTAL_BACKEND_URL
            value: "https://portal-backend.tx.arena2036-x.de"
          - name: CENTRALIDP_URL
            value: "https://centralidp.tx.arena2036-x.de/auth"
          - name: REALM
            value: "CX-Central"
          - name: CLIENT_ID_REGISTRATION
            value: "Cl1-CX-Registration"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        # @url: https://cloud.google.com/blog/products/containers-kubernetes/kubernetes-best-practices-setting-up-health-checks-with-readiness-and-liveness-probes
        readinessProbe:
          httpGet:
            path: "/"
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 75m
            memory: 100M
          requests:
            cpu: 25m
            memory: 100M
        volumeMounts:
        - mountPath: /tmp
          name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/selfdescription/templates/deployment.yaml
#################################################################################
# Copyright (c) 2022,2024 T-Systems International GmbH
# Copyright (c) 2022,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-selfdescription
  labels:
    helm.sh/chart: selfdescription-2.1.23
    app.kubernetes.io/name: selfdescription
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.1.15"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: selfdescription
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app.kubernetes.io/name: selfdescription
        app.kubernetes.io/instance: tx-federated
    spec:
      securityContext:
        fsGroup: 2000
      containers:
        - name: selfdescription
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsGroup: 1000
            runAsNonRoot: true
            runAsUser: 1000
          image: "tractusx/sdfactory:2.1.15"
          imagePullPolicy: IfNotPresent
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
              
          env:
          - name: SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_JWK-SET-URI
            valueFrom: 
              secretKeyRef:
                name: tx-federated-selfdescription-application
                key: jwk-set-uri
          - name: APP_USERSDETAILS_CLEARINGHOUSE_URI
            valueFrom: 
              secretKeyRef:
                name: tx-federated-selfdescription-application
                key: clearingHouse-uri        
          - name: APP_USERSDETAILS_CLEARINGHOUSE_SERVERURL
            valueFrom: 
              secretKeyRef:
                name: tx-federated-selfdescription-application
                key: clearingHouse-serverUrl                
          - name: APP_USERSDETAILS_CLEARINGHOUSE_REALM
            valueFrom: 
              secretKeyRef:
                name: tx-federated-selfdescription-application
                key: clearingHouse-realm
          - name: APP_USERSDETAILS_CLEARINGHOUSE_CLIENTID
            valueFrom: 
              secretKeyRef:
                name: tx-federated-selfdescription-application
                key: clearingHouse-clientId               
          - name: APP_USERSDETAILS_CLEARINGHOUSE_CLIENTSECRET
            valueFrom: 
              secretKeyRef:
                name: tx-federated-selfdescription-application
                key: clearingHouse-clientSecret
          - name: APP_VERIFIABLECREDENTIALS_SCHEMA2210URL
            valueFrom: 
              secretKeyRef:
                name: tx-federated-selfdescription-application
                key: verifycredentials-uri

          readinessProbe:
            tcpSocket:
              port: 8080
            initialDelaySeconds: 10
            periodSeconds: 10
          livenessProbe:
            tcpSocket:
              port: 8080
            initialDelaySeconds: 10
            periodSeconds: 10

          resources:
            limits:
              cpu: 600m
              memory: 700Mi
            requests:
              cpu: 300m
              memory: 700Mi
          volumeMounts:
            - mountPath: /tmp
              name: tmp
      volumes:
      - emptyDir: {}
        name: tmp
---
# Source: umbrella/charts/ssi-credential-issuer/templates/deployment-issuer-service.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: apps/v1
kind: Deployment
metadata:
  name: tx-federated-ssi-credential-issuer
  namespace: default
  labels:
    helm.sh/chart: ssi-credential-issuer-1.3.0
    app.kubernetes.io/name: ssi-credential-issuer
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "1.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 1
  strategy:
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 0
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/name: ssi-credential-issuer
      app.kubernetes.io/instance: tx-federated
  template:
    metadata:
      labels:
        app.kubernetes.io/name: ssi-credential-issuer
        app.kubernetes.io/instance: tx-federated
    spec:
      containers:
      - name: tx-federated-ssi-credential-issuer
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/ssi-credential-issuer-service:1.3.0"
        imagePullPolicy: "IfNotPresent"
        env:
        - name: DOTNET_ENVIRONMENT
          value: "Production"
        - name: "ISSUER_PASSWORD"
          valueFrom:
            secretKeyRef:
              name: "tx-federated-issuer-postgres"
              key: "password"
        - name: "CONNECTIONSTRINGS__ISSUERDB"
          value: "Server=tx-federated-issuer-postgresql;Database=issuer;Port=;User Id=issuer;Password=$(ISSUER_PASSWORD);Ssl Mode=Disable;"
        - name: "HEALTHCHECKS__0__PATH"
          value: "/health/startup"
        - name: HEALTHCHECKS__0__TAGS__1
          value: issuerdb
        - name: "HEALTHCHECKS__1__PATH"
          value: "/ready"
        - name: "HEALTHCHECKS__2__PATH"
          value: "/healthz"
        - name: "JWTBEAREROPTIONS__METADATAADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/.well-known/openid-configuration"
        - name: "JWTBEAREROPTIONS__REQUIREHTTPSMETADATA"
          value: "false"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDAUDIENCE"
          value: "Cl24-CX-SSI-CredentialIssuer"
        - name: "JWTBEAREROPTIONS__TOKENVALIDATIONPARAMETERS__VALIDISSUER"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central"
        - name: "JWTBEAREROPTIONS__REFRESHINTERVAL"
          value: "00:00:30"
        - name: "SERILOG__MINIMUMLEVEL__Default"
          value: "Debug"
        - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.SsiCredentialIssuer.Service"
          value: "Debug"
        - name: "SWAGGERENABLED"
          value: "true"
        - name: "PORTAL__CLIENTID"
          value: "sa-cl24-01"
        - name: "PORTAL__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "tx-federated-ssi-credential-issuer"
              key: "portal-client-secret"
        - name: "PORTAL__GRANTTYPE"
          value: "client_credentials"
        - name: "PORTAL__TOKENADDRESS"
          value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
        - name: "PORTAL__BASEADDRESS"
          value: "https://portal-backend.tx.arena2036-x.de"
        - name: "PORTAL__PASSWORD"
          value: "empty"
        - name: "PORTAL__SCOPE"
          value: "openid"
        - name: "PORTAL__USERNAME"
          value: "empty"
        - name: "CREDENTIAL__ISSUERDID"
          value: "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CRHK"
        - name: "CREDENTIAL__ISSUERBPN"
          value: "BPNL00000003CRHK"
        - name: "CREDENTIAL__STATUSLISTURL"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/status-list/BPNL00000003CRHK/8a6c7486-1e1f-4555-bdd2-1a178182651e"
        - name: "CREDENTIAL__STATUSLISTTYPE"
          value: "StatusList2021"
        - name: "CREDENTIAL__ENCRYPTIONCONFIG__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "CREDENTIAL__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "CREDENTIAL__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "CREDENTIAL__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "CREDENTIAL__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "tx-federated-ssi-credential-issuer"
              key: "credential-encryption-key0"
        - name: "WALLET__BASEADDRESS"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de"
        - name: "WALLET__CLIENTID"
          value: "sa-cl5-custodian-2"
        - name: "WALLET__CLIENTSECRET"
          valueFrom:
            secretKeyRef:
              name: "tx-federated-ssi-credential-issuer"
              key: "wallet-client-secret"
        - name: "WALLET__GRANTTYPE"
          value: "client_credentials"
        - name: "WALLET__TOKENADDRESS"
          value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/oauth/token"
        - name: "WALLET__PASSWORD"
          value: "empty"
        - name: "WALLET__SCOPE"
          value: "openid"
        - name: "WALLET__USERNAME"
          value: "empty"
        - name: "WALLET__ENCRYPTIONCONFIG__ENCRYPTIONCONFIGINDEX"
          value: "0"
        - name: "WALLET__ENCRYPTIONCONFIGS__0__INDEX"
          value: "0"
        - name: "WALLET__ENCRYPTIONCONFIGS__0__CIPHERMODE"
          value: "CBC"
        - name: "WALLET__ENCRYPTIONCONFIGS__0__PADDINGMODE"
          value: "PKCS7"
        - name: "WALLET__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
          valueFrom:
            secretKeyRef:
              name: "tx-federated-ssi-credential-issuer"
              key: "credential-encryption-key0"
        - name: "WALLET__WALLETAPPLICATION"
          value: "catena-x-portal"
        - name: "WALLET__CREATESIGNEDCREDENTIALPATH"
          value: "/api/v2.0.0/credentials"
        - name: "WALLET__CREATECREDENTIALPATH"
          value: "api/v2.0.0/credentials"
        - name: "WALLET__GETCREDENTIALPATH"
          value: "/api/v2.0.0/credentials/{0}"
        - name: "WALLET__REVOKECREDENTIALPATH"
          value: "/api/v2.0.0/credentials/{0}"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        startupProbe:
          httpGet:
            path: /health/startup
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 30
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 10
          successThreshold: 1
          failureThreshold: 3
        readinessProbe:
          httpGet:
            path: /ready
            port: 8080
            scheme: HTTP
          initialDelaySeconds: 10
          periodSeconds: 10
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 3
        resources:
          limits:
            cpu: 45m
            memory: 400M
          requests:
            cpu: 15m
            memory: 400M
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - podAffinityTerm:
              labelSelector:
                matchExpressions:
                - key: app.kubernetes.io/name
                  operator: DoesNotExist
              topologyKey: kubernetes.io/hostname
            weight: 100
---
# Source: umbrella/charts/ssi-dim-wallet-stub/templates/deployment.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

kind: Deployment
apiVersion: apps/v1
metadata:
  name: ssi-dim-wallet-stub
  namespace: release25-03
spec:
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0
      maxSurge: 1
  selector:
    matchLabels:
      app: ssi-dim-wallet-stub
  replicas: 1
  revisionHistoryLimit: 2
  template:
    metadata:
      name: ssi-dim-wallet-stub
      labels:
        app: ssi-dim-wallet-stub
    spec:
      containers:
        - name: ssi-dim-wallet-stub
          image: tractusx/ssi-dim-wallet-stub:0.0.6
          securityContext:
            allowPrivilegeEscalation: false
          imagePullPolicy: IfNotPresent
          resources:
            limits:
              cpu: 750m
              memory: 1.5Gi
            requests:
              cpu: 500m
              memory: 1.5Gi
          envFrom:
            - secretRef:
                name: ssi-dim-wallet-secret
            - configMapRef:
                name: ssi-dim-wallet-config
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /actuator/health/liveness
              port: 8080
              scheme: HTTP
            failureThreshold: 3
            initialDelaySeconds: 20
            periodSeconds: 5
            timeoutSeconds: 15
          readinessProbe:
            httpGet:
              path: /actuator/health/readiness
              port: 8080
              scheme: HTTP
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 5
---
# Source: umbrella/templates/smtp-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: smtp4dev
  namespace: default
  labels:
    app: smtp4dev
spec:
  replicas: 1
  selector:
    matchLabels:
      app: smtp4dev
  template:
    metadata:
      labels:
        app: smtp4dev
    spec:
      affinity:
        nodeAffinity:
          requiredDuringSchedulingIgnoredDuringExecution:
            nodeSelectorTerms:
              - matchExpressions:
                  - key: kubernetes.io/os
                    operator: In
                    values:
                      - linux
      containers:
        - name: smtp4dev
          image: rnwood/smtp4dev:3.6.1
          resources:
            limits:
              memory: "512Mi"
              cpu: "500m"
          ports:
            - containerPort: 80
            - containerPort: 25
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: tx-federated-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: tx-federated-postgresql
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: postgresql
        app.kubernetes.io/version: "15"
        helm.sh/chart: postgresql-16.0.0
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: tx-federated-postgresql
      
      automountServiceAccountToken: false
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15-debian-11
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "kccentral"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-postgresql
                  key: password
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-postgresql
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "iamcentralidp"
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "kccentral" -d "dbname=iamcentralidp" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "kccentral" -d "dbname=iamcentralidp" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits:
              cpu: 150m
              ephemeral-storage: 2Gi
              memory: 192Mi
            requests:
              cpu: 100m
              ephemeral-storage: 50Mi
              memory: 128Mi
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/tmp
              subPath: app-tmp-dir
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: empty-dir
          emptyDir: {}
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/bpdm/charts/centralidp/charts/keycloak/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: bpdm-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: keycloak
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  replicas: 1
  revisionHistoryLimit: 10
  podManagementPolicy: Parallel
  serviceName: bpdm-centralidp-headless
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: keycloak
      app.kubernetes.io/component: keycloak
  template:
    metadata:
      annotations:
        checksum/configmap-env-vars: 2c7bfa3f9731e90f446536f8f32310e511e630319cb0b0ca5b549bb38ce92cb2
        checksum/secrets: 00a6fb424953ae506a03a73af00806edee00b2bb403d24675e64df2bec0a093e
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: keycloak
        app.kubernetes.io/version: 25.0.6
        helm.sh/chart: keycloak-23.0.0
        app.kubernetes.io/component: keycloak
    spec:
      serviceAccountName: bpdm-centralidp
      
      automountServiceAccountToken: true
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: keycloak
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      enableServiceLinks: true
      initContainers:
        - name: prepare-write-dirs
          image: docker.io/bitnami/keycloak:25.0.6-debian-12-r0
          imagePullPolicy: IfNotPresent
          command:
            - /bin/bash
          args:
            - -ec
            - |
              . /opt/bitnami/scripts/liblog.sh

              info "Copying writable dirs to empty dir"
              # In order to not break the application functionality we need to make some
              # directories writable, so we need to copy it to an empty dir volume
              cp -r --preserve=mode /opt/bitnami/keycloak/lib/quarkus /emptydir/app-quarkus-dir
              cp -r --preserve=mode /opt/bitnami/keycloak/data /emptydir/app-data-dir
              info "Copy operation completed"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          resources:
            limits:
              cpu: 750m
              ephemeral-storage: 2Gi
              memory: 768Mi
            requests:
              cpu: 500m
              ephemeral-storage: 50Mi
              memory: 512Mi
          volumeMounts:
           - name: empty-dir
             mountPath: /emptydir
        - args:
          - -c
          - |
            echo "Copying themes..."
            cp -R /import/themes/catenax-central/* /themes
          command:
          - sh
          image: docker.io/tractusx/portal-iam:v4.0.1
          imagePullPolicy: IfNotPresent
          name: import
          volumeMounts:
          - mountPath: /themes
            name: themes
      containers:
        - name: keycloak
          image: docker.io/bitnami/keycloak:25.0.6-debian-12-r0
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: KUBERNETES_NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: BITNAMI_DEBUG
              value: "false"
            - name: KEYCLOAK_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: bpdm-centralidp
                  key: admin-password
            - name: KEYCLOAK_DATABASE_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-postgresql
                  key: password
            - name: KEYCLOAK_HTTP_RELATIVE_PATH
              value: "/auth/"
            - name: KC_SPI_ADMIN_REALM
              value: "master"
          envFrom:
            - configMapRef:
                name: bpdm-centralidp-env-vars
          resources:
            limits:
              cpu: 750m
              ephemeral-storage: 2Gi
              memory: 768Mi
            requests:
              cpu: 500m
              ephemeral-storage: 50Mi
              memory: 512Mi
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            - name: discovery
              containerPort: 7800
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 300
            periodSeconds: 1
            successThreshold: 1
            timeoutSeconds: 5
            tcpSocket:
              port: http
          readinessProbe:
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
            httpGet:
              path: /auth/realms/master
              port: http
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /bitnami/keycloak
              subPath: app-volume-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/lib/quarkus
              subPath: app-quarkus-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/data
              subPath: app-data-dir
            - mountPath: /opt/bitnami/keycloak/themes/catenax-central
              name: themes
      volumes:
        - name: empty-dir
          emptyDir: {}
        - emptyDir: {}
          name: themes
---
# Source: umbrella/charts/bpdm/charts/postgres/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: bpdm-postgres
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: postgres
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgres-12.12.10
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: bpdm-postgres-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: postgres
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: bpdm-postgres
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: postgres
        app.kubernetes.io/version: 15.4.0
        helm.sh/chart: postgres-12.12.10
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: default
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: postgres
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15.4.0-debian-11-r45
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            runAsGroup: 0
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "bpdm"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: bpdm-postgres
                  key: password
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: bpdm-postgres
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "bpdm"
            # Replication
            # Initdb
            # Standby
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "bpdm" -d "dbname=bpdm" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "bpdm" -d "dbname=bpdm" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits: {}
            requests:
              cpu: 250m
              memory: 256Mi
          volumeMounts:
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/bpndiscovery/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-bpndiscovery-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: bpndiscovery-postgresql
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: tx-federated-bpndiscovery-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: bpndiscovery-postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: tx-federated-bpndiscovery-postgresql
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: bpndiscovery-postgresql
        app.kubernetes.io/version: 15.4.0
        helm.sh/chart: postgresql-12.12.10
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: default
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: bpndiscovery-postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15.4.0-debian-11-r45
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            runAsGroup: 0
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "default-user"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: secret-bpndiscovery-postgres-init
                  key: password
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: secret-bpndiscovery-postgres-init
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "bpndiscovery"
            # Replication
            # Initdb
            # Standby
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "default-user" -d "dbname=bpndiscovery" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "default-user" -d "dbname=bpndiscovery" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits: {}
            requests:
              cpu: 250m
              memory: 256Mi
          volumeMounts:
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/centralidp/charts/keycloak/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-centralidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: tx-federated-centralidp-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: centralidp-postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: tx-federated-centralidp-postgresql
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: centralidp-postgresql
        app.kubernetes.io/version: "15"
        helm.sh/chart: postgresql-16.0.0
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: tx-federated-centralidp-postgresql
      
      automountServiceAccountToken: false
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: centralidp-postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15-debian-11
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "kccentral"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-centralidp-postgresql
                  key: password
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-centralidp-postgresql
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "iamcentralidp"
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "kccentral" -d "dbname=iamcentralidp" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "kccentral" -d "dbname=iamcentralidp" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits:
              cpu: 150m
              ephemeral-storage: 2Gi
              memory: 192Mi
            requests:
              cpu: 100m
              ephemeral-storage: 50Mi
              memory: 128Mi
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/tmp
              subPath: app-tmp-dir
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: empty-dir
          emptyDir: {}
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  replicas: 1
  revisionHistoryLimit: 10
  podManagementPolicy: Parallel
  serviceName: tx-federated-centralidp-headless
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: centralidp
      app.kubernetes.io/component: keycloak
  template:
    metadata:
      annotations:
        checksum/configmap-env-vars: 1f359d2760d58bc76a0833ed897dde3eaeb94e5cdf5963743ca50eeacd2e1000
        checksum/secrets: 0bf2226de10f5efa62b49173c1ac7381e59fa60d249b265c6922518ff35e8124
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: centralidp
        app.kubernetes.io/version: 25.0.6
        helm.sh/chart: keycloak-23.0.0
        app.kubernetes.io/component: keycloak
    spec:
      serviceAccountName: tx-federated-centralidp
      
      automountServiceAccountToken: true
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: centralidp
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      enableServiceLinks: true
      initContainers:
        - name: prepare-write-dirs
          image: docker.io/bitnami/keycloak:25.0.6-debian-12-r0
          imagePullPolicy: IfNotPresent
          command:
            - /bin/bash
          args:
            - -ec
            - |
              . /opt/bitnami/scripts/liblog.sh

              info "Copying writable dirs to empty dir"
              # In order to not break the application functionality we need to make some
              # directories writable, so we need to copy it to an empty dir volume
              cp -r --preserve=mode /opt/bitnami/keycloak/lib/quarkus /emptydir/app-quarkus-dir
              cp -r --preserve=mode /opt/bitnami/keycloak/data /emptydir/app-data-dir
              info "Copy operation completed"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          resources:
            limits:
              cpu: 750m
              ephemeral-storage: 2Gi
              memory: 768Mi
            requests:
              cpu: 500m
              ephemeral-storage: 50Mi
              memory: 512Mi
          volumeMounts:
           - name: empty-dir
             mountPath: /emptydir
        - args:
          - -c
          - |
            echo "Copying themes..."
            cp -R /import/themes/catenax-central/* /themes
          command:
          - sh
          image: docker.io/tractusx/portal-iam:v4.1.0
          imagePullPolicy: IfNotPresent
          name: import
          volumeMounts:
          - mountPath: /themes
            name: themes
      containers:
        - name: keycloak
          image: docker.io/bitnami/keycloak:25.0.6-debian-12-r0
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: KUBERNETES_NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: BITNAMI_DEBUG
              value: "false"
            - name: KEYCLOAK_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-centralidp
                  key: admin-password
            - name: KEYCLOAK_DATABASE_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-centralidp-postgresql
                  key: password
            - name: KEYCLOAK_HTTP_RELATIVE_PATH
              value: "/auth/"
            - name: KC_SPI_ADMIN_REALM
              value: "master"
          envFrom:
            - configMapRef:
                name: tx-federated-centralidp-env-vars
          resources:
            limits:
              cpu: 750m
              ephemeral-storage: 2Gi
              memory: 768Mi
            requests:
              cpu: 500m
              ephemeral-storage: 50Mi
              memory: 512Mi
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            - name: discovery
              containerPort: 7800
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 300
            periodSeconds: 1
            successThreshold: 1
            timeoutSeconds: 5
            tcpSocket:
              port: http
          readinessProbe:
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
            httpGet:
              path: /auth/realms/master
              port: http
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /bitnami/keycloak
              subPath: app-volume-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/lib/quarkus
              subPath: app-quarkus-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/data
              subPath: app-data-dir
            - mountPath: /opt/bitnami/keycloak/themes/catenax-central
              name: themes
      volumes:
        - name: empty-dir
          emptyDir: {}
        - emptyDir: {}
          name: themes
---
# Source: umbrella/charts/discoveryfinder/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-discoveryfinder-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: discoveryfinder-postgresql
    app.kubernetes.io/version: 15.4.0
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: tx-federated-discoveryfinder-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: discoveryfinder-postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: tx-federated-discoveryfinder-postgresql
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: discoveryfinder-postgresql
        app.kubernetes.io/version: 15.4.0
        helm.sh/chart: postgresql-12.12.10
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: default
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: discoveryfinder-postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15.4.0-debian-11-r45
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            runAsGroup: 0
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "catenax"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: secret-discoveryfinder-postgres-init
                  key: password
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: secret-discoveryfinder-postgres-init
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "discoveryfinder"
            # Replication
            # Initdb
            # Standby
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "catenax" -d "dbname=discoveryfinder" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "catenax" -d "dbname=discoveryfinder" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits: {}
            requests:
              cpu: 250m
              memory: 256Mi
          volumeMounts:
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/portal/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-portal-backend-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: portal-backend-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: tx-federated-portal-backend-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: portal-backend-postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: tx-federated-portal-backend-postgresql
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: portal-backend-postgresql
        app.kubernetes.io/version: "15"
        helm.sh/chart: postgresql-12.12.10
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: default
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: portal-backend-postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15-debian-11
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            runAsGroup: 0
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: portal-postgres
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "postgres"
            # Replication
            # Initdb
            # Standby
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_LINE_PREFIX
              value: "%m %u %d "
            - name: POSTGRESQL_PGAUDIT_LOG
              value: "write, ddl"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
            - name: PORTAL_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: portal-password
                  name: 'portal-postgres'
            - name: PROVISIONING_PASSWORD
              valueFrom:
                secretKeyRef:
                  key: provisioning-password
                  name: 'portal-postgres'
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "postgres" -d "dbname=postgres" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "postgres" -d "dbname=postgres" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits: {}
            requests:
              cpu: 250m
              memory: 256Mi
          volumeMounts:
            - name: custom-init-scripts
              mountPath: /docker-entrypoint-initdb.d/
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: custom-init-scripts
          configMap:
            name: tx-federated-portal-cm-postgres
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/sharedidp/charts/keycloak/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-sharedidp-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-16.0.0
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: tx-federated-sharedidp-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: sharedidp-postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: tx-federated-sharedidp-postgresql
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: sharedidp-postgresql
        app.kubernetes.io/version: "15"
        helm.sh/chart: postgresql-16.0.0
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: tx-federated-sharedidp-postgresql
      
      automountServiceAccountToken: false
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: sharedidp-postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15-debian-11
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "kcshared"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-sharedidp-postgresql
                  key: password
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-sharedidp-postgresql
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "iamsharedidp"
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "kcshared" -d "dbname=iamsharedidp" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "kcshared" -d "dbname=iamsharedidp" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits:
              cpu: 150m
              ephemeral-storage: 2Gi
              memory: 192Mi
            requests:
              cpu: 100m
              ephemeral-storage: 50Mi
              memory: 128Mi
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/postgresql/tmp
              subPath: app-tmp-dir
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: empty-dir
          emptyDir: {}
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
spec:
  replicas: 1
  revisionHistoryLimit: 10
  podManagementPolicy: Parallel
  serviceName: tx-federated-sharedidp-headless
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: sharedidp
      app.kubernetes.io/component: keycloak
  template:
    metadata:
      annotations:
        checksum/configmap-env-vars: 65363934b22dcce54b6ecbe7969cdc2b867c283ac5fa0eb5d977d172f825a207
        checksum/secrets: b93711feca67c5449ab5c12f8efed8df1b6cac88af16e96bb8b6ca65a67e664e
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: sharedidp
        app.kubernetes.io/version: 25.0.6
        helm.sh/chart: keycloak-23.0.0
        app.kubernetes.io/component: keycloak
    spec:
      serviceAccountName: tx-federated-sharedidp
      
      automountServiceAccountToken: true
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: sharedidp
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
        fsGroupChangePolicy: Always
        supplementalGroups: []
        sysctls: []
      enableServiceLinks: true
      initContainers:
        - name: prepare-write-dirs
          image: docker.io/bitnami/keycloak:25.0.6-debian-12-r0
          imagePullPolicy: IfNotPresent
          command:
            - /bin/bash
          args:
            - -ec
            - |
              . /opt/bitnami/scripts/liblog.sh

              info "Copying writable dirs to empty dir"
              # In order to not break the application functionality we need to make some
              # directories writable, so we need to copy it to an empty dir volume
              cp -r --preserve=mode /opt/bitnami/keycloak/lib/quarkus /emptydir/app-quarkus-dir
              cp -r --preserve=mode /opt/bitnami/keycloak/data /emptydir/app-data-dir
              info "Copy operation completed"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          resources:
            limits:
              cpu: 750m
              ephemeral-storage: 2Gi
              memory: 768Mi
            requests:
              cpu: 500m
              ephemeral-storage: 50Mi
              memory: 512Mi
          volumeMounts:
           - name: empty-dir
             mountPath: /emptydir
        - args:
          - -c
          - |
            echo "Copying themes-catenax-shared..."
            cp -R /import/themes/catenax-shared/* /themes-catenax-shared
            echo "Copying themes-catenax-shared-portal..."
            cp -R /import/themes/catenax-shared-portal/* /themes-catenax-shared-portal
          command:
          - sh
          image: docker.io/tractusx/portal-iam:v4.1.0
          imagePullPolicy: IfNotPresent
          name: import
          volumeMounts:
          - mountPath: /themes-catenax-shared
            name: themes-catenax-shared
          - mountPath: /themes-catenax-shared-portal
            name: themes-catenax-shared-portal
      containers:
        - name: keycloak
          image: docker.io/bitnami/keycloak:25.0.6-debian-12-r0
          imagePullPolicy: IfNotPresent
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: true
            runAsGroup: 1001
            runAsNonRoot: true
            runAsUser: 1001
            seLinuxOptions: {}
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: KUBERNETES_NAMESPACE
              valueFrom:
                fieldRef:
                  apiVersion: v1
                  fieldPath: metadata.namespace
            - name: BITNAMI_DEBUG
              value: "false"
            - name: KEYCLOAK_ADMIN_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-sharedidp
                  key: admin-password
            - name: KEYCLOAK_DATABASE_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-sharedidp-postgresql
                  key: password
            - name: KEYCLOAK_HTTP_RELATIVE_PATH
              value: "/auth/"
            - name: KC_SPI_ADMIN_REALM
              value: "master"
          envFrom:
            - configMapRef:
                name: tx-federated-sharedidp-env-vars
          resources:
            limits:
              cpu: 750m
              ephemeral-storage: 2Gi
              memory: 768Mi
            requests:
              cpu: 500m
              ephemeral-storage: 50Mi
              memory: 512Mi
          ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            - name: discovery
              containerPort: 7800
          livenessProbe:
            failureThreshold: 3
            initialDelaySeconds: 300
            periodSeconds: 1
            successThreshold: 1
            timeoutSeconds: 5
            tcpSocket:
              port: http
          readinessProbe:
            failureThreshold: 3
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
            httpGet:
              path: /auth/realms/master
              port: http
          volumeMounts:
            - name: empty-dir
              mountPath: /tmp
              subPath: tmp-dir
            - name: empty-dir
              mountPath: /bitnami/keycloak
              subPath: app-volume-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/conf
              subPath: app-conf-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/lib/quarkus
              subPath: app-quarkus-dir
            - name: empty-dir
              mountPath: /opt/bitnami/keycloak/data
              subPath: app-data-dir
            - mountPath: /opt/bitnami/keycloak/themes/catenax-shared
              name: themes-catenax-shared
            - mountPath: /opt/bitnami/keycloak/themes/catenax-shared-portal
              name: themes-catenax-shared-portal
      volumes:
        - name: empty-dir
          emptyDir: {}
        - emptyDir: {}
          name: themes-catenax-shared
        - emptyDir: {}
          name: themes-catenax-shared-portal
---
# Source: umbrella/charts/ssi-credential-issuer/charts/postgresql/templates/primary/statefulset.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: tx-federated-issuer-postgresql
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: issuer-postgresql
    app.kubernetes.io/version: "15"
    helm.sh/chart: postgresql-12.12.10
    app.kubernetes.io/component: primary
spec:
  replicas: 1
  serviceName: tx-federated-issuer-postgresql-hl
  updateStrategy:
    rollingUpdate: {}
    type: RollingUpdate
  selector:
    matchLabels:
      app.kubernetes.io/instance: tx-federated
      app.kubernetes.io/name: issuer-postgresql
      app.kubernetes.io/component: primary
  template:
    metadata:
      name: tx-federated-issuer-postgresql
      labels:
        app.kubernetes.io/instance: tx-federated
        app.kubernetes.io/managed-by: Helm
        app.kubernetes.io/name: issuer-postgresql
        app.kubernetes.io/version: "15"
        helm.sh/chart: postgresql-12.12.10
        app.kubernetes.io/component: primary
    spec:
      serviceAccountName: default
      
      affinity:
        podAffinity:
          
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - podAffinityTerm:
                labelSelector:
                  matchLabels:
                    app.kubernetes.io/instance: tx-federated
                    app.kubernetes.io/name: issuer-postgresql
                    app.kubernetes.io/component: primary
                topologyKey: kubernetes.io/hostname
              weight: 1
        nodeAffinity:
          
      securityContext:
        fsGroup: 1001
      hostNetwork: false
      hostIPC: false
      containers:
        - name: postgresql
          image: docker.io/bitnami/postgresql:15-debian-12
          imagePullPolicy: "IfNotPresent"
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            runAsGroup: 0
            runAsNonRoot: true
            runAsUser: 1001
            seccompProfile:
              type: RuntimeDefault
          env:
            - name: BITNAMI_DEBUG
              value: "false"
            - name: POSTGRESQL_PORT_NUMBER
              value: "5432"
            - name: POSTGRESQL_VOLUME_DIR
              value: "/bitnami/postgresql"
            - name: PGDATA
              value: "/bitnami/postgresql/data"
            # Authentication
            - name: POSTGRES_USER
              value: "issuer"
            - name: POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-issuer-postgres
                  key: password
            - name: POSTGRES_POSTGRES_PASSWORD
              valueFrom:
                secretKeyRef:
                  name: tx-federated-issuer-postgres
                  key: postgres-password
            - name: POSTGRES_DATABASE
              value: "issuer"
            # Replication
            # Initdb
            # Standby
            # LDAP
            - name: POSTGRESQL_ENABLE_LDAP
              value: "no"
            # TLS
            - name: POSTGRESQL_ENABLE_TLS
              value: "no"
            # Audit
            - name: POSTGRESQL_LOG_HOSTNAME
              value: "false"
            - name: POSTGRESQL_LOG_CONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_DISCONNECTIONS
              value: "false"
            - name: POSTGRESQL_LOG_LINE_PREFIX
              value: "%m %u %d "
            - name: POSTGRESQL_PGAUDIT_LOG
              value: "write, ddl"
            - name: POSTGRESQL_PGAUDIT_LOG_CATALOG
              value: "off"
            # Others
            - name: POSTGRESQL_CLIENT_MIN_MESSAGES
              value: "error"
            - name: POSTGRESQL_SHARED_PRELOAD_LIBRARIES
              value: "pgaudit"
          ports:
            - name: tcp-postgresql
              containerPort: 5432
          livenessProbe:
            failureThreshold: 6
            initialDelaySeconds: 30
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - exec pg_isready -U "issuer" -d "dbname=issuer" -h 127.0.0.1 -p 5432
          readinessProbe:
            failureThreshold: 6
            initialDelaySeconds: 5
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 5
            exec:
              command:
                - /bin/sh
                - -c
                - -e
                - |
                  exec pg_isready -U "issuer" -d "dbname=issuer" -h 127.0.0.1 -p 5432
                  [ -f /opt/bitnami/postgresql/tmp/.initialized ] || [ -f /bitnami/postgresql/.initialized ]
          resources:
            limits: {}
            requests:
              cpu: 250m
              memory: 256Mi
          volumeMounts:
            - name: custom-init-scripts
              mountPath: /docker-entrypoint-initdb.d/
            - name: dshm
              mountPath: /dev/shm
            - name: data
              mountPath: /bitnami/postgresql
      volumes:
        - name: custom-init-scripts
          configMap:
            name: tx-federated-issuer-cm-postgres
        - name: dshm
          emptyDir:
            medium: Memory
  volumeClaimTemplates:
    - apiVersion: v1
      kind: PersistentVolumeClaim
      metadata:
        name: data
      spec:
        accessModes:
          - "ReadWriteOnce"
        resources:
          requests:
            storage: "8Gi"
---
# Source: umbrella/charts/bpdm/charts/centralidp/templates/job-seeding.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: bpdm-centralidp-realm-seeding-1
  namespace: default
spec:
  template:
    metadata:
      name: bpdm-centralidp-realm-seeding
    spec:
      restartPolicy: Never
      containers:
      - name: bpdm-centralidp-realm-seeding
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-iam-seeding:v4.0.1-iam"
        imagePullPolicy: "IfNotPresent"
        env:
          - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
            value: |
              http://bpdm-centralidp:80
          - name: "KEYCLOAK__CENTRAL__USER"
            value: "admin"
          - name: "KEYCLOAK__CENTRAL__PASSWORD"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp"
                key: "admin-password"
          - name: "KEYCLOAK__CENTRAL__AUTHREALM"
            value: "master"
          - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__DATAPATHS__0"
            value: "realms/CX-Central-realm.json"
          - name: "KEYCLOAKSEEDING__REALMS__0__CREATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__UPDATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__DELETE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__INSTANCENAME"
            value: "central"
          - name: "KEYCLOAKSEEDING__REALMS__0__REALM"
            value: "CX-Central"
          - name: "KEYCLOAKSEEDING__REALMS__0__SSLREQUIRED"
            value: "external"

          #############################
          ## INITIAL USER
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__DATAPATHS__1"
            value: "realms/CX-Central-users-0.json"

          #############################
          ## CLIENTS
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__CLIENTID"
            value: "Cl1-CX-Registration"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__REDIRECTURIS__0"
            value: "https://portal.example.org/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__1__CLIENTID"
            value: "Cl2-CX-Portal"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__1__ROOTURL"
            value: "https://portal.example.org/home"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__1__REDIRECTURIS__0"
            value: "https://portal.example.org/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__2__CLIENTID"
            value: "Cl3-CX-Semantic"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__2__REDIRECTURIS__0"
            value: "https://portal.example.org/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__3__CLIENTID"
            value: "Cl5-CX-Custodian"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__3__REDIRECTURIS__0"
            value: "https://managed-identity-wallets.example.org/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__3__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-clients"
                key: "miw"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__4__CLIENTID"
            value: "Cl7-CX-BPDM"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__4__REDIRECTURIS__0"
            value: "https://partners-pool.example.org/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__4__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-clients"
                key: "bpdm"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__5__CLIENTID"
            value: "Cl16-CX-BPDMGate"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__5__REDIRECTURIS__0"
            value: "https://partners-gate.example.org/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__5__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-clients"
                key: "bpdm-gate"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__6__CLIENTID"
            value: "Cl25-CX-BPDM-Orchestrator"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__6__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-clients"
                key: "bpdm-orchestrator"

          #############################
          ## BASE SERVICE ACCOUNTS
          #############################
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__20__CLIENTID"
            value: "sa-cl7-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__20__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-base-service-accounts"
                key: "sa-cl7-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__21__CLIENTID"
            value: "sa-cl7-cx-5"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__21__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-base-service-accounts"
                key: "sa-cl7-cx-5"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__22__CLIENTID"
            value: "sa-cl7-cx-7"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__22__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-base-service-accounts"
                key: "sa-cl7-cx-7"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__23__CLIENTID"
            value: "sa-cl25-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__23__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-base-service-accounts"
                key: "sa-cl25-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__24__CLIENTID"
            value: "sa-cl25-cx-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__24__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-base-service-accounts"
                key: "sa-cl25-cx-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__25__CLIENTID"
            value: "sa-cl25-cx-3"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__25__SECRET"
            valueFrom:
              secretKeyRef:
                name: "bpdm-centralidp-base-service-accounts"
                key: "sa-cl25-cx-3"

          #############################
          ## BPN USER ATTRIBUTE
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__USERNAME"
            value: "ac1cf001-7fbc-1f2f-817f-bce058020006"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__Attributes__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__Attributes__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__1__USERNAME"
            value: "service-account-sa-cl7-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__1__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__1__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__2__USERNAME"
            value: "service-account-sa-cl7-cx-5"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__2__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__2__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__3__USERNAME"
            value: "service-account-sa-cl7-cx-7"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__3__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__3__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__4__USERNAME"
            value: "service-account-sa-cl25-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__4__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__4__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__5__USERNAME"
            value: "service-account-sa-cl25-cx-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__5__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__5__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__6__USERNAME"
            value: "service-account-sa-cl25-cx-3"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__6__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__6__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"

          #############################
          ## IDENTITY PROVIDER
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__ALIAS"
            value: "CX-Operator"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__TOKENURL"
            value: "https://sharedidp.example.org/auth/realms/CX-Operator/protocol/openid-connect/token"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__JWKSURL"
            value: "https://sharedidp.example.org/auth/realms/CX-Operator/protocol/openid-connect/certs"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__AUTHORIZATIONURL"
            value: "https://sharedidp.example.org/auth/realms/CX-Operator/protocol/openid-connect/auth"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__LOGOUTURL"
            value: "https://sharedidp.example.org/auth/realms/CX-Operator/protocol/openid-connect/logout"

          #############################
          ## EXTRA SERVICE ACCOUNTS
          #############################

        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        resources:
          limits:
            cpu: 750m
            ephemeral-storage: 1024Mi
            memory: 850M
          requests:
            cpu: 250m
            ephemeral-storage: 50Mi
            memory: 850M
        volumeMounts:
          - name: realms
            mountPath: "app/realms"
      initContainers:
        - name: init-cx-central
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          image: docker.io/tractusx/portal-iam:v4.0.1
          imagePullPolicy: IfNotPresent
          command:
            - sh
          args:
            - -c
            - |
              echo "Copying CX Central realm..."
              cp -R /import/catenax-central/realms/* /app/realms
          volumeMounts:
          - name: realms
            mountPath: "app/realms"
        - name: wait-for-keycloak
          image: alpine/curl:latest
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 3000
          command: [ 'sh', '-c', 'until curl -s http://bpdm-centralidp:80/auth/realms/master/.well-known/openid-configuration; do echo waiting for other pod; sleep 2; done;' ]
          imagePullPolicy: IfNotPresent
      volumes:
        - name: realms
          emptyDir: {}
      automountServiceAccountToken: false
---
# Source: umbrella/charts/centralidp/templates/job-seeding.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: tx-federated-centralidp-realm-seeding-1
  namespace: default
spec:
  template:
    metadata:
      name: tx-federated-centralidp-realm-seeding
    spec:
      restartPolicy: Never
      containers:
      - name: tx-federated-centralidp-realm-seeding
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-iam-seeding:v4.1.0-iam"
        imagePullPolicy: "IfNotPresent"
        env:
          - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
            value: |
              http://tx-federated-centralidp:80
          - name: "KEYCLOAK__CENTRAL__USER"
            value: "admin"
          - name: "KEYCLOAK__CENTRAL__PASSWORD"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp"
                key: "admin-password"
          - name: "KEYCLOAK__CENTRAL__AUTHREALM"
            value: "master"
          - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__DATAPATHS__0"
            value: "realms/CX-Central-realm.json"
          - name: "KEYCLOAKSEEDING__REALMS__0__CREATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__UPDATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__DELETE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__INSTANCENAME"
            value: "central"
          - name: "KEYCLOAKSEEDING__REALMS__0__REALM"
            value: "CX-Central"
          - name: "KEYCLOAKSEEDING__REALMS__0__SSLREQUIRED"
            value: "none"

          #############################
          ## INITIAL USER
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__DATAPATHS__1"
            value: "realms/CX-Central-users-0.json"

          #############################
          ## CLIENTS
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__CLIENTID"
            value: "Cl1-CX-Registration"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__REDIRECTURIS__0"
            value: "https://portal.tx.arena2036-x.de/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__1__CLIENTID"
            value: "Cl2-CX-Portal"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__1__ROOTURL"
            value: "https://portal.tx.arena2036-x.de/home"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__1__REDIRECTURIS__0"
            value: "https://portal.tx.arena2036-x.de/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__2__CLIENTID"
            value: "Cl3-CX-Semantic"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__2__REDIRECTURIS__0"
            value: "https://portal.tx.arena2036-x.de/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__3__CLIENTID"
            value: "Cl5-CX-Custodian"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__3__REDIRECTURIS__0"
            value: "https://managed-identity-wallets.tx.arena2036-x.de/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__3__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-clients"
                key: "miw"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__4__CLIENTID"
            value: "Cl7-CX-BPDM"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__4__REDIRECTURIS__0"
            value: "https://partners-pool.tx.arena2036-x.de/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__4__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-clients"
                key: "bpdm"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__5__CLIENTID"
            value: "Cl16-CX-BPDMGate"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__5__REDIRECTURIS__0"
            value: "https://partners-gate.tx.arena2036-x.de/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__5__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-clients"
                key: "bpdm-gate"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__6__CLIENTID"
            value: "Cl25-CX-BPDM-Orchestrator"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__6__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-clients"
                key: "bpdm-orchestrator"

          #############################
          ## BASE SERVICE ACCOUNTS
          #############################
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__20__CLIENTID"
            value: "sa-cl1-reg-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__20__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl1-reg-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__21__CLIENTID"
            value: "sa-cl2-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__21__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl2-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__22__CLIENTID"
            value: "sa-cl2-02"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__22__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl2-02"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__23__CLIENTID"
            value: "sa-cl2-03"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__23__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl2-03"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__24__CLIENTID"
            value: "sa-cl2-04"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__24__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl2-04"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__25__CLIENTID"
            value: "sa-cl2-05"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__25__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl2-05"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__26__CLIENTID"
            value: "sa-cl3-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__26__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl3-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__27__CLIENTID"
            value: "sa-cl5-custodian-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__27__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl5-custodian-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__28__CLIENTID"
            value: "sa-cl7-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__28__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl7-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__29__CLIENTID"
            value: "sa-cl7-cx-5"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__29__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl7-cx-5"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__30__CLIENTID"
            value: "sa-cl7-cx-7"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__30__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl7-cx-7"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__31__CLIENTID"
            value: "sa-cl8-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__31__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl8-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__32__CLIENTID"
            value: "sa-cl21-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__32__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl21-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__33__CLIENTID"
            value: "sa-cl22-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__33__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl22-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__34__CLIENTID"
            value: "sa-cl24-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__34__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl24-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__35__CLIENTID"
            value: "sa-cl25-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__35__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl25-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__36__CLIENTID"
            value: "sa-cl25-cx-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__36__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl25-cx-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__37__CLIENTID"
            value: "sa-cl25-cx-3"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__37__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-centralidp-base-service-accounts"
                key: "sa-cl25-cx-3"

          #############################
          ## BPN USER ATTRIBUTE
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__USERNAME"
            value: "ac1cf001-7fbc-1f2f-817f-bce058020006"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__Attributes__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__Attributes__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__1__USERNAME"
            value: "service-account-sa-cl1-reg-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__1__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__1__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__2__USERNAME"
            value: "service-account-sa-cl2-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__2__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__2__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__3__USERNAME"
            value: "service-account-sa-cl2-02"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__3__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__3__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__4__USERNAME"
            value: "service-account-sa-cl2-03"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__4__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__4__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__5__USERNAME"
            value: "service-account-sa-cl2-04"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__5__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__5__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__6__USERNAME"
            value: "service-account-sa-cl2-05"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__6__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__6__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__7__USERNAME"
            value: "service-account-sa-cl3-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__7__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__7__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__8__USERNAME"
            value: "service-account-sa-cl5-custodian-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__8__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__8__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__9__USERNAME"
            value: "service-account-sa-cl7-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__9__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__9__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__10__USERNAME"
            value: "service-account-sa-cl7-cx-5"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__10__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__10__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__11__USERNAME"
            value: "service-account-sa-cl7-cx-7"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__11__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__11__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__12__USERNAME"
            value: "service-account-sa-cl8-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__12__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__12__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__13__USERNAME"
            value: "service-account-sa-cl21-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__13__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__13__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__14__USERNAME"
            value: "service-account-sa-cl22-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__14__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__14__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__15__USERNAME"
            value: "service-account-sa-cl24-01"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__15__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__15__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__16__USERNAME"
            value: "service-account-sa-cl25-cx-1"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__16__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__16__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__17__USERNAME"
            value: "service-account-sa-cl25-cx-2"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__17__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__17__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__18__USERNAME"
            value: "service-account-sa-cl25-cx-3"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__18__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__18__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CRHK"

          #############################
          ## IDENTITY PROVIDER
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__ALIAS"
            value: "CX-Operator"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__TOKENURL"
            value: "https://sharedidp.tx.arena2036-x.de/auth/realms/CX-Operator/protocol/openid-connect/token"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__JWKSURL"
            value: "https://sharedidp.tx.arena2036-x.de/auth/realms/CX-Operator/protocol/openid-connect/certs"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__AUTHORIZATIONURL"
            value: "https://sharedidp.tx.arena2036-x.de/auth/realms/CX-Operator/protocol/openid-connect/auth"
          - name: "KEYCLOAKSEEDING__REALMS__0__IDENTITYPROVIDERS__0__CONFIG__LOGOUTURL"
            value: "https://sharedidp.tx.arena2036-x.de/auth/realms/CX-Operator/protocol/openid-connect/logout"

          #############################
          ## EXTRA SERVICE ACCOUNTS
          #############################
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__100__CLIENTID"
            value: "satest01"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__100__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest01
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__100__USERNAME"
            value: "service-account-satest01"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__100__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__100__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003AZQP"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__101__CLIENTID"
            value: "satest02"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__101__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest02
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__101__USERNAME"
            value: "service-account-satest02"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__101__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__101__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003AYRE"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__102__CLIENTID"
            value: "satest03"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__102__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest03
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__102__USERNAME"
            value: "service-account-satest03"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__102__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__102__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003AVTH"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__103__CLIENTID"
            value: "satest04"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__103__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest04
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__103__USERNAME"
            value: "service-account-satest04"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__103__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__103__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003AWSS"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__104__CLIENTID"
            value: "satest05"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__104__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest05
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__104__USERNAME"
            value: "service-account-satest05"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__104__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__104__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003B0Q0"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__105__CLIENTID"
            value: "satest06"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__105__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest06
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__105__USERNAME"
            value: "service-account-satest06"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__105__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__105__ATTRIBUTES__0__VALUES__0"
            value: "BPNS0000000008ZZ"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__106__CLIENTID"
            value: "satest07"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__106__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest07
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__106__USERNAME"
            value: "service-account-satest07"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__106__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__106__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CNKC"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__107__CLIENTID"
            value: "satest08"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__107__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest08
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__107__USERNAME"
            value: "service-account-satest08"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__107__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__107__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003B6LU"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__108__CLIENTID"
            value: "satest09"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__108__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest09
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__108__USERNAME"
            value: "service-account-satest09"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__108__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__108__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CML1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__109__CLIENTID"
            value: "satest10"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__109__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest10
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__109__USERNAME"
            value: "service-account-satest10"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__109__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__109__ATTRIBUTES__0__VALUES__0"
            value: "BPNS00000008BDFH"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__110__CLIENTID"
            value: "satest11"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__110__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest11
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__110__USERNAME"
            value: "service-account-satest11"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__110__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__110__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003B2OM"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__111__CLIENTID"
            value: "satest12"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__111__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest12
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__111__USERNAME"
            value: "service-account-satest12"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__111__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__111__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003CSGV"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__112__CLIENTID"
            value: "satest13"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__112__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest13
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__112__USERNAME"
            value: "service-account-satest13"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__112__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__112__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003B5MJ"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__113__CLIENTID"
            value: "satest14"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__113__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest14
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__113__USERNAME"
            value: "service-account-satest14"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__113__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__113__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003AXS3"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__114__CLIENTID"
            value: "satest15"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__114__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest15
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__114__USERNAME"
            value: "service-account-satest15"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__114__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__114__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000003B3NX"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__115__CLIENTID"
            value: "satest16"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__115__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest16
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__115__USERNAME"
            value: "service-account-satest16"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__115__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__115__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000000BJTL"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__116__CLIENTID"
            value: "satest17"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__116__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest17
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__116__USERNAME"
            value: "service-account-satest17"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__116__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__116__ATTRIBUTES__0__VALUES__0"
            value: "BPNS000000815DMY"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__117__CLIENTID"
            value: "satest18"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__117__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest18
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__117__USERNAME"
            value: "service-account-satest18"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__117__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__117__ATTRIBUTES__0__VALUES__0"
            value: "BPNL00000007OR16"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__118__CLIENTID"
            value: "satest19"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__118__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest19
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__118__USERNAME"
            value: "service-account-satest19"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__118__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__118__ATTRIBUTES__0__VALUES__0"
            value: "BPNLA3600000ICH1"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__119__CLIENTID"
            value: "satest20"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__119__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest20
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__119__USERNAME"
            value: "service-account-satest20"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__119__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__119__ATTRIBUTES__0__VALUES__0"
            value: "BPNLA3600000ICH2"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__120__CLIENTID"
            value: "satest21"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__120__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest21
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__120__USERNAME"
            value: "service-account-satest21"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__120__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__120__ATTRIBUTES__0__VALUES__0"
            value: "BPNLA3600000ICH3"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__121__CLIENTID"
            value: "satest22"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__121__SECRET"
            valueFrom:
              secretKeyRef:
                name: tx-federated-centralidp-extra-service-accounts
                key: satest22
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__121__USERNAME"
            value: "service-account-satest22"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__121__ATTRIBUTES__0__NAME"
            value: "bpn"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__121__ATTRIBUTES__0__VALUES__0"
            value: "BPNLA3600000ICH4"

        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        resources:
          limits:
            cpu: 750m
            ephemeral-storage: 1024Mi
            memory: 1.5Gi
          requests:
            cpu: 250m
            ephemeral-storage: 50Mi
            memory: 1.5Gi
        volumeMounts:
          - name: realms
            mountPath: "app/realms"
      initContainers:
        - name: init-cx-central
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          image: docker.io/tractusx/umbrella-init-container:2.1.0-init
          imagePullPolicy: IfNotPresent
          command:
            - sh
          args:
            - -c
            - |
              echo "Copying CX Central realm..."
              cp -R /import/catenax-central/realms/* /app/realms
          volumeMounts:
          - name: realms
            mountPath: "app/realms"
        - name: wait-for-keycloak
          image: alpine/curl:latest
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 3000
          command: [ 'sh', '-c', 'until curl -s http://tx-federated-centralidp:80/auth/realms/master/.well-known/openid-configuration; do echo waiting for other pod; sleep 2; done;' ]
          imagePullPolicy: IfNotPresent
      volumes:
        - name: realms
          emptyDir: {}
      automountServiceAccountToken: false
---
# Source: umbrella/charts/sharedidp/templates/job-seeding.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: tx-federated-sharedidp-realm-seeding-1
  namespace: default
spec:
  template:
    metadata:
      name: tx-federated-sharedidp-realm-seeding
    spec:
      restartPolicy: Never
      containers:
      - name: tx-federated-sharedidp-realm-seeding
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-iam-seeding:v4.1.0-iam"
        imagePullPolicy: "IfNotPresent"
        env:
          - name: "KEYCLOAK__SHARED__CONNECTIONSTRING"
            value: |
              http://tx-federated-sharedidp:80
          - name: "KEYCLOAK__SHARED__USER"
            value: "admin"
          - name: "KEYCLOAK__SHARED__PASSWORD"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp"
                key: "admin-password"
          - name: "KEYCLOAK__SHARED__AUTHREALM"
            value: "master"
          - name: "KEYCLOAK__SHARED__USEAUTHTRAIL"
            value: "true"

          #############################
          ## CX-OPERATOR
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__DATAPATHS__0"
            value: "realms/CX-Operator-realm.json"
          - name: "KEYCLOAKSEEDING__REALMS__0__CREATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__UPDATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__DELETE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__INSTANCENAME"
            value: "shared"
          - name: "KEYCLOAKSEEDING__REALMS__0__REALM"
            value: "CX-Operator"
          - name: "KEYCLOAKSEEDING__REALMS__0__SSLREQUIRED"
            value: "none"

          #############################
          ## CX-OPERATOR CLIENT
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__CLIENTID"
            value: "central-idp"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__REDIRECTURIS__0"
            value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/broker/CX-Operator/endpoint/*"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__ATTRIBUTES__0__NAME"
            value: "jwks.url"
          - name: "KEYCLOAKSEEDING__REALMS__0__CLIENTS__0__ATTRIBUTES__0__VALUE"
            value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/certs"

          #############################
          ## CX-OPERATOR INITIAL USER
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__DATAPATHS__1"
            value: "realms/CX-Operator-users-0.json"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__ID"
            value: "656e8a94-188b-4a3e-9eec-b45d8efd8347"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__USERNAME"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "initial-user-username"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__ENABLED"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__FIRSTNAME"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "initial-user-first-name"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__LASTNAME"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "initial-user-last-name"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__EMAIL"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "initial-user-email"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__CREDENTIALS__0__TEMPORARY"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__CREDENTIALS__0__TYPE"
            value: "password"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__CREDENTIALS__0__VALUE"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "initial-user-password"
          - name: "KEYCLOAKSEEDING__REALMS__0__USERS__0__REALMROLES__0"
            value: "default-roles-cx-operator"

          #############################
          ## CX-OPERATOR MAIL CONFIG
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__0__SMTPSERVER__HOST"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "mailing-host"
          - name: "KEYCLOAKSEEDING__REALMS__0__SMTPSERVER__PORT"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "mailing-port"
          - name: "KEYCLOAKSEEDING__REALMS__0__SMTPSERVER__USER"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "mailing-username"
          - name: "KEYCLOAKSEEDING__REALMS__0__SMTPSERVER__FROM"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "mailing-from"
          - name: "KEYCLOAKSEEDING__REALMS__0__SMTPSERVER__REPLYTO"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "mailing-reply-to"
          - name: "KEYCLOAKSEEDING__REALMS__0__SMTPSERVER__PASSWORD"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-cx-operator-realm-seeding"
                key: "mailing-password"

          #############################
          ## MASTER
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__1__DATAPATHS__0"
            value: "realms/master-realm.json"
          - name: "KEYCLOAKSEEDING__REALMS__1__INSTANCENAME"
            value: "shared"
          - name: "KEYCLOAKSEEDING__REALMS__1__REALM"
            value: "master"
          - name: "KEYCLOAKSEEDING__REALMS__1__CREATE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__UPDATE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__DELETE"
            value: "false"

          #############################
          ## MASTER SERVICE ACCOUNTS
          #############################

          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__KEY"
            value: "Clients"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__CREATE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__UPDATE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__DELETE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__0__KEY"
            value: "sa-cl1-reg-1"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__0__CREATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__0__UPDATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__0__DELETE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__1__KEY"
            value: "saCX-Operator"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__1__CREATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__1__UPDATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__0__SEEDERCONFIGURATIONS__1__DELETE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__1__KEY"
            value: "Users"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__1__CREATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__1__UPDATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__1__DELETE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__KEY"
            value: "Roles"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__CREATE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__UPDATE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__DELETE"
            value: "false"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__SEEDERCONFIGURATIONS__0__KEY"
            value: "cx-admin"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__SEEDERCONFIGURATIONS__0__CREATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__SEEDERCONFIGURATIONS__0__UPDATE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__SEEDERCONFIGURATIONS__2__SEEDERCONFIGURATIONS__0__DELETE"
            value: "true"
          - name: "KEYCLOAKSEEDING__REALMS__1__CLIENTS__0__CLIENTID"
            value: "sa-cl1-reg-1"
          - name: "KEYCLOAKSEEDING__REALMS__1__CLIENTS__0__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-master-realm-seeding"
                key: "sa-provisioning"
          - name: "KEYCLOAKSEEDING__REALMS__1__CLIENTS__1__CLIENTID"
            value: "saCX-Operator"
          - name: "KEYCLOAKSEEDING__REALMS__1__CLIENTS__1__SECRET"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-sharedidp-master-realm-seeding"
                key: "sa-cx-operator"

        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        resources:
          limits:
            cpu: 750m
            ephemeral-storage: 1024Mi
            memory: 950M
          requests:
            cpu: 250m
            ephemeral-storage: 50Mi
            memory: 950M
        volumeMounts:
          - name: realms
            mountPath: "app/realms"
      initContainers:
        - name: init-cx-central
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
          image: docker.io/tractusx/portal-iam:v4.1.0
          imagePullPolicy: IfNotPresent
          command:
            - sh
          args:
            - -c
            - |
              echo "Copying realms..."
              cp -R /import/catenax-shared/realms/* /app/realms
          volumeMounts:
          - name: realms
            mountPath: "app/realms"
        - name: wait-for-keycloak
          image: alpine/curl:latest
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            readOnlyRootFilesystem: true
            runAsNonRoot: true
            runAsUser: 3000
          command: [ 'sh', '-c', 'until curl -s http://tx-federated-sharedidp:80/auth/realms/master/.well-known/openid-configuration; do echo waiting for other pod; sleep 2; done;' ]
          imagePullPolicy: IfNotPresent
      volumes:
        - name: realms
          emptyDir: {}
      automountServiceAccountToken: false
---
# Source: umbrella/charts/portal/templates/cronjob-backend-portal-maintenance.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: batch/v1
kind: CronJob
metadata:
  name: tx-federated-portal-portal-maintenance
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  schedule: "0 0 * * *"
  jobTemplate:
    metadata:
      name: tx-federated-portal-portal-maintenance
    spec:
      template:
        spec:
          restartPolicy: OnFailure
          containers:
          - name: tx-federated-portal-portal-maintenance
            securityContext:
              allowPrivilegeEscalation: false
              capabilities:
                drop:
                - ALL
              readOnlyRootFilesystem: true
              runAsNonRoot: true
            image: "docker.io/tractusx/portal-maintenance-service:v2.4.0"
            imagePullPolicy: "IfNotPresent"
            env:
              - name: DOTNET_ENVIRONMENT
                value: "Development"
              - name: "PORTAL_PASSWORD"
                valueFrom:
                  secretKeyRef:
                    name: "portal-postgres"
                    key: "portal-password"
              - name: "CONNECTIONSTRINGS__PORTALDB"
                value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
              - name: "PROCESSIDENTITY__PROCESSUSERID"
                value: "d21d2e8a-fe35-483c-b2b8-4100ed7f0953"
              - name: "BATCHDELETE_DELETEINTERVALINDAYS"
                value: "80"
              - name: "CLEARINGHOUSE__BASEADDRESS"
                value: "https://validation.tx.arena2036-x.de"
              - name: "CLEARINGHOUSE__CLIENTID"
                value: "clearinghouse-client-id"
              - name: "CLEARINGHOUSE__CLIENTSECRET"
                valueFrom:
                  secretKeyRef:
                    name: "portal-backend-interfaces"
                    key: "clearinghouse-client-secret"
              - name: "CLEARINGHOUSE__GRANTTYPE"
                value: "client_credentials"
              - name: "CLEARINGHOUSE__TOKENADDRESS"
                value: "https://someiam.tx.arena2036-x.de/realms/example/protocol/openid-connect/token"
              - name: "CLEARINGHOUSE__PASSWORD"
                value: "empty"
              - name: "CLEARINGHOUSE__SCOPE"
                value: "openid"
              - name: "CLEARINGHOUSE__USERNAME"
                value: "empty"
              - name: "CLEARINGHOUSE__CALLBACKURL"
                value: "https://portal-backend.tx.arena2036-x.de/api/administration/registration/clearinghouse"
              - name: "CLEARINGHOUSE__USEDIMWALLET"
                value: "true"
              - name: "CLEARINGHOUSE__RETRIGGERENDCLEARINGHOUSEINTERVALINDAYS"
                value: "30"
              - name: "SERILOG__MINIMUMLEVEL__Default"
                value: "Information"
            ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            resources:
              limits:
                cpu: 75m
                memory: 200M
              requests:
                cpu: 25m
                memory: 200M
---
# Source: umbrella/charts/portal/templates/cronjob-backend-processes.yaml
###############################################################
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: batch/v1
kind: CronJob
metadata:
  name: tx-federated-portal-processes-worker
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
spec:
  schedule: "*/5 * * * *"
  concurrencyPolicy: Forbid
  jobTemplate:
    metadata:
      name: tx-federated-portal-processes-worker
    spec:
      template:
        spec:
          restartPolicy: OnFailure
          containers:
          - name: tx-federated-portal-processes-worker
            securityContext:
              allowPrivilegeEscalation: false
              capabilities:
                drop:
                - ALL
              readOnlyRootFilesystem: true
              runAsNonRoot: true
            image: "docker.io/tractusx/portal-processes-worker:v2.4.0"
            imagePullPolicy: "IfNotPresent"
            env:
            - name: DOTNET_ENVIRONMENT
              value: "Development"
            - name: "PORTAL_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "portal-postgres"
                  key: "portal-password"
            - name: "PROVISIONING_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "portal-postgres"
                  key: "provisioning-password"
            - name: "CONNECTIONSTRINGS__PORTALDB"
              value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
            - name: "CONNECTIONSTRINGS__PROVISIONINGDB"
              value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=provisioning;Password=$(PROVISIONING_PASSWORD);Ssl Mode=Disable;"
            - name: "PROVISIONING__SERVICEACCOUNTCLIENTPREFIX"
              value: "sa"
            - name: "PROVISIONING__DIMUSERROLES__0__CLIENTID"
              value: "technical_roles_management"
            - name: "PROVISIONING__DIMUSERROLES__0__USERROLENAMES__0"
              value: "Identity Wallet Management"
            - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__CLIENTID"
              value: "technical_roles_management"
            - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__0"
              value: "BPDM Pool Consumer"
            - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__1"
              value: "BPDM Sharing Output Consumer"
            - name: "PROVISIONING__USERROLESACCESSIBLEBYPROVIDERONLY__0__USERROLENAMES__2"
              value: "BPDM Sharing Input Manager"
            - name: "APPLICATIONACTIVATION__APPLICATIONAPPROVALINITIALROLES__0__CLIENTID"
              value: "Cl2-CX-Portal"
            - name: "APPLICATIONACTIVATION__APPLICATIONAPPROVALINITIALROLES__0__USERROLENAMES__0"
              value: "Company Admin"
            - name: "APPLICATIONACTIVATION__CLIENTTOREMOVEROLESONACTIVATION__0"
              value: "Cl1-CX-Registration"
            - name: "APPLICATIONACTIVATION__BASEPORTALADDRESS"
              value: "https://portal.tx.arena2036-x.de"
            - name: "APPLICATIONACTIVATION__COMPANYADMINROLES__0__CLIENTID"
              value: "Cl1-CX-Registration"
            - name: "APPLICATIONACTIVATION__COMPANYADMINROLES__0__USERROLENAMES__0"
              value: "Company Admin"
            - name: "APPLICATIONACTIVATION__WELCOMENOTIFICATIONTYPEIDS__0"
              value: "WELCOME"
            - name: "APPLICATIONACTIVATION__WELCOMENOTIFICATIONTYPEIDS__1"
              value: "WELCOME_USE_CASES"
            - name: "APPLICATIONACTIVATION__WELCOMENOTIFICATIONTYPEIDS__2"
              value: "WELCOME_SERVICE_PROVIDER"
            - name: "APPLICATIONACTIVATION__WELCOMENOTIFICATIONTYPEIDS__3"
              value: "WELCOME_CONNECTOR_REGISTRATION"
            - name: "APPLICATIONACTIVATION__WELCOMENOTIFICATIONTYPEIDS__4"
              value: "WELCOME_APP_MARKETPLACE"
            - name: "APPLICATIONACTIVATION__LOGINTHEME"
              value: "catenax-shared-portal"
            - name: "APPLICATIONACTIVATION__PORTALHOMEADDRESS"
              value: "https://portal.tx.arena2036-x.de/home"
            - name: "APPLICATIONACTIVATION__PASSWORDRESENDADDRESS"
              value: "https://portal.tx.arena2036-x.de/home/passwordResend"
            - name: "APPLICATIONACTIVATION__COMPANYROLESPARTICIPANTADDRESS"
              value: "https://portal.tx.arena2036-x.de/companyroles"
            - name: "APPLICATIONACTIVATION__DATASPACEADDRESS"
              value: "https://portal.tx.arena2036-x.de/dataspace"
            - name: "APPLICATIONACTIVATION__USEDIMWALLET"
              value: "true"
            - name: "APPLICATIONCHECKLIST__BPDM__BASEADDRESS"
              value: "https://business-partners.tx.arena2036-x.de/gate/v6"
            - name: "APPLICATIONCHECKLIST__BPDM__CLIENTID"
              value: "sa-cl7-cx-5"
            - name: "APPLICATIONCHECKLIST__BPDM__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "bpdm-client-secret"
            - name: "APPLICATIONCHECKLIST__BPDM__GRANTTYPE"
              value: "client_credentials"
            - name: "APPLICATIONCHECKLIST__BPDM__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "APPLICATIONCHECKLIST__BPDM__PASSWORD"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__BPDM__SCOPE"
              value: "openid"
            - name: "APPLICATIONCHECKLIST__BPDM__USERNAME"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__BPDM__USEDIMWALLET"
              value: "true"
            - name: "APPLICATIONCHECKLIST__BPDM__STARTSHARINGSTATEASREADY"
              value: "true"
            - name: "APPLICATIONCHECKLIST__BPDM__BUSINESSPARTNERPOOLBASEADDRESS"
              value: "https://business-partners.tx.arena2036-x.de/pool/v6"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__BASEADDRESS"
              value: "https://validation.tx.arena2036-x.de"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__CLIENTID"
              value: "clearinghouse-client-id"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "clearinghouse-client-secret"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__GRANTTYPE"
              value: "client_credentials"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__TOKENADDRESS"
              value: "https://someiam.tx.arena2036-x.de/realms/example/protocol/openid-connect/token"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__PASSWORD"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__SCOPE"
              value: "openid"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__USERNAME"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__CALLBACKURL"
              value: "https://portal-backend.tx.arena2036-x.de/api/administration/registration/clearinghouse"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__USEDIMWALLET"
              value: "true"
            - name: "APPLICATIONCHECKLIST__CLEARINGHOUSE__RETRIGGERENDCLEARINGHOUSEINTERVALINDAYS"
              value: "30"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__BASEADDRESS"
              value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__MEMBERSHIPERRORMESSAGE"
              value: "Credential of type MembershipCredential is already exists"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__CLIENTID"
              value: "sa-cl5-custodian-2"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "custodian-client-secret"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__GRANTTYPE"
              value: "client_credentials"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__PASSWORD"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__SCOPE"
              value: "openid"
            - name: "APPLICATIONCHECKLIST__CUSTODIAN__USERNAME"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__CLIENTID"
              value: "sa-cl8-cx-1"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "sdfactory-client-secret"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__GRANTTYPE"
              value: "client_credentials"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__PASSWORD"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__SCOPE"
              value: "openid"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__SDFACTORYURL"
              value: "https://sdfactory.tx.arena2036-x.de/api/tagus/selfdescription"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__USERNAME"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__CLEARINGHOUSECONNECTDISABLED"
              value: "true"
            - name: "APPLICATIONCHECKLIST__SDFACTORY__CONNECTORALLOWSDDOCUMENTSKIPERRORCODE"
              value: "E2010"
            - name: "APPLICATIONCHECKLIST__DIM__USERNAME"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__DIM__PASSWORD"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__DIM__CLIENTID"
              value: "sa-cl2-05"
            - name: "APPLICATIONCHECKLIST__DIM__GRANTTYPE"
              value: "client_credentials"
            - name: "APPLICATIONCHECKLIST__DIM__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "dim-client-secret"
            - name: "APPLICATIONCHECKLIST__DIM__SCOPE"
              value: "openid"
            - name: "APPLICATIONCHECKLIST__DIM__TOKENADDRESS"
              value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/oauth/token"
            - name: "APPLICATIONCHECKLIST__DIM__BASEADDRESS"
              value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/api/dim"
            - name: "APPLICATIONCHECKLIST__DIM__UNIVERSALRESOLVERADDRESS"
              value: "https://dev.uniresolver.io/"
            - name: "APPLICATIONCHECKLIST__DIM__DIDDOCUMENTBASELOCATION"
              value: "https://portal-backend.tx.arena2036-x.de/api/administration/staticdata/did"
            - name: "APPLICATIONCHECKLIST__DIM__MAXVALIDATIONTIMEINDAYS"
              value: "7"
            - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGINDEX"
              value: "0"
            - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__INDEX"
              value: "0"
            - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "dim-encryption-key0"
            - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__CIPHERMODE"
              value: "CBC"
            - name: "APPLICATIONCHECKLIST__DIM__ENCRYPTIONCONFIGS__0__PADDINGMODE"
              value: "PKCS7"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__USERNAME"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__PASSWORD"
              value: "empty"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__CLIENTID"
              value: "sa-cl2-04"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__GRANTTYPE"
              value: "client_credentials"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "issuercomponent-client-secret"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__SCOPE"
              value: "openid"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__BASEADDRESS"
              value: "https://ssi-credential-issuer.tx.arena2036-x.de"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__CALLBACKURL"
              value: "https://portal-backend.tx.arena2036-x.de"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGINDEX"
              value: "0"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__INDEX"
              value: "0"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "dim-encryption-key0"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__CIPHERMODE"
              value: "CBC"
            - name: "APPLICATIONCHECKLIST__ISSUERCOMPONENT__ENCRYPTIONCONFIGS__0__PADDINGMODE"
              value: "PKCS7"
            - name: "BPNDIDRESOLVER__BASEADDRESS"
              value: "http://bpn-did-resolution-service-bdrs-server:8081"
            - name: "BPNDIDRESOLVER__APIKEY"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "bpndidresolver-api-key"
            - name: "KEYCLOAK__CENTRAL__AUTHREALM"
              value: "CX-Central"
            - name: "KEYCLOAK__CENTRAL__CLIENTID"
              value: "sa-cl1-reg-2"
            - name: "KEYCLOAK__CENTRAL__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-keycloak"
                  key: "central-client-secret"
            - name: "KEYCLOAK__CENTRAL__CONNECTIONSTRING"
              value: "https://centralidp.tx.arena2036-x.de"
            - name: "KEYCLOAK__CENTRAL__USEAUTHTRAIL"
              value: "true"
            - name: "KEYCLOAK__SHARED__AUTHREALM"
              value: "master"
            - name: "KEYCLOAK__SHARED__CLIENTID"
              value: "sa-cl1-reg-1"
            - name: "KEYCLOAK__SHARED__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-keycloak"
                  key: "shared-client-secret"
            - name: "KEYCLOAK__SHARED__CONNECTIONSTRING"
              value: "https://sharedidp.tx.arena2036-x.de"
            - name: "KEYCLOAK__SHARED__USEAUTHTRAIL"
              value: "true"
            - name: "SERILOG__MINIMUMLEVEL__Default"
              value: "Debug"
            - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Processes.Worker.Library"
              value: "Debug"
            - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Bpdm.Library"
              value: "Debug"
            - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Clearinghouse.Library"
              value: "Debug"
            - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.Custodian.Library"
              value: "Debug"
            - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.SdFactory.Library"
              value: "Debug"
            - name: "SERILOG__MINIMUMLEVEL__OVERRIDE__Org.Eclipse.TractusX.Portal.Backend.OfferProvider.Library"
              value: "Debug"
            - name: "MAILINGSERVICE__MAIL__SMTPHOST"
              value: "smtp4dev.release25-03.svc.cluster.local"
            - name: "MAILINGSERVICE__MAIL__SMTPPASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-mailing"
                  key: "password"
            - name: "MAILINGSERVICE__MAIL__SMTPPORT"
              value: "25"
            - name: "MAILINGSERVICE__MAIL__SMTPUSER"
              value: "smtp-user"
            - name: "MAILINGSERVICE__MAIL__SENDEREMAIL"
              value: "smtp@arena2036-x.de"
            - name: "NETWORKREGISTRATION__INITIALROLES__0__CLIENTID"
              value: "Cl1-CX-Registration"
            - name: "NETWORKREGISTRATION__INITIALROLES__0__USERROLENAMES__0"
              value: "Company Admin"
            - name: "NETWORKREGISTRATION__BASEPORTALADDRESS"
              value: "https://portal.tx.arena2036-x.de/home"
            - name: "NETWORKREGISTRATION__LOGINDOCUMENTADDRESS"
              value: "https://portal.tx.arena2036-x.de/documentation/?path=docs%2F09.+Others%28s%29%2F01.+Login.md"
            - name: "NETWORKREGISTRATION__EXTERNALREGISTRATIONADDRESS"
              value: "https://portal.tx.arena2036-x.de/consentOsp"
            - name: "NETWORKREGISTRATION__CLOSEAPPLICATIONADDRESS"
              value: "https://portal.tx.arena2036-x.de/decline"
            - name: "PROCESSES__LOCKEXPIRYSECONDS"
              value: "300"
            - name: "PROVISIONING__CENTRALIDENTITYPROVIDER__CONFIG__CLIENTID"
              value: "central-idp"
            - name: "PROVISIONING__CENTRALREALM"
              value: "CX-Central"
            - name: "PROVISIONING__CENTRALREALMID"
              value: "CX-Central"
            - name: "PROVISIONING__INVITEDUSERINITIALROLES__0__CLIENTID"
              value: "Cl1-CX-Registration"
            # -- if the array is extended please extend NETWORKREGISTRATION__INITIALROLES as well
            - name: "PROVISIONING__INVITEDUSERINITIALROLES__0__USERROLENAMES__0"
              value: "Company Admin"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__AUTH"
              value: "true"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__FROM"
              value: "info@arena2036-x.de"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__HOST"
              value: "smtp4dev.release25-03.svc.cluster.local"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-mailing"
                  key: "provisioning-sharedrealm-password"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__PORT"
              value: "25"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__REPLYTO"
              value: "info@arena2036-x.de"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__STARTTLS"
              value: "true"
            - name: "PROVISIONING__SHAREDREALM__SMTPSERVER__USER"
              value: "smtp-user"
            - name: "PROVISIONING__SHAREDREALMCLIENT__CLIENTID"
              value: "central-idp"
            - name: "OFFERSUBSCRIPTIONPROCESS__BASEPORTALADDRESS"
              value: "https://portal.tx.arena2036-x.de/home"
            - name: "OFFERSUBSCRIPTIONPROCESS__SERVICEACCOUNTROLES__0__CLIENTID"
              value: "technical_roles_management"
            - name: "OFFERSUBSCRIPTIONPROCESS__SERVICEACCOUNTROLES__0__USERROLENAMES__0"
              value: "Digital Twin Management"
            - name: "OFFERSUBSCRIPTIONPROCESS__SERVICEMANAGERROLES__0__CLIENTID"
              value: "Cl2-CX-Portal"
            - name: "OFFERSUBSCRIPTIONPROCESS__SERVICEMANAGERROLES__0__USERROLENAMES__0"
              value: "App Manager"
            - name: "OFFERSUBSCRIPTIONPROCESS__ITADMINROLES__0__CLIENTID"
              value: "Cl2-CX-Portal"
            - name: "OFFERSUBSCRIPTIONPROCESS__ITADMINROLES__0__USERROLENAMES__0"
              value: "IT Admin"
            - name: "OFFERSUBSCRIPTIONPROCESS__DIMCREATIONROLES__0__CLIENTID"
              value: "technical_roles_management"
            - name: "OFFERSUBSCRIPTIONPROCESS__DIMCREATIONROLES__0__USERROLENAMES__0"
              value: "Identity Wallet Management"
            - name: "OFFERPROVIDER__SERVICEMANAGERROLES__0__CLIENTID"
              value: "Cl2-CX-Portal"
            - name: "OFFERPROVIDER__SERVICEMANAGERROLES__0__USERROLENAMES__0"
              value: "App Manager"
            - name: "OFFERPROVIDER__CLIENTID"
              value: "sa-cl2-03"
            - name: "OFFERPROVIDER__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "offerprovider-client-secret"
            - name: "OFFERPROVIDER__GRANTTYPE"
              value: "client_credentials"
            - name: "OFFERPROVIDER__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "OFFERPROVIDER__PASSWORD"
              value: "empty"
            - name: "OFFERPROVIDER__SCOPE"
              value: "openid"
            - name: "OFFERPROVIDER__USERNAME"
              value: "empty"
            - name: "PROCESSIDENTITY__PROCESSUSERID"
              value: "d21d2e8a-fe35-483c-b2b8-4100ed7f0953"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGINDEX"
              value: "1"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__INDEX"
              value: "0"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__CIPHERMODE"
              value: "CBC"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__PADDINGMODE"
              value: "PKCS7"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "onboardingserviceprovider-encryption-key0"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__INDEX"
              value: "1"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__CIPHERMODE"
              value: "CBC"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__PADDINGMODE"
              value: "PKCS7"
            - name: "ONBOARDINGSERVICEPROVIDER__ENCRYPTIONCONFIGS__1__ENCRYPTIONKEY"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "onboardingserviceprovider-encryption-key1"
            - name: "INVITATION__INVITEDUSERINITIALROLES__0__CLIENTID"
              value: "Cl1-CX-Registration"
            - name: "INVITATION__INVITEDUSERINITIALROLES__0__USERROLENAMES__0"
              value: "Company Admin"
            - name: "INVITATION__REGISTRATIONAPPADDRESS"
              value: "https://portal.tx.arena2036-x.de/registration/"
            - name: "INVITATION__PASSWORDRESENDADDRESS"
              value: "https://portal.tx.arena2036-x.de/home/passwordResend"
            - name: "INVITATION__CLOSEAPPLICATIONADDRESS"
              value: "https://portal.tx.arena2036-x.de/decline"
            - name: "INVITATION__INITIALLOGINTHEME"
              value: "catenax-shared"
            - name: "INVITATION__ENCRYPTIONCONFIGINDEX"
              value: "0"
            - name: "INVITATION__ENCRYPTIONCONFIGS__0__INDEX"
              value: "0"
            - name: "INVITATION__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "invitation-encryption-key0"
            - name: "INVITATION__ENCRYPTIONCONFIGS__0__CIPHERMODE"
              value: "CBC"
            - name: "INVITATION__ENCRYPTIONCONFIGS__0__PADDINGMODE"
              value: "PKCS7"
            - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGINDEX"
              value: "0"
            - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__INDEX"
              value: "0"
            - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
              valueFrom:
                secretKeyRef:
                  name: "portal-backend-interfaces"
                  key: "mailing-encryption-key0"
            - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__CIPHERMODE"
              value: "CBC"
            - name: "MAILINGPROCESSCREATION__ENCRYPTIONCONFIGS__0__PADDINGMODE"
              value: "PKCS7"
            - name: "APPLICATIONCREATION_USEDIMWALLET"
              value: "true"
            - name: "SELFDESCRIPTIONCREATIONPROCESS__SELFDESCRIPTIONDOCUMENTURL"
              value: "https://portal-backend.tx.arena2036-x.de/api/administration/documents/selfDescription"
            ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            resources:
              limits:
                cpu: 225m
                memory: 600M
              requests:
                cpu: 75m
                memory: 600M
---
# Source: umbrella/charts/ssi-credential-issuer/templates/cronjob-expiry-app.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: batch/v1
kind: CronJob
metadata:
  name: tx-federated-ssi-credential-issuer-expiry
  namespace: default
  labels:
    helm.sh/chart: ssi-credential-issuer-1.3.0
    app.kubernetes.io/name: ssi-credential-issuer
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "1.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  schedule: "0 0 * * *"
  concurrencyPolicy: Forbid
  jobTemplate:
    metadata:
      name: tx-federated-ssi-credential-issuer-expiry
    spec:
      template:
        spec:
          restartPolicy: OnFailure
          containers:
          - name: tx-federated-ssi-credential-issuer-expiry
            securityContext:
              allowPrivilegeEscalation: false
              capabilities:
                drop:
                - ALL
              readOnlyRootFilesystem: true
              runAsNonRoot: true
            image: "docker.io/tractusx/ssi-credential-expiry-app:1.3.0"
            imagePullPolicy: "IfNotPresent"
            env:
            - name: DOTNET_ENVIRONMENT
              value: "Production"
            - name: "ISSUER_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "tx-federated-issuer-postgres"
                  key: "password"
            - name: "CONNECTIONSTRINGS__ISSUERDB"
              value: "Server=tx-federated-issuer-postgresql;Database=issuer;Port=;User Id=issuer;Password=$(ISSUER_PASSWORD);Ssl Mode=Disable;"
            - name: "EXPIRY__EXPIREDVCSTODELETEINMONTH"
              value: "12"
            - name: "EXPIRY__INACTIVEVCSTODELETEINWEEKS"
              value: "12"
            - name: "PROCESSIDENTITY__IDENTITYID"
              value: "ac1cf001-7fbc-1f2f-817f-bce058020006"
            - name: "PORTAL__CLIENTID"
              value: "sa-cl24-01"
            - name: "PORTAL__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "tx-federated-ssi-credential-issuer"
                  key: "portal-client-secret"
            - name: "PORTAL__GRANTTYPE"
              value: "client_credentials"
            - name: "PORTAL__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "PORTAL__BASEADDRESS"
              value: "https://portal-backend.tx.arena2036-x.de"
            - name: "PORTAL__PASSWORD"
              value: "empty"
            - name: "PORTAL__SCOPE"
              value: "openid"
            - name: "PORTAL__USERNAME"
              value: "empty"
            ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            resources:
              limits:
                cpu: 45m
                memory: 105M
              requests:
                cpu: 15m
                memory: 105M
---
# Source: umbrella/charts/ssi-credential-issuer/templates/cronjob-issuer-processes.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: batch/v1
kind: CronJob
metadata:
  name: tx-federated-ssi-credential-issuer-processesworker
  namespace: default
  labels:
    helm.sh/chart: ssi-credential-issuer-1.3.0
    app.kubernetes.io/name: ssi-credential-issuer
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "1.3.0"
    app.kubernetes.io/managed-by: Helm
spec:
  schedule: "*/5 * * * *"
  concurrencyPolicy: Forbid
  jobTemplate:
    metadata:
      name: tx-federated-ssi-credential-issuer-processesworker
    spec:
      template:
        spec:
          restartPolicy: OnFailure
          containers:
          - name: tx-federated-ssi-credential-issuer-processesworker
            securityContext:
              allowPrivilegeEscalation: false
              capabilities:
                drop:
                - ALL
              readOnlyRootFilesystem: true
              runAsNonRoot: true
            image: "docker.io/tractusx/ssi-credential-issuer-processes-worker:1.3.0"
            imagePullPolicy: "IfNotPresent"
            env:
            - name: DOTNET_ENVIRONMENT
              value: "Production"
            - name: "ISSUER_PASSWORD"
              valueFrom:
                secretKeyRef:
                  name: "tx-federated-issuer-postgres"
                  key: "password"
            - name: "CONNECTIONSTRINGS__ISSUERDB"
              value: "Server=tx-federated-issuer-postgresql;Database=issuer;Port=;User Id=issuer;Password=$(ISSUER_PASSWORD);Ssl Mode=Disable;"
            - name: "PORTAL__CLIENTID"
              value: "sa-cl24-01"
            - name: "PORTAL__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "tx-federated-ssi-credential-issuer"
                  key: "portal-client-secret"
            - name: "PORTAL__GRANTTYPE"
              value: "client_credentials"
            - name: "PORTAL__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "PORTAL__BASEADDRESS"
              value: "https://portal-backend.tx.arena2036-x.de"
            - name: "PORTAL__PASSWORD"
              value: "empty"
            - name: "PORTAL__SCOPE"
              value: "openid"
            - name: "PORTAL__USERNAME"
              value: "empty"
            - name: "CALLBACK__CLIENTID"
              value: "sa-cl24-01"
            - name: "CALLBACK__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "tx-federated-ssi-credential-issuer"
                  key: "portal-client-secret"
            - name: "CALLBACK__GRANTTYPE"
              value: "client_credentials"
            - name: "CALLBACK__TOKENADDRESS"
              value: "https://centralidp.tx.arena2036-x.de/auth/realms/CX-Central/protocol/openid-connect/token"
            - name: "CALLBACK__BASEADDRESS"
              value: "https://portal-backend.tx.arena2036-x.de"
            - name: "CALLBACK__PASSWORD"
              value: "empty"
            - name: "CALLBACK__SCOPE"
              value: "openid"
            - name: "CALLBACK__USERNAME"
              value: "empty"
            - name: "WALLET__BASEADDRESS"
              value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de"
            - name: "WALLET__CLIENTID"
              value: "sa-cl5-custodian-2"
            - name: "WALLET__CLIENTSECRET"
              valueFrom:
                secretKeyRef:
                  name: "tx-federated-ssi-credential-issuer"
                  key: "wallet-client-secret"
            - name: "WALLET__GRANTTYPE"
              value: "client_credentials"
            - name: "WALLET__TOKENADDRESS"
              value: "https://ssi-dim-wallet-stub.tx.arena2036-x.de/oauth/token"
            - name: "WALLET__PASSWORD"
              value: "empty"
            - name: "WALLET__SCOPE"
              value: "openid"
            - name: "WALLET__USERNAME"
              value: "empty"
            - name: "WALLET__ENCRYPTIONCONFIG__ENCRYPTIONCONFIGINDEX"
              value: "0"
            - name: "WALLET__ENCRYPTIONCONFIGS__0__INDEX"
              value: "0"
            - name: "WALLET__ENCRYPTIONCONFIGS__0__CIPHERMODE"
              value: "CBC"
            - name: "WALLET__ENCRYPTIONCONFIGS__0__PADDINGMODE"
              value: "PKCS7"
            - name: "WALLET__ENCRYPTIONCONFIGS__0__ENCRYPTIONKEY"
              valueFrom:
                secretKeyRef:
                  name: "tx-federated-ssi-credential-issuer"
                  key: "credential-encryption-key0"
            - name: "WALLET__WALLETAPPLICATION"
              value: "catena-x-portal"
            - name: "WALLET__CREATESIGNEDCREDENTIALPATH"
              value: "/api/v2.0.0/credentials"
            - name: "WALLET__CREATECREDENTIALPATH"
              value: "api/v2.0.0/credentials"
            - name: "WALLET__GETCREDENTIALPATH"
              value: "/api/v2.0.0/credentials/{0}"
            - name: "WALLET__REVOKECREDENTIALPATH"
              value: "/api/v2.0.0/credentials/{0}"
            - name: "SERILOG__MINIMUMLEVEL__Default"
              value: "Debug"
            - name: "PROCESSES__IDENTITYID"
              value: "ac1cf001-7fbc-1f2f-817f-bce058020006"
            ports:
            - name: http
              containerPort: 8080
              protocol: TCP
            resources:
              limits:
                cpu: 45m
                memory: 200M
              requests:
                cpu: 15m
                memory: 200M
---
# Source: umbrella/charts/bdrs-server-memory/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: bdrs-server-bdrs-server.tx.arena2036-x.de
  namespace: "default"
  labels:
    helm.sh/chart: bdrs-server-memory-0.5.4
    app.kubernetes.io/name: bdrs-server
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.5.4"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: bdrs-server
    app.kubernetes.io/part-of: bdrs
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - bdrs-server.tx.arena2036-x.de
      secretName: bdrs-server-bdrs-server.tx.arena2036-x.de-tls
  rules:
    - host: bdrs-server.tx.arena2036-x.de
      http:
        paths:
          - path: /api/directory
            pathType: Prefix
            backend:
              service:
                name: bdrs-server
                port:
                  number: 8082
          - path: /api/management
            pathType: Prefix
            backend:
              service:
                name: bdrs-server
                port:
                  number: 8081
---
# Source: umbrella/charts/bpdm/charts/bpdm-gate/templates/ingress.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-bpdm-gate
  labels:
    helm.sh/chart: bpdm-gate-6.3.0
    app.kubernetes.io/name: bpdm-gate
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/x-forwarded-prefix: /gate
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - "business-partners.tx.arena2036-x.de"
      secretName: partners-gate.tx.arena2036-tls
  rules:
    - host: "business-partners.tx.arena2036-x.de"
      http:
        paths:
          - path: /gate(/|$)(.*)
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-bpdm-gate
                port:
                  number: 80
---
# Source: umbrella/charts/bpdm/charts/bpdm-orchestrator/templates/ingress.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-bpdm-orchestrator
  labels:
    helm.sh/chart: bpdm-orchestrator-3.3.0
    app.kubernetes.io/name: bpdm-orchestrator
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/x-forwarded-prefix: /orchestrator
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - "business-partners.tx.arena2036-x.de"
      secretName: partners-orchestrator.tx.test-tls
  rules:
    - host: "business-partners.tx.arena2036-x.de"
      http:
        paths:
          - path: /orchestrator(/|$)(.*)
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-bpdm-orchestrator
                port:
                  number: 80
---
# Source: umbrella/charts/bpdm/charts/bpdm-pool/templates/ingress.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-bpdm-pool
  labels:
    helm.sh/chart: bpdm-pool-7.3.0
    app.kubernetes.io/name: bpdm-pool
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "6.3.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/x-forwarded-prefix: /pool
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - "business-partners.tx.arena2036-x.de"
      secretName: partners-pool.tx.test-tls
  rules:
    - host: "business-partners.tx.arena2036-x.de"
      http:
        paths:
          - path: /pool(/|$)(.*)
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-bpdm-pool
                port:
                  number: 80
---
# Source: umbrella/charts/bpndiscovery/templates/ingress.yaml
# Copyright (c) 2023 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-bpndiscovery
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/x-forwarded-prefix: /bpndiscovery
  labels:
    helm.sh/chart: bpndiscovery-0.5.1
    app.kubernetes.io/name: bpndiscovery
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.6.1"
    app.kubernetes.io/managed-by: Helm
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - semantics.tx.arena2036-x.de
      secretName: bpndiscovery-certificate-secret
  rules:
    - host: semantics.tx.arena2036-x.de
      http:
        paths:
          - path: /bpndiscovery(/|$)(.*)
            pathType: Prefix
            backend:
              service:
                name: tx-federated-bpndiscovery
                port:
                  number: 8080
---
# Source: umbrella/charts/centralidp/charts/keycloak/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-centralidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: centralidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
    nginx.ingress.kubernetes.io/cors-allow-methods: PUT, GET, POST, OPTIONS
    nginx.ingress.kubernetes.io/cors-allow-origin: https://centralidp.tx.arena2036-x.de
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/proxy-buffer-size: 128k
    nginx.ingress.kubernetes.io/proxy-buffering: "on"
    nginx.ingress.kubernetes.io/proxy-buffers-number: "20"
    nginx.ingress.kubernetes.io/use-regex: "true"
spec:
  ingressClassName: "webapprouting.kubernetes.azure.com"
  rules:
    - host: "centralidp.tx.arena2036-x.de"
      http:
        paths:
          - path: /auth/
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-centralidp
                port:
                  name: http
  tls:
    - hosts:
        - "centralidp.tx.arena2036-x.de"
      secretName: centralidp.tx.arena2036-x.de-tls
---
# Source: umbrella/charts/discoveryfinder/templates/ingress.yaml
# Copyright (c) 2023 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-discoveryfinder
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$2
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/x-forwarded-prefix: /discoveryfinder
  labels:
    helm.sh/chart: discoveryfinder-0.5.1
    app.kubernetes.io/name: discoveryfinder
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.6.1"
    app.kubernetes.io/managed-by: Helm
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - semantics.tx.arena2036-x.de
      secretName: discoveryfinder-certificate-secret
  rules:
    - host: semantics.tx.arena2036-x.de
      http:
        paths:
          - path: /discoveryfinder(/|$)(.*)
            pathType: Prefix
            backend:
              service:
                name: tx-federated-discoveryfinder
                port:
                  number: 8080
---
# Source: umbrella/charts/pgadmin4/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-pgadmin4
  namespace: default
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/version: "8.6"
    helm.sh/chart: pgadmin4-1.25.3
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
spec:
  ingressClassName: "webapprouting.kubernetes.azure.com"
  tls:
    - hosts:
        - "pgadmin4.tx.arena2036-x.de"
      secretName: pgadmin4.tx.arena2036-tls
  rules:
    - host: "pgadmin4.tx.arena2036-x.de"
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: tx-federated-pgadmin4
                port:
                  number: 80
---
# Source: umbrella/charts/portal/templates/ingress-backend.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-portal-portal-backend
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/cors-allow-origin: http://localhost:3000, https://*.tx.arena2036-x.de
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: 8m
    nginx.ingress.kubernetes.io/use-regex: "true"
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - "portal-backend.tx.arena2036-x.de"
      secretName: portal-backend.tx.arena2036-tls
  rules:
    - host: "portal-backend.tx.arena2036-x.de"
      http:
        paths:
          - path: /api/registration
            pathType: Prefix
            backend:
              service:
                name: tx-federated-portal-registration-service
                port:
                  number: 8080
          - path: /api/administration
            pathType: Prefix
            backend:
              service:
                name: tx-federated-portal-administration-service
                port:
                  number: 8080
          - path: /api/notification
            pathType: Prefix
            backend:
              service:
                name: tx-federated-portal-notification-service
                port:
                  number: 8080
          - path: /api/provisioning
            pathType: Prefix
            backend:
              service:
                name: tx-federated-portal-provisioning-service
                port:
                  number: 8080
          - path: /api/apps
            pathType: Prefix
            backend:
              service:
                name: tx-federated-portal-marketplace-app-service
                port:
                  number: 8080
          - path: /api/services
            pathType: Prefix
            backend:
              service:
                name: tx-federated-portal-services-service
                port:
                  number: 8080
---
# Source: umbrella/charts/portal/templates/ingress-frontend.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-portal-frontend
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/cors-allow-origin: https://*.tx.arena2036-x.de
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$1
    nginx.ingress.kubernetes.io/use-regex: "true"
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - "portal.tx.arena2036-x.de"
      secretName: portal.tx.arena2036-tls
  rules:
    - host: "portal.tx.arena2036-x.de"
      http:
        paths:
          - path: /(.*)
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-portal-portal
                port:
                  number: 8080
          - path: /registration/(.*)
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-portal-registration
                port:
                  number: 8080
          - path: /((assets|documentation)/.*)
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-portal-assets
                port:
                  number: 8080
---
# Source: umbrella/charts/selfdescription/templates/ingress.yaml
#################################################################################
# Copyright (c) 2022,2023 T-Systems International GmbH
# Copyright (c) 2022,2023 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-selfdescription
  labels:
    helm.sh/chart: selfdescription-2.1.23
    app.kubernetes.io/name: selfdescription
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.1.15"
    app.kubernetes.io/managed-by: Helm
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    kubernetes.io/ingress.class: webapprouting.kubernetes.azure.com
spec:
  tls:
    - hosts:
        - "sdfactory.tx.arena2036-x.de"
      secretName: sdfactory.tx.arena2036-tls
  rules:
    - host: "sdfactory.tx.arena2036-x.de"
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: tx-federated-selfdescription
                port:
                  number: 80
---
# Source: umbrella/charts/sharedidp/charts/keycloak/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-sharedidp
  namespace: "default"
  labels:
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: sharedidp
    app.kubernetes.io/version: 25.0.6
    helm.sh/chart: keycloak-23.0.0
    app.kubernetes.io/component: keycloak
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/cors-allow-credentials: "true"
    nginx.ingress.kubernetes.io/cors-allow-methods: PUT, GET, POST, OPTIONS
    nginx.ingress.kubernetes.io/cors-allow-origin: https://sharedidp.tx.arena2036-x.de
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/proxy-buffer-size: 128k
    nginx.ingress.kubernetes.io/proxy-buffering: "on"
    nginx.ingress.kubernetes.io/proxy-buffers-number: "20"
    nginx.ingress.kubernetes.io/use-regex: "true"
spec:
  ingressClassName: "webapprouting.kubernetes.azure.com"
  rules:
    - host: "sharedidp.tx.arena2036-x.de"
      http:
        paths:
          - path: /auth/
            pathType: ImplementationSpecific
            backend:
              service:
                name: tx-federated-sharedidp
                port:
                  name: http
  tls:
    - hosts:
        - "sharedidp.tx.arena2036-x.de"
      secretName: sharedidp.tx.arena2036-x.de-tls
---
# Source: umbrella/charts/ssi-credential-issuer/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: tx-federated-ssi-credential-issuer
  labels:
    helm.sh/chart: ssi-credential-issuer-1.3.0
    app.kubernetes.io/name: ssi-credential-issuer
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "1.3.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/cors-allow-origin: https://*.tx.arena2036-x.de
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/proxy-body-size: 8m
    nginx.ingress.kubernetes.io/use-regex: "true"
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - "ssi-credential-issuer.tx.arena2036-x.de"
      secretName: ssi-credential-issuer.tx.arena2036-tls
  rules:
    - host: "ssi-credential-issuer.tx.arena2036-x.de"
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: tx-federated-ssi-credential-issuer
                port:
                  number: 8080
---
# Source: umbrella/charts/ssi-dim-wallet-stub/templates/ingress.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: ssi-dim-wallet-ingress
  namespace: release25-03
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - ssi-dim-wallet-stub.tx.arena2036-x.de
      secretName: ssi-dim-wallet-stub-tx-arena2036-tls
  rules:
    - host: ssi-dim-wallet-stub.tx.arena2036-x.de
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: ssi-dim-wallet-service
                port:
                  number: 8080
---
# Source: umbrella/templates/smtp-ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: smtp4dev-ingress
  labels:
    name: smtp4dev-ingress
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  tls:
    - hosts:
        - "smtpdev.tx.arena2036-x.de"
      secretName: smtpdev.tx.arena2036-tls
  rules:
  - host: smtpdev.tx.arena2036-x.de
    http:
      paths:
      - pathType: Prefix
        path: "/"
        backend:
          service:
            name: smtp4dev
            port: 
              number: 80
---
# Source: umbrella/charts/bdrs-server-memory/templates/configmap.yaml
#################################################################################
  #  Copyright (c) 2023 ZF Friedrichshafen AG
  #  Copyright (c) 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #  Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
  #
  #  See the NOTICE file(s) distributed with this work for additional
  #  information regarding copyright ownership.
  #
  #  This program and the accompanying materials are made available under the
  #  terms of the Apache License, Version 2.0 which is available at
  #  https://www.apache.org/licenses/LICENSE-2.0.
  #
  #  Unless required by applicable law or agreed to in writing, software
  #  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  #  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  #  License for the specific language governing permissions and limitations
  #  under the License.
  #
  #  SPDX-License-Identifier: Apache-2.0
  #################################################################################
---
# Source: umbrella/charts/bdrs-server-memory/templates/deployment.yaml
#
  #  Copyright (c) 2023 ZF Friedrichshafen AG
  #  Copyright (c) 2023 Mercedes-Benz Tech Innovation GmbH
  #  Copyright (c) 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #  Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
  #
  #  See the NOTICE file(s) distributed with this work for additional
  #  information regarding copyright ownership.
  #
  #  This program and the accompanying materials are made available under the
  #  terms of the Apache License, Version 2.0 which is available at
  #  https://www.apache.org/licenses/LICENSE-2.0
  #
  #  Unless required by applicable law or agreed to in writing, software
  #  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  #  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  #  License for the specific language governing permissions and limitations
  #  under the License.
  #
  #  SPDX-License-Identifier: Apache-2.0
  #
---
# Source: umbrella/charts/bdrs-server-memory/templates/hpa.yaml
#################################################################################
  #  Copyright (c) 2023 ZF Friedrichshafen AG
  #  Copyright (c) 2023 Mercedes-Benz Tech Innovation GmbH
  #  Copyright (c) 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #  Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
  #
  #  See the NOTICE file(s) distributed with this work for additional
  #  information regarding copyright ownership.
  #
  #  This program and the accompanying materials are made available under the
  #  terms of the Apache License, Version 2.0 which is available at
  #  https://www.apache.org/licenses/LICENSE-2.0.
  #
  #  Unless required by applicable law or agreed to in writing, software
  #  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  #  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  #  License for the specific language governing permissions and limitations
  #  under the License.
  #
  #  SPDX-License-Identifier: Apache-2.0
  #################################################################################
---
# Source: umbrella/charts/bdrs-server-memory/templates/ingress.yaml
#################################################################################
  #  Copyright (c) 2023 ZF Friedrichshafen AG
  #  Copyright (c) 2023 Mercedes-Benz Tech Innovation GmbH
  #  Copyright (c) 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #  Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
  #
  #  See the NOTICE file(s) distributed with this work for additional
  #  information regarding copyright ownership.
  #
  #  This program and the accompanying materials are made available under the
  #  terms of the Apache License, Version 2.0 which is available at
  #  https://www.apache.org/licenses/LICENSE-2.0.
  #
  #  Unless required by applicable law or agreed to in writing, software
  #  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  #  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  #  License for the specific language governing permissions and limitations
  #  under the License.
  #
  #  SPDX-License-Identifier: Apache-2.0
  #################################################################################
---
# Source: umbrella/charts/bdrs-server-memory/templates/service.yaml
#
  #  Copyright (c) 2023 ZF Friedrichshafen AG
  #  Copyright (c) 2023 Mercedes-Benz Tech Innovation GmbH
  #  Copyright (c) 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #  Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
  #
  #  See the NOTICE file(s) distributed with this work for additional
  #  information regarding copyright ownership.
  #
  #  This program and the accompanying materials are made available under the
  #  terms of the Apache License, Version 2.0 which is available at
  #  https://www.apache.org/licenses/LICENSE-2.0
  #
  #  Unless required by applicable law or agreed to in writing, software
  #  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  #  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  #  License for the specific language governing permissions and limitations
  #  under the License.
  #
  #  SPDX-License-Identifier: Apache-2.0
  #
---
# Source: umbrella/charts/bdrs-server-memory/templates/tests/test.yaml
#
  #  Copyright (c) 2023 ZF Friedrichshafen AG
  #  Copyright (c) 2023 Mercedes-Benz Tech Innovation GmbH
  #  Copyright (c) 2023 Bayerische Motoren Werke Aktiengesellschaft (BMW AG)
  #  Copyright (c) 2021,2023 Contributors to the Eclipse Foundation
  #
  #  See the NOTICE file(s) distributed with this work for additional
  #  information regarding copyright ownership.
  #
  #  This program and the accompanying materials are made available under the
  #  terms of the Apache License, Version 2.0 which is available at
  #  https://www.apache.org/licenses/LICENSE-2.0
  #
  #  Unless required by applicable law or agreed to in writing, software
  #  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  #  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  #  License for the specific language governing permissions and limitations
  #  under the License.
  #
  #  SPDX-License-Identifier: Apache-2.0
  #
---
# Source: umbrella/charts/ssi-dim-wallet-stub/templates/configmap.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################
---
# Source: umbrella/templates/post-install-bdrs-setup.yaml
# #############################################################################
  # Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
  #
  # See the NOTICE file(s) distributed with this work for additional
  # information regarding copyright ownership.
  #
  # This program and the accompanying materials are made available under the
  # terms of the Apache License, Version 2.0 which is available at
  # https://www.apache.org/licenses/LICENSE-2.0.
  #
  # Unless required by applicable law or agreed to in writing, software
  # distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  # WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  # License for the specific language governing permissions and limitations
  # under the License.
  #
  # SPDX-License-Identifier: Apache-2.0
  # #############################################################################
---
# Source: umbrella/charts/bpdm/templates/tests/secret.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Secret
metadata:
  name: "tx-federated-bpdm-test"
  annotations:
    "helm.sh/hook": test
type: Opaque
stringData:
  defaultSecrets.yml: |-
    bpdm:
      client:
        gate:
          base-url: http://tx-federated-bpdm-gate
        pool:
          base-url: http://tx-federated-bpdm-pool
  secrets.yml: |-
    bpdm:
      client:
        gate:
          provider:
            issuer-uri: http://bpdm-centralidp/auth/realms/CX-Central
        pool:
          provider:
            issuer-uri: http://bpdm-centralidp/auth/realms/CX-Central
---
# Source: umbrella/charts/bpndiscovery/templates/postgres-init.yaml
# Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################
apiVersion: v1
kind: Secret
metadata:
  name: secret-bpndiscovery-postgres-init
  namespace: default
  annotations:
    "helm.sh/hook": pre-install, pre-upgrade
type: Opaque
# 1. Check if given secret exists
# 3. If no secret exists, use provided value from values file or generate a random one if secret not exists.
stringData:
  postgres-password: "dbpasswordbpndiscovery"
  password: "dbpasswordbpndiscovery"
  SPRING_DATASOURCE_PASSWORD: "dbpasswordbpndiscovery"
  SPRING_DATASOURCE_URL: jdbc:postgresql://tx-federated-bpndiscovery-postgresql:5432/bpndiscovery
  SPRING_DATASOURCE_USERNAME: default-user
---
# Source: umbrella/charts/discoveryfinder/templates/postgres-init.yaml
# Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: v1
kind: Secret
metadata:
  name: secret-discoveryfinder-postgres-init
  namespace: default
  annotations:
    "helm.sh/hook": pre-install, pre-upgrade
type: Opaque
# 1. Check if given secret exists
# 3. If no secret exists, use provided value from values file or generate a random one if secret not exists.
stringData:
  postgres-password: "dbpassworddiscoveryfinder"
  password: "dbpassworddiscoveryfinder"
  SPRING_DATASOURCE_PASSWORD: "dbpassworddiscoveryfinder"
  SPRING_DATASOURCE_URL: jdbc:postgresql://tx-federated-discoveryfinder-postgresql:5432/discoveryfinder
  SPRING_DATASOURCE_USERNAME: catenax
---
# Source: umbrella/charts/bdrs-server-memory/templates/tests/test.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "bdrs-server-test"
  labels:
    helm.sh/chart: bdrs-server-memory-0.5.4
    app.kubernetes.io/name: bdrs-server
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "0.5.4"
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/component: bdrs-server
    app.kubernetes.io/part-of: bdrs
  annotations:
    "helm.sh/hook": test
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
spec:
  containers:
    - name: readiness
      image: curlimages/curl
      command: [ 'curl', '--fail' ]
      args: [ 'http://bdrs-server:8080/api/check/readiness' ]
  restartPolicy: Never
  securityContext:
    fsGroup: 101 # curl_group
    runAsGroup: 101 # curl_group
    runAsNonRoot: true
    runAsUser: 100 # curl_user
    seccompProfile:
      type: RuntimeDefault
---
# Source: umbrella/charts/bpdm/templates/tests/test-connection.yaml
################################################################################
# Copyright (c) 2021,2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
################################################################################

apiVersion: v1
kind: Pod
metadata:
  name: "tx-federated-bpdm-test"
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: java-test
      image: "docker.io/tractusx/bpdm-system-tester:6.3.0"
      env:
        - name: SPRING_CONFIG_IMPORT
          value: "/etc/conf/defaultSecrets.yml,/etc/conf/secrets.yml"
      volumeMounts:
        - mountPath: /etc/conf
          name: config
          readOnly: true
  volumes:
    - name: config
      projected:
        sources:
          - secret:
              name: "tx-federated-bpdm-test"
  restartPolicy: Never
---
# Source: umbrella/charts/pgadmin4/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "tx-federated-pgadmin4-test-connection"
  namespace: default
  labels:
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: pgadmin4
    app.kubernetes.io/version: "8.6"
    helm.sh/chart: pgadmin4-1.25.3
  annotations:
    "helm.sh/hook": test
    "helm.sh/hook-delete-policy": hook-succeeded
spec:
  securityContext:
    runAsNonRoot: true
    fsGroup: 5051
    runAsGroup: 5051
    runAsUser: 5051
  containers:
    - name: wget
      image: "docker.io/busybox:latest"
      env:
        - name: PGADMIN_HOST
          value: tx-federated-pgadmin4
        - name: PGADMIN_PORT
          value: "80"
      command:
        - /bin/sh
        - -ec
        - |
          response=$(wget -qSO - http://${PGADMIN_HOST}:${PGADMIN_PORT} 2>&1)
          check=$(echo $response | grep -c '200 OK'); echo $check; if [[ $check -gt 0 ]]; then echo "Response OK"; else exit 1; fi
      resources:
        {}
      securityContext:
        readOnlyRootFilesystem: true
  restartPolicy: Never
---
# Source: umbrella/charts/portal/templates/job-backend-portal-migrations.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: batch/v1
kind: Job
metadata:
  name: tx-federated-portal-portal-migrations
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "batch.kubernetes.io/job-tracking": "true"
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
spec:
  template:
    metadata:
      name: tx-federated-portal-portal-migrations
    spec:
      restartPolicy: Never
      containers:
      - name: tx-federated-portal-portal-migrations
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-portal-migrations:v2.4.0"
        imagePullPolicy: "IfNotPresent"
        env:
          - name: DOTNET_ENVIRONMENT
            value: "Development"
          - name: "PORTAL_PASSWORD"
            valueFrom:
              secretKeyRef:
                name: "portal-postgres"
                key: "portal-password"
          - name: "CONNECTIONSTRINGS__PORTALDB"
            value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=portal;Password=$(PORTAL_PASSWORD);Ssl Mode=Disable;"
          - name: "SEEDING__DATAPATHS__0"
            value: "Seeder/Data/"
          - name: "SEEDING__DATAPATHS__1"
            value: "Seeder/Data/overwrite"
          - name: "SEEDING__DATAPATHS__2"
            value: "Seeder/Data/import/custom-test-data"
          - name: "SEEDING__TESTDATAENVIRONMENTS__2"
            value: "test"
          - name: "SERILOG__MINIMUMLEVEL__Default"
            value: "Debug"
          - name: "PROCESSIDENTITY__PROCESSUSERID"
            value: "d21d2e8a-fe35-483c-b2b8-4100ed7f0953"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        resources:
          limits:
            cpu: 225m
            memory: 350M
          requests:
            cpu: 75m
            memory: 350M
        volumeMounts:
          - name: data-initial
            mountPath: /migrations/Seeder/Data/overwrite
          - name: test-data-custom
            mountPath: /migrations/Seeder/Data/import/custom-test-data
      volumes:
        - name: data-initial
          configMap:
            name: "tx-federated-portal-initial-data"
            optional: true
        - name: test-data-custom
          configMap:
            name: "portal-testdata"
            optional: true
---
# Source: umbrella/charts/portal/templates/job-backend-provisioning-migrations.yaml
###############################################################
# Copyright (c) 2022 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: batch/v1
kind: Job
metadata:
  name: tx-federated-portal-provisioning-migrations
  namespace: default
  labels:
    helm.sh/chart: portal-2.4.0
    app.kubernetes.io/name: portal
    app.kubernetes.io/instance: tx-federated
    app.kubernetes.io/version: "2.4.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    batch.kubernetes.io/job-tracking: "true"
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
spec:
  template:
    metadata:
      name: tx-federated-portal-provisioning-migrations
    spec:
      restartPolicy: Never
      containers:
      - name: tx-federated-portal-provisioning-migrations
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/portal-provisioning-migrations:v2.4.0"
        imagePullPolicy: "IfNotPresent"
        env:
          - name: DOTNET_ENVIRONMENT
            value: "Development"
          - name: "PROVISIONING_PASSWORD"
            valueFrom:
              secretKeyRef:
                name: "portal-postgres"
                key: "provisioning-password"
          - name: "CONNECTIONSTRINGS__PROVISIONINGDB"
            value: "Server=tx-federated-portal-backend-postgresql;Database=postgres;Port=5432;User Id=provisioning;Password=$(PROVISIONING_PASSWORD);Ssl Mode=Disable;"
          - name: "SERILOG__MINIMUMLEVEL__Default"
            value: "Information"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        resources:
          limits:
            cpu: 75m
            memory: 200M
          requests:
            cpu: 25m
            memory: 200M
---
# Source: umbrella/charts/ssi-credential-issuer/templates/job-issuer-migrations.yaml
###############################################################
# Copyright (c) 2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This program and the accompanying materials are made available under the
# terms of the Apache License, Version 2.0 which is available at
# https://www.apache.org/licenses/LICENSE-2.0.
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
# License for the specific language governing permissions and limitations
# under the License.
#
# SPDX-License-Identifier: Apache-2.0
###############################################################

apiVersion: batch/v1
kind: Job
metadata:
  name: tx-federated-ssi-credential-issuer-migrations
  annotations:
    "batch.kubernetes.io/job-tracking": "true"
    "helm.sh/hook": post-install,post-upgrade
    "helm.sh/hook-weight": "-5"
spec:
  template:
    metadata:
      name: tx-federated-ssi-credential-issuer-migrations
    spec:
      restartPolicy: Never
      containers:
      - name: tx-federated-ssi-credential-issuer-migrations
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          readOnlyRootFilesystem: true
          runAsNonRoot: true
        image: "docker.io/tractusx/ssi-credential-issuer-migrations:1.3.0"
        imagePullPolicy: "IfNotPresent"
        env:
          - name: DOTNET_ENVIRONMENT
            value: "Production"
          - name: "ISSUER_PASSWORD"
            valueFrom:
              secretKeyRef:
                name: "tx-federated-issuer-postgres"
                key: "password"
          - name: "CONNECTIONSTRINGS__ISSUERDB"
            value: "Server=tx-federated-issuer-postgresql;Database=issuer;Port=;User Id=issuer;Password=$(ISSUER_PASSWORD);Ssl Mode=Disable;"
          - name: "SEEDING__DATAPATHS__0"
            value: "Seeder/Data"
          - name: "SERILOG__MINIMUMLEVEL__Default"
            value: "Debug"
          - name: "PROCESSIDENTITY__IDENTITYID"
            value: "ac1cf001-7fbc-1f2f-817f-bce058020006"
        ports:
        - name: http
          containerPort: 8080
          protocol: TCP
        resources:
          limits:
            cpu: 45m
            memory: 200M
          requests:
            cpu: 15m
            memory: 200M
---
# Source: umbrella/templates/post-install-bdrs-setup.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: tx-federated-umbrella-post-install-bdrs-setup
  labels:
    app.kubernetes.io/managed-by: "Helm"
    app.kubernetes.io/instance: "tx-federated"
    helm.sh/chart: "umbrella-2.14.0"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": post-install
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-hook-creation,hook-succeeded
spec:
  template:
    metadata:
      name: "tx-federated"
      labels:
        app.kubernetes.io/managed-by: "Helm"
        app.kubernetes.io/instance: "tx-federated"
        helm.sh/chart: "umbrella-2.14.0"
    spec:
      restartPolicy: Never
      containers:
        - name: post-install-job
          image: "alpine:3.19"
          imagePullPolicy: IfNotPresent
          command:
            - "/bin/sh"
            - "-c"
            - |
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003CRHK","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CRHK"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003B3NX","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003B3NX"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003CSGV","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CSGV"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003B6LU","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003B6LU"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003AXS3","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003AXS3"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003AZQP","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003AZQP"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003AWSS","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003AWSS"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003AYRE","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003AYRE"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003AVTH","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003AVTH"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000000BJTL","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000000BJTL"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003CML1","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CML1"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003B2OM","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003B2OM"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003B0Q0","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003B0Q0"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003B5MJ","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003B5MJ"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNS0000000008ZZ","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNS0000000008ZZ"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000003CNKC","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNL00000003CNKC"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNS00000008BDFH","did": ""}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNL00000007OR16","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNS00000008BDFH"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNLA3600000ICH1","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNLA3600000ICH1"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNLA3600000ICH2","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNLA3600000ICH2"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNLA3600000ICH3","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNLA3600000ICH3"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
              wget --header "Content-Type: application/json" --header "x-api-key: TEST" \
              --post-data '{"bpn": "BPNLA3600000ICH4","did": "did:web:ssi-dim-wallet-stub.tx.arena2036-x.de:BPNLA3600000ICH4"}' "http://bdrs-server:8081/api/management/bpn-directory" -S -O -
